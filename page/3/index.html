<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>LeoChan&#39;s 个人博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="描述啊">
<meta property="og:type" content="website">
<meta property="og:title" content="LeoChan&#39;s 个人博客">
<meta property="og:url" content="https://clq2owesome.github.io/page/3/index.html">
<meta property="og:site_name" content="LeoChan&#39;s 个人博客">
<meta property="og:description" content="描述啊">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="LeoChan&#39;s 个人博客">
<meta name="twitter:description" content="描述啊">
  
    <link rel="alternate" href="/atom.xml" title="LeoChan&#39;s 个人博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">LeoChan&#39;s 个人博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">技术都是通用的，重要的是是否具有自主解决问题的能力！</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://clq2owesome.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-GitHub/打开SSH功能" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/02/25/GitHub/打开SSH功能/" class="article-date">
  <time datetime="2018-02-25T02:09:45.000Z" itemprop="datePublished">2018-02-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Github/">Github</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/25/GitHub/打开SSH功能/">打开SSH功能</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在Mac通过ssh localhost 拒绝访问的问题，可能是由于sshd服务未开启</p>
<h3 id="开启sshd服务"><a href="#开启sshd服务" class="headerlink" title="开启sshd服务"></a>开启sshd服务</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo launchctl load -w /System/Library/LaunchDaemons/ssh.plist</div></pre></td></tr></table></figure>
<h3 id="关闭sshd服务"><a href="#关闭sshd服务" class="headerlink" title="关闭sshd服务"></a>关闭sshd服务</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo launchctl unload -w /System/Library/LaunchDaemons/ssh.plist</div></pre></td></tr></table></figure>
<h3 id="查看ssh的服务是否开启"><a href="#查看ssh的服务是否开启" class="headerlink" title="查看ssh的服务是否开启"></a>查看ssh的服务是否开启</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">launchctl list | grep ssh</div><div class="line">------------------</div><div class="line">-	0	com.openssh.sshd</div></pre></td></tr></table></figure>
<h3 id="查看是否成功"><a href="#查看是否成功" class="headerlink" title="查看是否成功"></a>查看是否成功</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">ssh localhost</div><div class="line">-------------------</div><div class="line">The authenticity of host &apos;localhost (::1)&apos; can&apos;t be established.</div><div class="line">ECDSA key fingerprint is SHA256:uS8js0TJ5KVjuNBq9dA2PnVWghti86Wf17B08r8cXyg.</div><div class="line">Are you sure you want to continue connecting (yes/no)? yes</div><div class="line">Warning: Permanently added &apos;localhost&apos; (ECDSA) to the list of known hosts.</div><div class="line">PTY allocation request failed on channel 0</div><div class="line">Hi there, You&apos;ve successfully authenticated, but Gogs does not provide shell access.</div><div class="line">If this is unexpected, please log in with password and setup Gogs under another user.</div><div class="line">Connection to localhost closed.</div></pre></td></tr></table></figure>
<p><img src="http://img.blog.csdn.net/20150503221150338?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdGlhbnlpaWk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="image"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://clq2owesome.github.io/2018/02/25/GitHub/打开SSH功能/" data-id="cjegeio0r0004pfblrh96oe6n" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Linux/JDK安装" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/02/25/Linux/JDK安装/" class="article-date">
  <time datetime="2018-02-25T02:09:45.000Z" itemprop="datePublished">2018-02-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/25/Linux/JDK安装/">JDK安装</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="搜索包"><a href="#搜索包" class="headerlink" title="搜索包"></a>搜索包</h2> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-cache search jdk</div></pre></td></tr></table></figure>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install openjdk-8-jdk</div></pre></td></tr></table></figure>
<h2 id="存在多个版本，自动配置："><a href="#存在多个版本，自动配置：" class="headerlink" title="存在多个版本，自动配置："></a>存在多个版本，自动配置：</h2> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo update-alternatives --config Java</div></pre></td></tr></table></figure>
<h2 id="jdk安装路径"><a href="#jdk安装路径" class="headerlink" title="jdk安装路径"></a>jdk安装路径</h2> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"> root@iZwz9hwmk5t4idn4oxa4okZ:/usr/share# which java</div><div class="line">/usr/bin/java</div><div class="line">root@iZwz9hwmk5t4idn4oxa4okZ:/usr/share#  ls -lrt /usr/bin/java</div><div class="line">lrwxrwxrwx 1 root root 22 Feb  8  2017 /usr/bin/java -&gt; /etc/alternatives/java</div><div class="line">root@iZwz9hwmk5t4idn4oxa4okZ:/usr/share# ls -lrt /etc/alternatives/java</div><div class="line">lrwxrwxrwx 1 root root 46 Feb  8  2017 /etc/alternatives/java -&gt; /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java</div></pre></td></tr></table></figure>
<h2 id="Linux下修改-设置环境变量JAVA-HOME"><a href="#Linux下修改-设置环境变量JAVA-HOME" class="headerlink" title="Linux下修改/设置环境变量JAVA_HOME"></a>Linux下修改/设置环境变量JAVA_HOME</h2><h4 id="永久修改，对所有用户有效"><a href="#永久修改，对所有用户有效" class="headerlink" title="永久修改，对所有用户有效"></a>永久修改，对所有用户有效</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># vi /etc/profile</div><div class="line"></div><div class="line">export JAVA_HOME=/home/myuser/jdk1.7.0_03</div><div class="line"></div><div class="line">export PATH = $JAVA_HOME/bin:$PATH</div><div class="line">export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</div><div class="line"></div><div class="line">[注]：修改文件后如果想马上生效，还要运行 #source /etc/profile</div></pre></td></tr></table></figure>
<h4 id="永久修改，对单一用户有效"><a href="#永久修改，对单一用户有效" class="headerlink" title="永久修改，对单一用户有效"></a>永久修改，对单一用户有效</h4><p>修改用户目录下的.bash_profile文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">$ vi /home/myuser/.bash_profile</div><div class="line"></div><div class="line">加入：</div><div class="line">export JAVA_HOME=/home/myuser/jdk1.7.0_03</div><div class="line"></div><div class="line">export PATH = $JAVA_HOME/bin:$PATH</div><div class="line">export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</div><div class="line"></div><div class="line">[注]：修改文件后如果想马上生效，还要运行 #source /home/myuser/.bash_profile</div></pre></td></tr></table></figure></p>
<h4 id="只对当前bash-shell-生效"><a href="#只对当前bash-shell-生效" class="headerlink" title="只对当前bash /shell 生效"></a>只对当前bash /shell 生效</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ export JAVA_HOME=/home/myuser/jdk1.7.0_03</div><div class="line"></div><div class="line">$ export PATH=$JAVA_HOME/bin:$PATH</div><div class="line">$ export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://clq2owesome.github.io/2018/02/25/Linux/JDK安装/" data-id="cjegeio0t0007pfbl4o2brqqe" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-数据库相关/mysql/主从结构（master-slave）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/02/25/数据库相关/mysql/主从结构（master-slave）/" class="article-date">
  <time datetime="2018-02-25T02:09:45.000Z" itemprop="datePublished">2018-02-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/数据库相关/">数据库相关</a>►<a class="article-category-link" href="/categories/数据库相关/mysql/">mysql</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/25/数据库相关/mysql/主从结构（master-slave）/">主从结构（master-slave）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>MySQL数据库自身提供的主从复制功能可以方便的实现数据的多处自动备份，实现数据库的拓展。多个数据备份不仅可以加强数据的安全性，通过实现读写分离还能进一步提升数据库的负载性能。</p>
<p>下图就描述了一个多个数据库间主从复制与读写分离的模型(来源网络)：<br><img src="http://images2015.cnblogs.com/blog/1043616/201612/1043616-20161213151157558-1150305350.jpg" alt="image"><br>在一主多从的数据库体系中，多个从服务器采用异步的方式更新主数据库的变化，业务服务器在执行写或者相关修改数据库的操作是在主服务器上进行的，读操作则是在各从服务器上进行。如果配置了多个从服务器或者多个主服务器又涉及到相应的负载均衡问题，关于负载均衡具体的技术细节还没有研究过，今天就先简单的实现一主一从的主从复制功能。</p>
<h3 id="复制概述"><a href="#复制概述" class="headerlink" title="复制概述"></a>复制概述</h3><p>Mysql内建的复制功能是构建大型，高性能应用程序的基础。将Mysql的数据分布到多个系统上去，这种分布的机制，是通过将Mysql的某一台主机的数据复制到其它主机（slaves）上，并重新执行一遍来实现的。复制过程中一个服务器充当主服务器，而一个或多个其它服务器充当从服务器。主服务器将更新写入二进制日志文件，并维护文件的一个索引以跟踪日志循环。这些日志可以记录发送到从服务器的更新。当一个从服务器连接主服务器时，它通知主服务器从服务器在日志中读取的最后一次成功更新的位置。从服务器接收从那时起发生的任何更新，然后封锁并等待主服务器通知新的更新。</p>
<p>请注意当你进行复制时，所有对复制中的表的更新必须在主服务器上进行。否则，你必须要小心，以避免用户对主服务器上的表进行的更新与对从服务器上的表所进行的更新之间的冲突。</p>
<h3 id="mysql支持的复制类型"><a href="#mysql支持的复制类型" class="headerlink" title="mysql支持的复制类型"></a>mysql支持的复制类型</h3><ol>
<li><p><code>基于语句的复制</code>：  在主服务器上执行的SQL语句，在从服务器上执行同样的语句。MySQL默认采用基于语句的复制，效率比较高。<br>一旦发现没法精确复制时，   会自动选着基于行的复制。 </p>
</li>
<li><p><code>基于行的复制</code>：把改变的内容复制过去，而不是把命令在从服务器上执行一遍. 从mysql5.0开始支持</p>
</li>
<li><p><code>混合类型的复制</code>: 默认采用基于语句的复制，一旦发现基于语句的无法精确的复制时，就会采用基于行的复制。</p>
</li>
</ol>
<h3 id="复制解决的问题"><a href="#复制解决的问题" class="headerlink" title="复制解决的问题"></a>复制解决的问题</h3><p>MySQL复制技术有以下一些特点：</p>
<ol>
<li>数据分布 (Data distribution )</li>
<li>负载平衡(load balancing)</li>
<li>备份(Backups) </li>
<li>高可用性和容错行(High availability and failover)</li>
</ol>
<h3 id="复制如何工作"><a href="#复制如何工作" class="headerlink" title="复制如何工作"></a>复制如何工作</h3><p>整体上来说，复制有3个步骤：   </p>
<ol>
<li>master将改变记录到二进制日志(binary log)中（这些记录叫做二进制日志事件，binary log events）；</li>
<li>slave将master的binary log events拷贝到它的中继日志(relay log)；</li>
<li>slave重做中继日志中的事件，将改变反映它自己的数据。</li>
</ol>
<p>下图描述了复制的过程：<br><img src="http://hi.csdn.net/attachment/201202/28/0_1330439010P7lI.gif" alt="image"><br>第一步是在主库上记录二进制日志。在每次准备提交事务完成数据更新前，主库将数据更新的事件记录到二进制日志中。MySQL会按事务提交的顺序而非每条语句的执行顺序来记录二进制日志。在记录二进制日志后，主库会告诉存储引擎可以提交事务了。</p>
<p>下一步，备库将主库的二进制日志复制到其本地的中继日志中。首先，备库会启动一个工作线程，称为I/O线程，I/O线程跟主库建立一个普通的客户端连接，然后在主库上启动一个特殊的二进制转储（binlog dunp）线程（该线程没有对应的SQL命令），这个二进制转储线程会读取主库上二进制日志中的事件。它不会对事件进行轮询。如果该线程追赶上了主库，它将进入睡眠状态，直到主库发送信号量通知其有新的事件产生时才会被唤醒，备库I/O线程会将接收到的事件记录到中继日志中。</p>
<p>备库的SQL线程执行最后一步，将线程从中继日志中读取事件并在备库执行，从而实现备库数据的更新。当SQL线程追赶上I/O线程时，中继日志通常已经在系统缓存中，所以中继日志的开销很低。SQL线程执行的事件也可以通过配置选项来决定是否写入其自己的二进制日志中。</p>
<p>这种复制架构实现了获取事件和重放事件的解耦，允许这两个过程异步进行。也就是说I/O线程能够独立于SQL线程之外工作。但这种架构也限制了复制的过程，其中最重要的一点是在主库上并发运行的查询在备库只能串行化执行，因为只有一个SQL线程来重放中继日志中的事件。</p>
<h3 id="复制配置"><a href="#复制配置" class="headerlink" title="复制配置"></a>复制配置</h3><p>有两台MySQL数据库服务器Master和slave，Master为主服务器，slave为从服务器，初始状态时，Master和slave中的数据信息相同，当Master中的数据发生变化时，slave也跟着发生相应的变化，使得master和slave的数据信息同步，达到备份的目的。    </p>
<h5 id="要点："><a href="#要点：" class="headerlink" title="要点："></a>要点：</h5><p>负责在主、从服务器传输各种修改动作的媒介是主服务器的二进制变更日志，这个日志记载着需要传输给从服务器的各种修改动作。因此，主服务器必须激活二进制日志功能。从服务器必须具备足以让它连接主服务器并请求主服务器把二进制变更日志传输给它的权限。</p>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><h4 id="主服务器配置"><a href="#主服务器配置" class="headerlink" title="主服务器配置"></a>主服务器配置</h4><ol>
<li><p>修改mysql配置<br>找到主数据库的配置文件my.cnf(或者my.ini)，我的在/etc/mysql/my.cnf,在[mysqld]部分插入如下两行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[mysqld]</div><div class="line">log-bin=mysql-bin #开启二进制日志</div><div class="line">server-id=1 #设置server-id</div></pre></td></tr></table></figure>
</li>
<li><p>重启mysql，创建用于同步的用户账号<br>打开mysql会话shell&gt;<code>mysql -h localhost -u name -p password</code></p>
</li>
</ol>
<p>创建用户并授权：用户：rel1密码：slavepass<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mysql&gt; CREATE USER &apos;repl&apos;@&apos;123.57.44.85&apos; IDENTIFIED BY &apos;slavepass&apos;;#创建用户</div><div class="line">mysql&gt; GRANT REPLICATION SLAVE ON *.* TO &apos;repl&apos;@&apos;123.57.44.85&apos;;#分配权限</div><div class="line">mysql&gt;flush privileges;   #刷新权限</div></pre></td></tr></table></figure></p>
<ol>
<li>查看master状态，记录二进制文件名(mysql-bin.000003)和位置(73)：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">mysql &gt; SHOW MASTER STATUS;</div><div class="line">+------------------+----------+--------------+------------------+</div><div class="line">| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB |</div><div class="line">+------------------+----------+--------------+------------------+</div><div class="line">| mysql-bin.000003 | 73       | test         | manual,mysql     |</div><div class="line">+------------------+----------+--------------+------------------+</div></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="从服务器slave修改："><a href="#从服务器slave修改：" class="headerlink" title="从服务器slave修改："></a>从服务器slave修改：</h4><ol>
<li><p>修改mysql配置<br>同样找到my.cnf配置文件，添加server-id</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[mysqld]</div><div class="line">server-id=2 #设置server-id，必须唯一</div></pre></td></tr></table></figure>
</li>
<li><p>重启mysql，打开mysql会话，执行同步SQL语句(需要主服务器主机名，登陆凭据，二进制文件的名称和位置)：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">mysql&gt; CHANGE MASTER TO</div><div class="line">    -&gt;     MASTER_HOST=&apos;182.92.172.80&apos;,</div><div class="line">    -&gt;     MASTER_USER=&apos;rep1&apos;,</div><div class="line">    -&gt;     MASTER_PASSWORD=&apos;slavepass&apos;,</div><div class="line">    -&gt;     MASTER_LOG_FILE=&apos;mysql-bin.000003&apos;,</div><div class="line">    -&gt;     MASTER_LOG_POS=73;</div></pre></td></tr></table></figure>
</li>
<li><p>启动slave同步进程：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql&gt;start slave;</div></pre></td></tr></table></figure>
</li>
<li><p>查看slave状态：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">mysql&gt; show slave status\G;</div><div class="line">*************************** 1. row ***************************</div><div class="line">               Slave_IO_State: Waiting for master to send event</div><div class="line">                  Master_Host: 182.92.172.80</div><div class="line">                  Master_User: rep1</div><div class="line">                  Master_Port: 3306</div><div class="line">                Connect_Retry: 60</div><div class="line">              Master_Log_File: mysql-bin.000013</div><div class="line">          Read_Master_Log_Pos: 11662</div><div class="line">               Relay_Log_File: mysqld-relay-bin.000022</div><div class="line">                Relay_Log_Pos: 11765</div><div class="line">        Relay_Master_Log_File: mysql-bin.000013</div><div class="line">             Slave_IO_Running: Yes</div><div class="line">            Slave_SQL_Running: Yes</div><div class="line">              Replicate_Do_DB: </div><div class="line">          Replicate_Ignore_DB: </div><div class="line">        ...</div></pre></td></tr></table></figure>
</li>
</ol>
<p>当Slave_IO_Running和Slave_SQL_Running都为YES的时候就表示主从同步设置成功了。接下来就可以进行一些验证了，比如在主master数据库的test数据库的一张表中插入一条数据，在slave的test库的相同数据表中查看是否有新增的数据即可验证主从复制功能是否有效，还可以关闭slave（<code>mysql&gt;stop slave;</code>）,然后再修改master，看slave是否也相应修改（停止slave后，master的修改不会同步到slave），就可以完成主从复制功能的验证了。</p>
<p>还可以用到的其他相关参数：</p>
<p>master开启二进制日志后默认记录所有库所有表的操作，可以通过配置来指定只记录指定的数据库甚至指定的表的操作，具体在mysql配置文件的[mysqld]可添加修改如下选项：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"># 不同步哪些数据库  </div><div class="line">binlog-ignore-db = mysql  </div><div class="line">binlog-ignore-db = test  </div><div class="line">binlog-ignore-db = information_schema  </div><div class="line">  </div><div class="line"># 只同步哪些数据库，除此之外，其他不同步  </div><div class="line">binlog-do-db = game</div></pre></td></tr></table></figure></p>
<h3 id="添加新slave服务器"><a href="#添加新slave服务器" class="headerlink" title="添加新slave服务器"></a>添加新slave服务器</h3><p>假如master已经运行很久了，想对新安装的slave进行数据同步，甚至它没有master的数据。<br>此时，有几种方法可以使slave从另一个服务开始，例如，从master拷贝数据，从另一个slave克隆，从最近的备份开始一个slave。Slave与master同步时，需要三样东西：</p>
<ol>
<li>master的某个时刻的数据快照；</li>
<li>master当前的日志文件、以及生成快照时的字节偏移。这两个值可以叫做日志文件坐标(log file coordinate)，因为它们确定了一个二进制日志的位置，你可以用SHOW MASTER STATUS命令找到日志文件的坐标；</li>
<li>master的二进制日志文件。</li>
</ol>
<p>可以通过以下几中方法来克隆一个slave：</p>
<ol>
<li>冷拷贝(cold copy)<br>停止master，将master的文件拷贝到slave；然后重启master。缺点很明显。</li>
<li>热拷贝(warm copy)<br>如果你仅使用MyISAM表，你可以使用mysqlhotcopy拷贝，即使服务器正在运行。</li>
<li><p>使用mysqldump<br>使用mysqldump来得到一个数据快照可分为以下几步：</p>
<ol>
<li><p>锁表：如果你还没有锁表，你应该对表加锁，防止其它连接修改数据库，否则，你得到的数据可以是不一致的。如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql&gt; FLUSH TABLES WITH READ LOCK;</div></pre></td></tr></table></figure>
</li>
<li><p>在另一个连接用mysqldump创建一个你想进行复制的数据库的转储：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">shell&gt; mysqldump --all-databases --lock-all-tables &gt;dbdump.db</div></pre></td></tr></table></figure>
</li>
<li><p>对表释放锁。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql&gt; UNLOCK TABLES;</div></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
<h3 id="深入了解复制"><a href="#深入了解复制" class="headerlink" title="深入了解复制"></a>深入了解复制</h3><h4 id="基于语句的复制-Statement-Based-Replication"><a href="#基于语句的复制-Statement-Based-Replication" class="headerlink" title="基于语句的复制(Statement-Based Replication)"></a>基于语句的复制(Statement-Based Replication)</h4><p>MySQL 5.0及之前的版本仅支持基于语句的复制（也叫做逻辑复制，logical replication），这在数据库并不常见。master记录下改变数据的查询，然后，slave从中继日志中读取事件，并执行它，这些SQL语句与master执行的语句一样。 </p>
<p>这种方式的优点就是实现简单。此外，基于语句的复制的二进制日志可以很好的进行压缩，而且日志的数据量也较小，占用带宽少——例如，一个更新GB的数据的查询仅需要几十个字节的二进制日志。而mysqlbinlog对于基于语句的日志处理十分方便。</p>
<p>但是，基于语句的复制并不是像它看起来那么简单，因为一些查询语句依赖于master的特定条件，例如，master与slave可能有不同的时间。所以，MySQL的二进制日志的格式不仅仅是查询语句，还包括一些元数据信息，例如，当前的时间戳。即使如此，还是有一些语句，比如，CURRENT USER函数，不能正确的进行复制。此外，存储过程和触发器也是一个问题。</p>
<p>另外一个问题就是基于语句的复制必须是串行化的。这要求大量特殊的代码，配置，例如InnoDB的next-key锁等。并不是所有的存储引擎都支持基于语句的复制。</p>
<h4 id="基于记录的复制-Row-Based-Replication"><a href="#基于记录的复制-Row-Based-Replication" class="headerlink" title="基于记录的复制(Row-Based Replication)"></a>基于记录的复制(Row-Based Replication)</h4><p>MySQL增加基于记录的复制，在二进制日志中记录下实际数据的改变，这与其它一些DBMS的实现方式类似。这种方式有优点，也有缺点。优点就是可以对任何语句都能正确工作，一些语句的效率更高。主要的缺点就是二进制日志可能会很大，而且不直观，所以，你不能使用mysqlbinlog来查看二进制日志。<br>对于一些语句，基于记录的复制能够更有效的工作，如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">mysql&gt; INSERT INTO summary_table(col1, col2, sum_col3)</div><div class="line">    -&gt; SELECT col1, col2, sum(col3)</div><div class="line">    -&gt; FROM enormous_table</div><div class="line">    -&gt; GROUP BY col1, col2;</div></pre></td></tr></table></figure></p>
<p>假设，只有三种唯一的col1和col2的组合，但是，该查询会扫描原表的许多行，却仅返回三条记录。此时，基于记录的复制效率更高。  </p>
<p>另一方面，下面的语句，基于语句的复制更有效：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql&gt; UPDATE enormous_table SET col1 = 0;</div></pre></td></tr></table></figure></p>
<p>此时使用基于记录的复制代价会非常高。由于两种方式不能对所有情况都能很好的处理，所以，MySQL 5.1支持在基于语句的复制和基于记录的复制之前动态交换。你可以通过设置session变量binlog_format来进行控制。</p>
<h4 id="复制相关的文件"><a href="#复制相关的文件" class="headerlink" title="复制相关的文件"></a>复制相关的文件</h4><p>除了二进制日志和中继日志文件外，还有其它一些与复制相关的文件。如下：    </p>
<ul>
<li><p>mysql-bin.index<br>服务器一旦开启二进制日志，会产生一个与二日志文件同名，但是以.index结尾的文件。它用于跟踪磁盘上存在哪些二进制日志文件。MySQL用它来定位二进制日志文件。</p>
</li>
<li><p>mysql-relay-bin.index<br>该文件的功能与mysql-bin.index类似，但是它是针对中继日志，而不是二进制日志</p>
</li>
<li><p>master.info<br>保存master的相关信息。不要删除它，否则，slave重启后不能连接master</p>
</li>
<li><p>relay-log.info<br>包含slave中当前二进制日志和中继日志的信息。</p>
</li>
</ul>
<h4 id="发送复制事件到其它slave"><a href="#发送复制事件到其它slave" class="headerlink" title="发送复制事件到其它slave"></a>发送复制事件到其它slave</h4><p>当设置log_slave_updates时，你可以让slave扮演其它slave的master。此时，slave把SQL线程执行的事件写进行自己的二进制日志(binary log)，然后，它的slave可以获取这些事件并执行它。如下：<br><img src="http://images.cnblogs.com/cnblogs_com/hustcat/mysql/mysql03-5.JPG" alt="image">  </p>
<h4 id="复制过滤-Replication-Filters"><a href="#复制过滤-Replication-Filters" class="headerlink" title="复制过滤(Replication Filters)"></a>复制过滤(Replication Filters)</h4><p>复制过滤可以让你只复制服务器中的一部分数据，有两种复制过滤：在master上过滤二进制日志中的事件；在slave上过滤中继日志中的事件。如下：<br><img src="http://images.cnblogs.com/cnblogs_com/hustcat/mysql/mysql03-6.JPG" alt="image">  </p>
<h3 id="复制的常用拓扑结构"><a href="#复制的常用拓扑结构" class="headerlink" title="复制的常用拓扑结构"></a>复制的常用拓扑结构</h3><p>复制的体系结构有以下一些基本原则：</p>
<ul>
<li>每个slave只能有一个master；</li>
<li>每个slave只能有一个唯一的服务器ID；</li>
<li>每个master可以有很多slave；</li>
<li>如果你设置log_slave_updates，slave可以是其它slave的master，从而扩散master的更新。</li>
</ul>
<p>MySQL不支持多主服务器复制(Multimaster Replication)——即一个slave可以有多个master。但是，通过一些简单的组合，我们却可以建立灵活而强大的复制体系结构。</p>
<h4 id="单一master和多slave"><a href="#单一master和多slave" class="headerlink" title="单一master和多slave"></a>单一master和多slave</h4><p>由一个master和一个slave组成复制系统是最简单的情况。Slave之间并不相互通信，只能与master进行通信。如下：<br><img src="http://images.cnblogs.com/cnblogs_com/hustcat/mysql/mysql03-7.JPG" alt="image">  </p>
<p>如果写操作较少，而读操作很时，可以采取这种结构。你可以将读操作分布到其它的slave，从而减小master的压力。但是，当slave增加到一定数量时，slave对master的负载以及网络带宽都会成为一个严重的问题。</p>
<p>这种结构虽然简单，但是，它却非常灵活，足够满足大多数应用需求。一些建议：</p>
<ol>
<li>不同的slave扮演不同的作用(例如使用不同的索引，或者不同的存储引擎)；</li>
<li>用一个slave作为备用master，只进行复制；</li>
<li>用一个远程的slave，用于灾难恢复；</li>
</ol>
<h4 id="主动模式的Master-Master-Master-Master-in-Active-Active-Mode"><a href="#主动模式的Master-Master-Master-Master-in-Active-Active-Mode" class="headerlink" title="主动模式的Master-Master(Master-Master in Active-Active Mode)"></a>主动模式的Master-Master(Master-Master in Active-Active Mode)</h4><p>Master-Master复制的两台服务器，既是master，又是另一台服务器的slave。如图：<br><img src="http://images.cnblogs.com/cnblogs_com/hustcat/mysql/mysql03-8.JPG" alt="image"><br>主动的Master-Master复制有一些特殊的用处。例如，地理上分布的两个部分都需要自己的可写的数据副本。这种结构最大的问题就是更新冲突。假设一个表只有一行(一列)的数据，其值为1，如果两个服务器分别同时执行如下语句：  </p>
<p>在第一个服务器上执行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql&gt; UPDATE tbl SET col=col + 1;</div></pre></td></tr></table></figure></p>
<p>在第二个服务器上执行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql&gt; UPDATE tbl SET col=col * 2;</div></pre></td></tr></table></figure></p>
<p>那么结果是多少呢？一台服务器是4，另一个服务器是3，但是，这并不会产生错误。<br>实际上，MySQL并不支持其它一些DBMS支持的多主服务器复制(Multimaster Replication)，这是MySQL的复制功能很大的一个限制(多主服务器的难点在于解决更新冲突)，但是，如果你实在有这种需求，你可以采用MySQL Cluster，以及将Cluster和Replication结合起来，可以建立强大的高性能的数据库平台。但是，可以通过其它一些方式来模拟这种多主服务器的复制。</p>
<h4 id="主动-被动模式的Master-Master-Master-Master-in-Active-Passive-Mode"><a href="#主动-被动模式的Master-Master-Master-Master-in-Active-Passive-Mode" class="headerlink" title="主动-被动模式的Master-Master(Master-Master in Active-Passive Mode)"></a>主动-被动模式的Master-Master(Master-Master in Active-Passive Mode)</h4><p>这是master-master结构变化而来的，它避免了M-M的缺点，实际上，这是一种具有容错和高可用性的系统。它的不同点在于其中一个服务只能进行只读操作。如图：<br><img src="http://images.cnblogs.com/cnblogs_com/hustcat/mysql/mysql03-9.JPG" alt="image">  </p>
<h4 id="带从服务器的Master-Master结构-Master-Master-with-Slaves"><a href="#带从服务器的Master-Master结构-Master-Master-with-Slaves" class="headerlink" title="带从服务器的Master-Master结构(Master-Master with Slaves)"></a>带从服务器的Master-Master结构(Master-Master with Slaves)</h4><p>这种结构的优点就是提供了冗余。在地理上分布的复制结构，它不存在单一节点故障问题，而且还可以将读密集型的请求放到slave上。<br><img src="http://images.cnblogs.com/cnblogs_com/hustcat/mysql/mysql03-10.JPG" alt="image"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://clq2owesome.github.io/2018/02/25/数据库相关/mysql/主从结构（master-slave）/" data-id="cjegeio8y00cwpfblno3s9bgg" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-数据库相关/mysql/主键约束,唯一约束与默认约束" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/02/25/数据库相关/mysql/主键约束,唯一约束与默认约束/" class="article-date">
  <time datetime="2018-02-25T02:09:45.000Z" itemprop="datePublished">2018-02-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/数据库相关/">数据库相关</a>►<a class="article-category-link" href="/categories/数据库相关/mysql/">mysql</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/25/数据库相关/mysql/主键约束,唯一约束与默认约束/">主键约束,唯一约束与默认约束</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="主键约束（PRIMARY-KEY）"><a href="#主键约束（PRIMARY-KEY）" class="headerlink" title="主键约束（PRIMARY KEY）"></a>主键约束（PRIMARY KEY）</h3><ol>
<li>主键用于唯一地标识表中的每一条记录，可以定义一列或多列为主键。 一个表只有一个主键</li>
<li>是不可能（或很难）更新． 几乎不会对主键进行更新操作</li>
<li>主键列上没有任何两行具有相同值（即重复值），不允许空（NULL）． </li>
<li>主健可作外健，唯一索引不可；</li>
</ol>
<h3 id="唯一性约束（UNIQUE）"><a href="#唯一性约束（UNIQUE）" class="headerlink" title="唯一性约束（UNIQUE）"></a>唯一性约束（UNIQUE）</h3><ol>
<li>唯一性约束用来限制不受主键约束的列上的数据的唯一性，用于作为访问某行的可选手段</li>
<li>只要唯一就可以更新． </li>
<li>即表中任意两行在 指定列上都不允许有相同的值，允许空（NULL）． </li>
<li>一个表上可以放置多个唯一性约束</li>
</ol>
<h5 id="唯一性约束和主键约束的区别："><a href="#唯一性约束和主键约束的区别：" class="headerlink" title="唯一性约束和主键约束的区别："></a>唯一性约束和主键约束的区别：</h5><ol>
<li>唯一性约束允许在该列上存在NULL值，而主键约束的限制更为严格，不但不允许有重复，而且也不允许有空值。 </li>
<li>在创建唯一性约束和主键约束时可以创建聚集索引和非聚集索引，但在 默认情况下主键约束产生聚集索引，而唯一性约束产生非聚集索引</li>
</ol>
<h3 id="默认值-DEFAULT"><a href="#默认值-DEFAULT" class="headerlink" title="默认值(DEFAULT)"></a>默认值(DEFAULT)</h3><p>当插入记录时，如果没有明确为字段赋值，则自动赋予默认值。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://clq2owesome.github.io/2018/02/25/数据库相关/mysql/主键约束,唯一约束与默认约束/" data-id="cjegeio8w00ctpfbloqkay26z" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-数据库相关/mysql/explain分析sql效率" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/02/25/数据库相关/mysql/explain分析sql效率/" class="article-date">
  <time datetime="2018-02-25T02:09:45.000Z" itemprop="datePublished">2018-02-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/数据库相关/">数据库相关</a>►<a class="article-category-link" href="/categories/数据库相关/mysql/">mysql</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/25/数据库相关/mysql/explain分析sql效率/">explain分析sql效率</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>Explain命令在解决数据库性能上是第一推荐使用命令，大部分的性能问题可以通过此命令来简单的解决，Explain可以用来查看SQL语句的执行效 果，可以帮助选择更好的索引和优化查询语句，写出更好的优化语句。</p>
</blockquote>
<p>Explain语法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">EXPLAIN tbl_name或：EXPLAIN [EXTENDED] SELECT select_options</div></pre></td></tr></table></figure></p>
<p>前者可以得出一个表的字段结构等等，后者主要是给出相关的一些索引信息，而今天要讲述的重点是后者。</p>
<p>例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">explain select * from express_order where express_order_num = &apos;HO2016111750201&apos;</div></pre></td></tr></table></figure></p>
<table>
<thead>
<tr>
<th>id</th>
<th>select_type</th>
<th>table</th>
<th>type</th>
<th>possible_keys</th>
<th>key</th>
<th>key_len</th>
<th>ref</th>
<th>rows</th>
<th>Extra</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>SIMPLE</td>
<td>express_order</td>
<td>const</td>
<td>idx_express_order_num</td>
<td>idx_express_order_num</td>
<td>77</td>
<td>const</td>
<td>1</td>
</tr>
</tbody>
</table>
<ol>
<li><code>id</code>：这是SELECT的查询序列号</li>
<li><code>select_type</code>：select_type就是select的类型，可以有以下几种：</li>
</ol>
<ul>
<li>SIMPLE：简单SELECT(不使用UNION或子查询等)</li>
<li>PRIMARY：最外面的SELECT</li>
<li>UNION：UNION中的第二个或后面的SELECT语句</li>
<li>DEPENDENT UNION：UNION中的第二个或后面的SELECT语句，取决于外面的查询</li>
<li>UNION RESULT：UNION的结果。</li>
<li>SUBQUERY：子查询中的第一个SELECT</li>
<li>DEPENDENT SUBQUERY：子查询中的第一个SELECT，取决于外面的查询</li>
<li>DERIVED：导出表的SELECT(FROM子句的子查询)</li>
</ul>
<ol>
<li><code>table</code>：显示这一行的数据是关于哪张表的实际的表名或表的别名</li>
<li><code>type</code>：这列最重要，显示了连接使用了哪种类别,有无使用索引，是使用Explain命令分析性能瓶颈的关键项之一。<br>结果值从好到坏依次是：  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">system &gt; const &gt; eq_ref &gt; ref &gt; fulltext &gt; ref_or_null &gt; index_merge &gt; unique_subquery &gt; index_subquery &gt; range &gt; index &gt; ALL</div></pre></td></tr></table></figure>
</li>
</ol>
<p>一般来说，得保证查询至少达到range级别，最好能达到ref，否则就可能会出现性能问题。</p>
<ul>
<li><code>all</code>: 意味着从表的第1行,往后,逐行做全表扫描.,运气不好扫描到最后一行.</li>
<li><code>index</code>: 比all性能稍好一点，<br>通俗的说: all 扫描所有的数据行,相当于data_all index 扫描所有的索引节点,相当于index_all<br>注：all是沿着磁盘扫描，index是沿着索引扫描</li>
<li><code>range</code>: 意思是查询时,能根据索引做范围的扫描,常见于　&lt;,&lt;=,&gt;,&gt;=,between,in等操作符</li>
<li><code>index_subquery</code> 在子查询中，基于除唯一索引之外的索引进行扫描;</li>
<li><code>unique_subquery</code> 在子查询中，基于唯一索引进行扫描，类似于EQ_REF;</li>
<li><code>index_merge</code> 多重范围扫描。两表连接的每个表的连接字段上均有索引存在且索引有序，结果合并在一起。适用于作集合的并、交操作。</li>
<li><code>ref_or_null</code> 类似REF，只是搜索条件包括：连接字段的值可以为NULL的情况，比如 where col = 2 or col is null</li>
<li><code>fulltext</code>全文索引</li>
<li><code>ref</code>这也是一种索引访问，它返回所有匹配某个单独值的行，然而，它可能会找到多个符合条件的行，所以他应该属于查找和扫描的混合体（也是范围区间，不过比range更加精确）。ref还经常出现在JOIN操作中</li>
<li><code>eq_ref</code> 是指通过索引列,直接引用某1行数据（精确到一行数据中）常见于连接查询中.类似于ref，区别就在使用的索引是唯一索引，对于每个索引键值，表中有一条记录匹配；简单来说，说是多表连接中使用主建或唯一健作为关联条件</li>
<li><code>const, system</code> 单表中最多有一个匹配行。主要用于比较primary key [主键索引]或者unique[唯一]索引,因为数据都是唯一的，所以性能最优。条件使用=</li>
<li><code>null</code>不用访问表或者索引，直接就能够得到结果</li>
</ul>
<ol>
<li><code>possible_keys</code>：列指出MySQL能使用哪个索引在该表中找到行</li>
<li><code>key</code>：显示MySQL实际决定使用的键（索引）。如果没有选择索引，键是NULL</li>
<li><code>key_len</code>：显示MySQL决定使用的键长度。如果键是NULL，则长度为NULL。使用的索引的长度。在不损失精确性的情况下，长度越短越好</li>
<li><code>ref</code>：显示使用哪个列或常数与key一起从表中选择行。</li>
<li><code>rows</code>：显示MySQL认为它执行查询时必须检查的行数。</li>
<li><code>Extra</code>：包含MySQL解决查询的详细信息，也是关键参考项之一。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">using index：出现这个说明mysql使用了覆盖索引，避免访问了表的数据行，效率不错！   </div><div class="line">using where：这说明服务器在存储引擎收到行后将进行过滤。有些where中的条件会有属于索引的列，当它读取使用索引的时候，就会被过滤，所以会出现有些where语句并没有在extra列中出现using where这么一个说明。 </div><div class="line">using temporary：这意味着mysql对查询结果进行排序的时候使用了一张临时表。     </div><div class="line">using filesort：这个说明mysql会对数据使用一个外部的索引排序，而不是按照表内的索引顺序进行读取。</div></pre></td></tr></table></figure>
</li>
</ol>
<p>除此以外，explain 的extended 扩展能够在原本explain的基础上额外的提供一些查询优化的信息，这些信息可以通过mysql的show warnings命令得到。</p>
<p>MySQL5.1开始支持分区功能，同时explain命令也增加了对分区的支持。可以通过explain partitions 命令查看SQL所访问的分区。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://clq2owesome.github.io/2018/02/25/数据库相关/mysql/explain分析sql效率/" data-id="cjegeio8r00cjpfblqnlrv3an" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-数据库相关/mysql/Btree索引和Hash索引的区别" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/02/25/数据库相关/mysql/Btree索引和Hash索引的区别/" class="article-date">
  <time datetime="2018-02-25T02:09:45.000Z" itemprop="datePublished">2018-02-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/数据库相关/">数据库相关</a>►<a class="article-category-link" href="/categories/数据库相关/mysql/">mysql</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/25/数据库相关/mysql/Btree索引和Hash索引的区别/">Btree索引和Hash索引的区别</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>==常用索引方法：Hash索引和B-Tree索引==</p>
<p>mysql的InnoDB默认是使用Btree索引</p>
<p>hash 索引结构的特殊性，其检索效率非常高，索引的检索可以一次定位，不像B-Tree 索引需要从根节点到枝节点，最后才能访问到页节点这样多次的IO访问，所以Hash索引的查询效率要远高于 B-Tree 索引。</p>
<p>既然Hash索引的效率要比B-Tree高很多，为什么大家不都用Hash索引而还要使用B-Tree索引呢？任何事物都是有两面性的，Hash索引也一样，虽然Hash索引效率高，但是Hash索引本身由于其特殊性也带来了很多限制和弊端，主要有以下这些。</p>
<ol>
<li>Hash 索引仅仅能满足”=”,”IN”查询，<strong>不能使用范围查询</strong></li>
</ol>
<p>由于 Hash 索引比较的是进行 Hash 运算之后的 Hash 值，所以它只能用于等值的过滤，不能用于基于范围的过滤，因为经过相应的 Hash 算法处理之后的 Hash 值的大小关系，并不能保证和Hash运算前完全一样。</p>
<ol>
<li>Hash索引<strong>不能进行数据的排序操作</strong></li>
</ol>
<p>由于 Hash 索引中存放的是经过 Hash 计算之后的 Hash 值，而且Hash值的大小关系并不一定和 Hash 运算前的键值完全一样，所以数据库无法利用索引的数据来避免任何排序运算；</p>
<ol>
<li>Hash 索引<strong>不能利用部分索引键查询</strong></li>
</ol>
<p>对于组合索引，Hash 索引在计算 Hash 值的时候是组合索引键合并后再一起计算 Hash 值，而不是单独计算 Hash 值，所以通过组合索引的前面一个或几个索引键进行查询的时候，Hash 索引也无法被利用。</p>
<ol>
<li>Hash索引在任何时候都<strong>不能避免表扫描</strong></li>
</ol>
<p>前面已经知道，Hash 索引是将索引键通过 Hash 运算之后，将 Hash运算结果的 Hash 值和所对应的行指针信息存放于一个 Hash 表中，由于不同索引键存在相同 Hash 值，所以即使取满足某个 Hash 键值的数据的记录条数，也无法从 Hash 索引中直接完成查询，还是要通过访问表中的实际数据进行相应的比较，并得到相应的结果。</p>
<ol>
<li>Hash 索引<strong>遇到大量Hash值相等的情况后性能并不一定就会比B-Tree索引高</strong></li>
</ol>
<p>对于选择性比较低的索引键，如果创建 Hash 索引，那么将会存在大量记录指针信息存于同一个 Hash 值相关联。这样要定位某一条记录时就会非常麻烦，会浪费多次表数据的访问，而造成整体性能低下。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://clq2owesome.github.io/2018/02/25/数据库相关/mysql/Btree索引和Hash索引的区别/" data-id="cjegeio8p00chpfbl2z5ym7au" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Linux/Bash Shell的操作环境" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/02/25/Linux/Bash Shell的操作环境/" class="article-date">
  <time datetime="2018-02-25T02:09:45.000Z" itemprop="datePublished">2018-02-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/25/Linux/Bash Shell的操作环境/">Bash Shell的操作环境</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="路径与命令查找顺序"><a href="#路径与命令查找顺序" class="headerlink" title="路径与命令查找顺序"></a>路径与命令查找顺序</h3><p>基本上，命令运行的顺序可以这样看：</p>
<ol>
<li>以相对/绝对路径执行命令，例如：<code>/bin/ls</code> 或 <code>./ls</code></li>
<li>由alias找到该命令执行</li>
<li>由bash内置的命令来执行</li>
<li>通过$PATH这个变量的顺序找到的第一个命令来执行</li>
</ol>
<h3 id="bash的登录与欢迎信息：-etc-issue，-etc-motd"><a href="#bash的登录与欢迎信息：-etc-issue，-etc-motd" class="headerlink" title="bash的登录与欢迎信息：/etc/issue，/etc/motd"></a>bash的登录与欢迎信息：/etc/issue，/etc/motd</h3><h4 id="登录界面"><a href="#登录界面" class="headerlink" title="登录界面"></a>登录界面</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cat /etc/issue</div><div class="line">Ubuntu 16.04.3 LTS \n \l</div></pre></td></tr></table></figure>
<p>issue这个文件的内容可以使用反斜杠作为变量调用</p>
<table>
<thead>
<tr>
<th>代码</th>
<th>issue内的各代码意义</th>
</tr>
</thead>
<tbody>
<tr>
<td>\d</td>
<td>本地端的日期</td>
</tr>
<tr>
<td>\l</td>
<td>显示第几个终端机接口</td>
</tr>
<tr>
<td>\m</td>
<td>显示硬件的等级（i386/i486/i586/i686）</td>
</tr>
<tr>
<td>\n</td>
<td>显示主机的网络名称</td>
</tr>
<tr>
<td>\o</td>
<td>显示domain name</td>
</tr>
<tr>
<td>\r</td>
<td>操作系统的版本（相当于 uname -r）</td>
</tr>
<tr>
<td>\t</td>
<td>显示本地端时间的时间</td>
</tr>
<tr>
<td>\s</td>
<td>操作系统的名称</td>
</tr>
<tr>
<td>\v</td>
<td>操作系统的版本</td>
</tr>
</tbody>
</table>
<h4 id="欢迎内容"><a href="#欢迎内容" class="headerlink" title="欢迎内容"></a>欢迎内容</h4><p>如果你想要让用户登录后取得一些信息，例如你想要让大家都知道的信息，那么可以将信息加入/etc/motd里面去</p>
<h3 id="bash的环境配置文件"><a href="#bash的环境配置文件" class="headerlink" title="bash的环境配置文件"></a>bash的环境配置文件</h3><h4 id="login-shell"><a href="#login-shell" class="headerlink" title="login shell"></a>login shell</h4><p>取得bash时需要完整的登录流程的，就称为login shell</p>
<p>login shell其实只会读取这两个配置文件：</p>
<ul>
<li><code>/etc/profile</code>：这是系统整体的设置，你最好不要修改这个文件</li>
<li><code>~/.bash_profile</code> 或 <code>~/.bash_login</code> 或 <code>~/.profile</code>：属于用户个人设置，你要改自己的数据，就写入这里</li>
</ul>
<p>bash的login shell情况下所读取的整体环境配置文件其实只有/etc/profile，但是/etc/profile还会调用其他的配置文件（/etc/inputrc，/etc/profile.d/*.sh，/etc/sysconfig/i18n）</p>
<p>在login shell的bash环境中，所读取的个人偏好配置文件其实主要有三个，并且只会依序读取其中一个，三个文件的顺序为：</p>
<ol>
<li>~/.bash_profile</li>
<li>~/.bash_login</li>
<li>~/.profile</li>
</ol>
<p>bash配置文件的读入方式比较有趣，主要通过一个命令“source”来读取的。也就是说~/.bash_profile其实会再调用~/.bashrc的设置内容，整个login shell的读取流程如下：<br><img src="https://raw.githubusercontent.com/clq2owesome/image/master/bash.png" alt="image"></p>
<h4 id="non-login-shell"><a href="#non-login-shell" class="headerlink" title="non-login shell"></a>non-login shell</h4><p>当你取得non-login shell时，该bash配置文件仅会读取~/.bashrc</p>
<h4 id="读取环境配置文件的命令：source"><a href="#读取环境配置文件的命令：source" class="headerlink" title="读取环境配置文件的命令：source"></a>读取环境配置文件的命令：source</h4><p>由于/etc/profile 与 ~/.bash_profile都是取得login shell的时候才会读取的配置文件，所以如果你将自己的偏好设置写入上述的文件后，通常都是得注销再登录后该设置才会生效。那么能不能直接读取配置文件而不注销登录呢？可以的！那就是得要利用source这个命令了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">source 配置文件</div><div class="line">例：</div><div class="line">将主文件夹的~/.bashrc的设置读入目前的bash环境中</div><div class="line">source ~/.bashrc</div><div class="line">. ~/.bashrc</div></pre></td></tr></table></figure></p>
<p>利用source或者小数点（.）都可以将配置文件的内容读进目前的shell环境中</p>
<h3 id="bash默认组合键"><a href="#bash默认组合键" class="headerlink" title="bash默认组合键"></a>bash默认组合键</h3><table>
<thead>
<tr>
<th>组合按键</th>
<th>执行结果</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ctrl+C</td>
<td>终止目前的命令</td>
</tr>
<tr>
<td>Ctrl+D</td>
<td>输入结束（EOF）</td>
</tr>
<tr>
<td>Ctrl+M</td>
<td>就是Enter</td>
</tr>
<tr>
<td>Ctrl+S</td>
<td>暂停屏幕的输出</td>
</tr>
<tr>
<td>Ctrl+Q</td>
<td>恢复屏幕的输出</td>
</tr>
<tr>
<td>Ctrl+U</td>
<td>在提示符下，将整行命令删除</td>
</tr>
<tr>
<td>Ctrl+Z</td>
<td>暂停目前的命令</td>
</tr>
</tbody>
</table>
<h3 id="通配符"><a href="#通配符" class="headerlink" title="通配符"></a>通配符</h3><table>
<thead>
<tr>
<th>符号</th>
<th>意义</th>
</tr>
</thead>
<tbody>
<tr>
<td>*</td>
<td>代表0个到无穷多个任意字符</td>
</tr>
<tr>
<td>?</td>
<td>代表一定有一个任意字符</td>
</tr>
<tr>
<td>[]</td>
<td>同样代表一定有一个在中括号内的字符（非任意字符）。例如[abcd]代表一定有一个字符，可能是a，b，c，d这个四个任何一个</td>
</tr>
<tr>
<td>[-]</td>
<td>若有减号在中括号内时，代表在编码顺序内的所有字符。例如[0-9]代表0到9之间的所有数字，因为数字的语系编码是连续的</td>
</tr>
<tr>
<td>[^]</td>
<td>若中括号内的第一个字符为指数符号（^）,那表示原向选择。例如[^abc]代表一个有一个字符，只要是非a，b，c的其他字符就可以</td>
</tr>
</tbody>
</table>
<h3 id="特殊符号"><a href="#特殊符号" class="headerlink" title="特殊符号"></a>特殊符号</h3><table>
<thead>
<tr>
<th>符号</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>#</td>
<td>批注符号，这个最常被使用在script中，视为说明，其后的数据均不执行</td>
</tr>
<tr>
<td>\</td>
<td>转义符号，将“特殊符号或通配符”还原成一般字符</td>
</tr>
<tr>
<td>\</td>
<td></td>
<td>管道（pipe），分隔两个管道命令的界定</td>
</tr>
<tr>
<td>;</td>
<td>连续命令执行分隔符，连续性命令的界定</td>
</tr>
<tr>
<td>~</td>
<td>用户的主文件夹</td>
</tr>
<tr>
<td>$</td>
<td>使用变量前导符，即是变量之前需要加的变量替代值</td>
</tr>
<tr>
<td>&amp;</td>
<td>作业控制（job control），将命令变成背景工作</td>
</tr>
<tr>
<td>!</td>
<td>逻辑运算意义上的“非”</td>
</tr>
<tr>
<td>/</td>
<td>目录符号，路径分隔的符号</td>
</tr>
<tr>
<td>&gt;,&gt;&gt;</td>
<td>数据流重定向，输出导向，分别是“替换”与“累加”</td>
</tr>
<tr>
<td>&lt;,&lt;&lt;</td>
<td>数据流重定向，输入导向</td>
</tr>
<tr>
<td>‘’</td>
<td>单引号，不具有变量置换的功能</td>
</tr>
<tr>
<td>“”</td>
<td>具有变量置换的功能</td>
</tr>
</tbody>
</table>
<p><code>` | 两个“</code>”为可以先执行的命令，也可以使用$()<br>() | 在中间为子shell的起始与结束<br>{} | 在中间为命令块的组合</p>
<h3 id="数据流重定向"><a href="#数据流重定向" class="headerlink" title="数据流重定向"></a>数据流重定向</h3><p>数据流重定向就是将某个命令执行后应该要出现在屏幕上的数据传输到其他地方</p>
<h4 id="standard-output-与-standard-error-output"><a href="#standard-output-与-standard-error-output" class="headerlink" title="standard output 与 standard error output"></a>standard output 与 standard error output</h4><p>标准输出指的是命令执行所回传的正确的信息，而标准错误输出可理解为命令执行失败后，所回传的错误信息</p>
<ul>
<li>标准输入（stdin）：代码为0，使用&lt;或&lt;&lt;</li>
<li>标准输出（stdout）：代码为1，使用&gt;或&gt;&gt;</li>
<li>标准错误输出（stderr）：代码为2，使用2&gt;或2&gt;&gt;</li>
</ul>
<p>如果仅存在&gt;时，则代表默认的代码1，也就是说：</p>
<ul>
<li><code>1&gt;</code>：以<strong>覆盖</strong>的方法将正确的数据输出到指定的文件或者设备上</li>
<li><code>1&gt;&gt;</code>：以<strong>累加</strong>的方法将正确的数据输出到指定的文件或者设备上</li>
<li><code>2&gt;</code>：以<strong>覆盖</strong>的方法将错误的数据输出到指定的文件或者设备上</li>
<li><code>2&gt;&gt;</code>：以<strong>累加</strong>的方法将错误的数据输出到指定的文件或者设备上</li>
</ul>
<h5 id="dev-null-垃圾桶黑洞设备"><a href="#dev-null-垃圾桶黑洞设备" class="headerlink" title="/dev/null 垃圾桶黑洞设备"></a>/dev/null 垃圾桶黑洞设备</h5><p>如果要将错误信息忽略掉而不显示或存储，可以使用<code>2&gt; /dev/null</code>,这个/dev/null可以吃掉任何导向这个设备的信息</p>
<h5 id="将正确数据与错误数据写入同一文件"><a href="#将正确数据与错误数据写入同一文件" class="headerlink" title="将正确数据与错误数据写入同一文件"></a>将正确数据与错误数据写入同一文件</h5><p>可以使用命令<code>2&gt;&amp;1</code> 或者 <code>&amp;&gt;</code>，如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">find /home -name .bashrc &gt; list 2&gt;&amp;1</div><div class="line">find /home -name .bashrc &amp;&gt; list</div></pre></td></tr></table></figure></p>
<h3 id="命令执行的判断依据：-amp-amp"><a href="#命令执行的判断依据：-amp-amp" class="headerlink" title="命令执行的判断依据：(;, &amp;&amp;, ||)"></a>命令执行的判断依据：(<code>;</code>, <code>&amp;&amp;</code>, <code>||</code>)</h3><h4 id="cmd-cmd（在考虑命令相关性的连续命令执行）"><a href="#cmd-cmd（在考虑命令相关性的连续命令执行）" class="headerlink" title="cmd;cmd（在考虑命令相关性的连续命令执行）"></a>cmd;cmd（在考虑命令相关性的连续命令执行）</h4><p>在命令与命令中间利用分号（;）来隔开，分号前的命令执行完后就会立即接着执行后面的命令，例如<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sync; sync; shutdown -h now</div></pre></td></tr></table></figure></p>
<h4 id="（命令回传码）与-amp-amp-或"><a href="#（命令回传码）与-amp-amp-或" class="headerlink" title="$?（命令回传码）与&amp;&amp;或||"></a>$?（命令回传码）与&amp;&amp;或||</h4><p>一般地，若前一个命令执行的结果为正确，在Linux下面会回传一个$?=0的值</p>
<p>如果要通过这个回传码来判断后续的命令是否要执行，需要借助“&amp;&amp;”或“||”</p>
<table>
<thead>
<tr>
<th>命令的执行情况</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>cmd1 &amp;&amp; cmd2</td>
<td>若cmd1执行完毕且正确执行（$?=0），则开始执行cmd2<br>若cmd1执行完毕且错误（$?≠0），则cmd2不执行</td>
</tr>
<tr>
<td>cmd1 \</td>
<td>\</td>
<td>cmd2</td>
<td>若cmd1执行完毕且正确执行（$?=0），则cmd2不执行<br>若cmd1执行完毕且错误（$?≠0），则开始执行cmd2</td>
</tr>
</tbody>
</table>
<p>例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">判断一个目录是否存在，不存在则创建</div><div class="line">ls /tmp/abc || mkdir /tmp/abc</div><div class="line"></div><div class="line">要在目录创建文件，但不知道该目录是否存在</div><div class="line">ls /tmp/abc || mkdir /tmp/abc &amp;&amp; touch /tmp/abc/hehe</div></pre></td></tr></table></figure></p>
<p>一般来说，假设判断式有三个，也就是：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">command1 &amp;&amp; command2 || command3</div></pre></td></tr></table></figure></p>
<p>而且顺序通常不会变，因为一般来说，command2与command3会放置肯定可以执行成功的命令</p>
<h3 id="管道命令（pipe）"><a href="#管道命令（pipe）" class="headerlink" title="管道命令（pipe）"></a>管道命令（pipe）</h3><p>管道命令“|”仅能处理由前面一个命令传来的正确信息，也就是standard output的信息，对于standard error ouput并没有直接处理的能力</p>
<p>在每个管道后面接的第一个数据必定是“命令”，而且这个命令必须要能够接收standard output的数据才行，这样的命令才可以是“管道命令”，例如：less，more head，tail等</p>
<h4 id="选取命令：cut，grep"><a href="#选取命令：cut，grep" class="headerlink" title="选取命令：cut，grep"></a>选取命令：cut，grep</h4><h5 id="cut"><a href="#cut" class="headerlink" title="cut"></a>cut</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">cut -d &apos;分隔字符&apos; -f fields</div><div class="line">cut -c 字符范围</div><div class="line">参数：</div><div class="line">-d：后面接分隔字符，与-f一起使用</div><div class="line">-f：依据-d的分隔字符将一段信息切割成为数段，用-f取出第几段的意思</div><div class="line">-c：以字符的单位取出固定字符区间</div></pre></td></tr></table></figure>
<h5 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">grep [-acinv] [--color=auto] &apos;查找字符串&apos; filename</div><div class="line">参数：</div><div class="line">-a：将binary文件以text文件的方式查找数据</div><div class="line">-c：计算找到&apos;查找字符串&apos;的次数</div><div class="line">-i：忽略大小写</div><div class="line">-n：顺便输出行号</div><div class="line">-v：反向选择，即显示出没有&apos;查找字符串&apos;内容的那一行</div><div class="line">--color=auto：可以将找到的关键字部分加上颜色显示</div><div class="line"></div><div class="line">例子：将last当中有出现root那一行就取出来</div><div class="line">last | grep &apos;root&apos;</div><div class="line">----------------------------</div><div class="line">root     pts/0        210.21.9.252     Tue Dec 12 14:45   still logged in</div><div class="line">root     pts/0        210.21.9.252     Tue Dec 12 09:45 - 13:49  (04:03)</div><div class="line">root     pts/0        210.21.9.252     Mon Dec 11 15:05 - 19:19  (04:13)</div><div class="line"></div><div class="line">例子：将last当中没有出现root那一行就取出来</div><div class="line">last | grep -v &apos;root&apos;</div><div class="line">-----------------------------</div><div class="line">reboot   system boot  4.4.0-101-generi Fri Dec  8 20:22   still running</div><div class="line"></div><div class="line">wtmp begins Fri Dec  1 09:57:09 2017</div><div class="line"></div><div class="line">例子：在last的输出信息中，只要有root就取出，并且仅取第一列</div><div class="line">last | grep &apos;root&apos; | cut -d &apos; &apos; -f 1</div><div class="line">------------------------------</div><div class="line">root</div><div class="line">root</div><div class="line">root</div></pre></td></tr></table></figure>
<h3 id="排序命令：sort，wc，uniq"><a href="#排序命令：sort，wc，uniq" class="headerlink" title="排序命令：sort，wc，uniq"></a>排序命令：sort，wc，uniq</h3><h4 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">sort [-fbMnrtuk] [file or stdin]</div><div class="line">参数：</div><div class="line">-f：忽略大小写</div><div class="line">-b：忽略最前面的空格部分</div><div class="line">-M：以月份的名字来排序，例如JAN，DEC等的排序方法</div><div class="line">-n：使用“纯数字”进行排序（默认是以文字类型来排序的）</div><div class="line">-r：反向排序</div><div class="line">-u：就是uniq，相同的数据中，仅出现一行代表</div><div class="line">-t：分隔符，默认是用[tab]键来分隔</div><div class="line">-k：以那个区间（field）来进行排序的意思</div></pre></td></tr></table></figure>
<h4 id="uniq"><a href="#uniq" class="headerlink" title="uniq"></a>uniq</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">uniq [-ic]</div><div class="line">参数：</div><div class="line">-i：忽略大小写</div><div class="line">-c：进行计算</div></pre></td></tr></table></figure>
<h4 id="wc"><a href="#wc" class="headerlink" title="wc"></a>wc</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">wc [-lwm]</div><div class="line">参数：</div><div class="line">-l：仅列出行</div><div class="line">-w：仅列出多少字</div><div class="line">-m：多少字符</div><div class="line"></div><div class="line">例：取得这个月登录系统的总人次</div><div class="line">last | grep [a-zA-Z] | grep -v &apos;wtmp&apos; | wc -l</div><div class="line">#由于last会输出空白行和wtmp字样在最下面两行，所以利用grep取出非空白行以及wtmp那一行，再计算行数</div></pre></td></tr></table></figure>
<h3 id="双向重定向：tee"><a href="#双向重定向：tee" class="headerlink" title="双向重定向：tee"></a>双向重定向：tee</h3><p>tee会同时将数据流保存到文件并且输出到屏幕。而输出到屏幕的，其实就是stdout，可以让下个命令继续处理<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">tee [-a] file</div><div class="line">参数：</div><div class="line">-a：以累加的方式，将数据加入file中</div><div class="line"></div><div class="line">例子：将last的输出存一份到last.list文件中,同时屏幕也有输出</div><div class="line">last | tee last.list | more</div></pre></td></tr></table></figure></p>
<h3 id="字符转换命令：tr，col，join，paste，expand"><a href="#字符转换命令：tr，col，join，paste，expand" class="headerlink" title="字符转换命令：tr，col，join，paste，expand"></a>字符转换命令：tr，col，join，paste，expand</h3><h4 id="tr可以用来删除一段信息当中的文字，或者是进行文字信息的替换"><a href="#tr可以用来删除一段信息当中的文字，或者是进行文字信息的替换" class="headerlink" title="tr可以用来删除一段信息当中的文字，或者是进行文字信息的替换"></a>tr可以用来删除一段信息当中的文字，或者是进行文字信息的替换</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">tr [-ds] SET1 ...</div><div class="line">参数：</div><div class="line">-d：删除信息当中的SET1这个字符串</div><div class="line">-s：替换掉重复的字符</div><div class="line"></div><div class="line">例子：将/etc/passwd输出的信息中的冒号（:）删除</div><div class="line">cat /etc/passwd | tr -d &apos;:&apos;</div></pre></td></tr></table></figure>
<h4 id="col"><a href="#col" class="headerlink" title="col"></a>col</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">col -[xb]</div><div class="line">参数：</div><div class="line">-x：将tab键转换成对等的空格键</div><div class="line">-b：在文字内有反斜杠（/）时，仅保留反斜杠最后接的那个字符</div></pre></td></tr></table></figure>
<p>col经常被利用于将man page 转存为纯文本文件以方便查阅的功能</p>
<h4 id="join"><a href="#join" class="headerlink" title="join"></a>join</h4><p>主要用于处理两个文件之间的数据，而且，主要是将两个文件中有相同数据的那一行加在一起<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">join [-ti12] file1 file2</div><div class="line">参数：</div><div class="line">-t：join默认以空格符分隔数据，并且对比“第一个字段”的数据；如果两个文件相同，则将两条数据连成一行，且第一个字段放在第一个</div><div class="line">-i：忽略大小写</div><div class="line">-1:这个是数字1，代表第一个文件要用哪个字段来分析</div><div class="line">-2:代表第二个文件要用哪个字段来分析</div></pre></td></tr></table></figure></p>
<h4 id="paste"><a href="#paste" class="headerlink" title="paste"></a>paste</h4><p>相对于join必须要对比两个文件的数据相关性，paste就直接将两行贴在一起，且中间以[tab]键隔开而已<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">paster [-d] file1 file2</div><div class="line">参数：</div><div class="line">-d：后面可以接分隔符，默认是以[tab]来分隔的</div><div class="line">- ：如果file部分写成 - ，表示来自standard output的数据</div></pre></td></tr></table></figure></p>
<h4 id="expand"><a href="#expand" class="headerlink" title="expand"></a>expand</h4><p>将[tab]按键转成空格键<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">expand [-t] file</div><div class="line">参数：</div><div class="line">-t：后面可以接数字，一般来说，一个[tab]键可以用8个空格键替换，我们也可以自行定义一个[tab]按键代表多少个字符</div></pre></td></tr></table></figure></p>
<h3 id="切割命令：split"><a href="#切割命令：split" class="headerlink" title="切割命令：split"></a>切割命令：split</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">split [-bl] file PREFIX</div><div class="line">参数：</div><div class="line">-b：后面可接欲切割成的文件大小，可加单位，例如b，k，m等</div><div class="line">-l：以行数来切割</div><div class="line">PREFIX：代表前导符，可以作为切割文件的前导文字</div></pre></td></tr></table></figure>
<h3 id="参数代换：xargs"><a href="#参数代换：xargs" class="headerlink" title="参数代换：xargs"></a>参数代换：xargs</h3><p>xargs就是产生某个命令的参数的意思。xargs可以读入stdin的数据，并且以空格符或断行字符进行分辨，将stdin的数据分隔成为arguments<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">xargs [-0epn] command</div><div class="line">参数：</div><div class="line">-0: 如果输入的stdin含有特殊字符，例如`，\，空格键等字符时，这个参数可以将它还原成一般字符。这个参数可以用于特殊状态</div><div class="line">-e：这个是EOF（end of file）的意思，后面可以接一个字符串，当xgras分析到这个字符串时，就会停止继续工作</div><div class="line">-p：在执行每个命令的参数时，都会询问用户的意思</div><div class="line">-n：后面接次数，每次command执行时，要使用几个参数的意思</div></pre></td></tr></table></figure></p>
<h3 id="关于减号的用途"><a href="#关于减号的用途" class="headerlink" title="关于减号的用途"></a>关于减号的用途</h3><p>管道命令在bash的连续的处理程序中是相当重要的，在log file 的分析当中也是相当重要的一环。另外在管道命令中，经常会使用到前一个命令的stdout作为这次的stdin，某些命令需要用到文件名来进行处理时，该stdin与stdout可以利用减号“-”来替代，例如<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -cvf - /home | tar -xvf -</div></pre></td></tr></table></figure></p>
<p>上面的例子是说我将/home里面的文件打包，但打包的数据不是记录到文件，而是传送到sdtout；经过管道后，将<code>tar -cvf - /home</code>传送给后面的<code>tar -xvf -</code>。后面的这个-则是取用前一个命令的stdout，因此我们就不需要使用文件了</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://clq2owesome.github.io/2018/02/25/Linux/Bash Shell的操作环境/" data-id="cjegeio0r0005pfblq097frmt" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Spring/Spring Cloud/简介" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/02/25/Spring/Spring Cloud/简介/" class="article-date">
  <time datetime="2018-02-25T02:09:45.000Z" itemprop="datePublished">2018-02-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Spring/">Spring</a>►<a class="article-category-link" href="/categories/Spring/Spring-Session/">Spring Session</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/25/Spring/Spring Cloud/简介/">简介</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Spring Cloud 是一个基于Spring Boot实现的微服务架构开发工具。它为微服务架构中涉及的<strong>配置管理</strong>，<strong>服务治理</strong>，<strong>断路器</strong>，<strong>智能路由</strong>，<strong>微代理</strong>，<strong>控制总线</strong>，<strong>全局锁</strong>，<strong>决策竞选</strong>，<strong>分布式会话</strong>和<strong>集群状态管理</strong>等操作提供了一种简单的开发方式。</p>
<p>Spring Cloud包含了多个子项目：</p>
<ul>
<li><strong>Spring Cloud Config</strong>：配置管理工具，支持使用Git存储配置内容，可以使用它实现应用配置的外部化存储，并支持客户端配置信息刷新，加密/解密配置内容等</li>
<li><strong>Spring Cloud Netflix</strong>：核心组件，对多个NetFlix OSS开源套件进行整合<ul>
<li><strong>Eureka</strong>：服务治理组件，包含服务注册中心，服务注册与发现机制的实现</li>
<li><strong>Hystrix</strong>：容错管理组件，实现断路器模式，帮助服务依赖中出现的延迟和为故障提供强大的容错能力</li>
<li><strong>Ribbon</strong>：客户端负载均衡的服务调用组件</li>
<li><strong>Feign</strong>：基于Ribbon和Hystrix的声明式服务调用组件</li>
<li><strong>Zuul</strong>：网关组件，提供智能路由，访问过滤等功能</li>
<li><strong>Archaius</strong>：外部化配置组件</li>
</ul>
</li>
<li><strong>Spring Cloud Bus</strong>：事件，消息总线，用于传播集群中的状态变化和事件，以触发后续的处理，比如用来动态刷新配置等</li>
<li><strong>Spring Cloud Cluster</strong>：针对ZooKeeper，Redis，Hazelcast，Consul的选举算法和通用状态模式的实现</li>
<li><strong>Spring Cloud Cloudfoundry</strong>：与Pivotal Cloudfounddry的整合支持</li>
<li><strong>Spring Cloud Consul</strong>：服务发现与配置管理工具</li>
<li><strong>Spring Cloud Stream</strong>：通过Redis，Rabbit或者Kafka实现的消费微服务，可以通过简单的声明式模型来发送和接收消息</li>
<li><strong>Spring Cloud AWS</strong>：用于简化整合Amazon Web Service组件</li>
<li><strong>Spring Cloud Security</strong>：安全工具包，提供在Zuul代理中对OAuth2客户端请求的中继器</li>
<li><strong>Spring Cloud Sleuth</strong>：Spring Cloud应用的分布式跟踪实现，可以完美整合Zipkin</li>
<li><strong>Spring Cloud ZooKeeper</strong>：基于ZooKeeper的服务发现与配置管理组件</li>
<li><strong>Spring Cloud Starters</strong>：Spring Cloud的基础组件，它是基于Spring Boot风格项目的基础依赖模块</li>
<li><strong>Spring Cloud CLI</strong>：用于在Groovy中快速创建Spring Cloud应用的Spring Boot CLI插件</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://clq2owesome.github.io/2018/02/25/Spring/Spring Cloud/简介/" data-id="cjegeio7n00abpfbl0wk05wjf" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Linux/Linux账号管理与ACL权限设置" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/02/25/Linux/Linux账号管理与ACL权限设置/" class="article-date">
  <time datetime="2018-02-25T02:09:45.000Z" itemprop="datePublished">2018-02-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/25/Linux/Linux账号管理与ACL权限设置/">Linux账号管理与ACL权限设置</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="用户账号"><a href="#用户账号" class="headerlink" title="用户账号"></a>用户账号</h3><p>跟用户有关有两个非常重要的文件，一个是管理用户UID/GID重要参数的<code>/etc/passwd</code>，一个则是专门管理密码相关数据的<code>/etc/shadow</code></p>
<h4 id="etc-passwd文件结构"><a href="#etc-passwd文件结构" class="headerlink" title="/etc/passwd文件结构"></a>/etc/passwd文件结构</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">cat /etc/passwd</div><div class="line">root:x:0:0:root:/root:/bin/bash</div><div class="line">daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin</div><div class="line">bin:x:2:2:bin:/bin:/usr/sbin/nologin</div><div class="line">sys:x:3:3:sys:/dev:/usr/sbin/nologin</div><div class="line">sync:x:4:65534:sync:/bin:/bin/sync</div><div class="line">games:x:5:60:games:/usr/games:/usr/sbin/nologin</div><div class="line">man:x:6:12:man:/var/cache/man:/usr/sbin/nologin</div><div class="line">lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin</div><div class="line">mail:x:8:8:mail:/var/mail:/usr/sbin/nologin</div><div class="line">news:x:9:9:news:/var/spool/news:/usr/sbin/nologin</div><div class="line">uucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin</div><div class="line">proxy:x:13:13:proxy:/bin:/usr/sbin/nologin</div><div class="line">www-data:x:33:33:www-data:/var/www:/usr/sbin/nologin</div><div class="line">backup:x:34:34:backup:/var/backups:/usr/sbin/nologin</div><div class="line">......</div></pre></td></tr></table></figure>
<p>每一行都代表一个账号，有几行就代表有几个账号在你的系统中！不过需要特别留意的是，里面很多账号本来就是系统正常运行所必须要的，我们可以简称它为系统账号，例如bin，daemon，adm，nobody等，这些账号请不要随意删除</p>
<p>每一行使用“:”分隔开，共有七个字段，分别是：</p>
<ol>
<li>账号名称<br>就是账号，对应UID</li>
<li>密码<br>这个字段的密码数据放到<code>/etc/shadow</code>中，所以这里会显示一个x</li>
<li>UID<br>用户标识符</li>
</ol>
<table>
<thead>
<tr>
<th>ID范围</th>
<th>该ID用户特性</th>
</tr>
</thead>
<tbody>
<tr>
<td>0（系统管理员）</td>
<td>当UID是0时，代表这个账号是“系统管理员”，所以当你要让其他的账号名称也具有root的权限时，该账号的UID改为0即可。这也就是说，一个系统上面的系统管理员不见得只有root，不过，很不建议有多个账号的UID是0</td>
</tr>
<tr>
<td>1～499（系统账号）</td>
<td>保留给系统使用的ID，其实除了0之外，其他的UID权限与特性并没有不一样。默认500以下的数字让给系统作为保留账号只是一个习惯。<br>由于系统上面启动的服务希望使用较小的权限去运行，因此不希望用root的身份去执行这些服务，所以我们就得要提供这些运行中程序的所有者账号才行。这些系统账号通常是不可登录的。<br>根据系统账号的由来，通常系统账号又被分为两种：<br>1～99:由distributions自行创建的系统账号<br>100～499:若用户有系统账号的需求时，可以使用的账号UID</td>
</tr>
<tr>
<td>500～65535（可登录账号）</td>
<td>给一般用户用的。事实上，目前的Linux内核（2.6.x版）已经可以支持到2^32-1这么大的UID号码</td>
</tr>
</tbody>
</table>
<ol>
<li>GID<br>组ID</li>
<li>用户信息说明列<br>这个字段基本上并没有什么重要用途，只是用来解释这个账号的意义而已</li>
<li>主文件夹<br>这是用户的主文件夹。以上面为例，root的主文件夹是在<code>/root</code>中，所以当root登录之后，就会立刻跑到<code>/root</code>目录里面。<strong>默认的用户主文件夹在<code>/home/yourIDname</code>中</strong></li>
<li>shell<br>当用户登录系统后就会取得一个shell来与系统的内核通信以进行用户的操作任务。那为何默认shell会使用bash呢？就是在这个字段指定的。这里比较需要注意的是，有一个shell可以用来替代成让账号无法取得shell环境的登录操作，那就是<code>/sbin/nologin</code></li>
</ol>
<h4 id="etc-shadow文件结构"><a href="#etc-shadow文件结构" class="headerlink" title="/etc/shadow文件结构"></a>/etc/shadow文件结构</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">root@iZwz9hwmk5t4idn4oxa4okZ:/usr/share# cat /etc/shadow</div><div class="line">root:$6$rrwxtIVE$BIRVo2hygttfTZvNINNT3TL5Qbp.QaUC7px/jkC/nEp4gtluaVIUs56DzYxkZiE4lQefSw8OmX9Nn5lCQa2Sc.:17204:0:99999:7:::</div><div class="line">daemon:*:17001:0:99999:7:::</div><div class="line">bin:*:17001:0:99999:7:::</div><div class="line">sys:*:17001:0:99999:7:::</div><div class="line">sync:*:17001:0:99999:7:::</div><div class="line">games:*:17001:0:99999:7:::</div><div class="line">man:*:17001:0:99999:7:::</div><div class="line">lp:*:17001:0:99999:7:::</div><div class="line">mail:*:17001:0:99999:7:::</div><div class="line">news:*:17001:0:99999:7:::</div><div class="line">uucp:*:17001:0:99999:7:::</div><div class="line">proxy:*:17001:0:99999:7:::</div><div class="line">www-data:*:17001:0:99999:7:::</div><div class="line">backup:*:17001:0:99999:7:::</div></pre></td></tr></table></figure>
<p>shadow同样是以“:”分隔，有9个字段，分别是：</p>
<ol>
<li>账号名称<br>由于密码也需要与账号对应</li>
<li>密码     </li>
<li>最近更改密码的日期</li>
<li>密码不可被更改的天数（与第3个字段相比）</li>
<li>密码需要重新更改的天数（与第3个字段相比）</li>
<li>密码需要更改期限前的警告天数（与第5个字段相比）</li>
<li>密码过期后的账号宽限时间(密码失效日)（与第5个字段相比）</li>
<li>账号失效日期</li>
<li>保留</li>
</ol>
<h3 id="有效与初始用户组：groups，newgrp"><a href="#有效与初始用户组：groups，newgrp" class="headerlink" title="有效与初始用户组：groups，newgrp"></a>有效与初始用户组：groups，newgrp</h3><h6 id="etc-group文件结构"><a href="#etc-group文件结构" class="headerlink" title="/etc/group文件结构"></a>/etc/group文件结构</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"># cat /etc/group</div><div class="line">root:x:0:</div><div class="line">daemon:x:1:</div><div class="line">bin:x:2:</div><div class="line">sys:x:3:</div><div class="line">adm:x:4:syslog</div><div class="line">tty:x:5:</div><div class="line">ssh:x:113:</div><div class="line">ntp:x:114:</div><div class="line">lpadmin:x:115:</div><div class="line">stapdev:x:116:</div><div class="line">stapusr:x:117:</div><div class="line">stapsys:x:118:</div><div class="line">mysql:x:119:</div><div class="line">redis:x:120:</div><div class="line">activemq:x:121:</div><div class="line">tomcat7:x:122:tomcat7</div><div class="line">tomcat:x:1000:</div><div class="line">jenkins:x:123:</div><div class="line">git:x:1001:</div></pre></td></tr></table></figure>
<ol>
<li>用户组名称</li>
<li>用户组密码</li>
<li>GID</li>
<li>此用户组支持的账号名称</li>
</ol>
<h5 id="groups：有效与支持用户组的查看"><a href="#groups：有效与支持用户组的查看" class="headerlink" title="groups：有效与支持用户组的查看"></a>groups：有效与支持用户组的查看</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># groups</div><div class="line">root</div></pre></td></tr></table></figure>
<p>第一个输出的用户组即为有效用户组，通常有效用户组的作用是新建文件</p>
<h5 id="newgrp：有效用户组的切换"><a href="#newgrp：有效用户组的切换" class="headerlink" title="newgrp：有效用户组的切换"></a>newgrp：有效用户组的切换</h5><p>使用newgrp是有限制的，那就是你想要切换的用户组必须是你已经有支持的用户组<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">newgrp 用户组名称</div></pre></td></tr></table></figure></p>
<p>这个命令可以改变目前用户的有效用户组，而且是以另外一个新的shell来提供这个功能的，输入exit可以回到原本的shell<br>​<br>虽然用户的环境设置（如环境变量等其他数据）不会有影响，但是用户的“用户组权限”将会重新被计算</p>
<h3 id="账号管理"><a href="#账号管理" class="headerlink" title="账号管理"></a>账号管理</h3><h4 id="新增用户"><a href="#新增用户" class="headerlink" title="新增用户"></a>新增用户</h4><p>使用useradd来新建用户，密码的给予则使用passwd这个命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">useradd [-u UID] [-g 初始用户组] [-G 次要用户组] [-mM] </div><div class="line">[-c 说明栏] [-d 主文件夹绝对路径] [-s shell] 用户账户名</div><div class="line">-u：后面接的是UID，是一组数字，直接指定一个特定的UID给这个账号</div><div class="line">-g：后面接的那个用户组名就是初始用户组，该永辉组的GID会被放置到/etc/passwd的第四个字段内</div><div class="line">-G：后面接的组名则是这个账号还可以加入的用户组，这个参数会修改/etc/group内的相关数据</div><div class="line">-M：强制！不要创建用户主文件夹（系统账号默认值）</div><div class="line">-m：强制！要创建用户主文件夹（一般账号默认值）</div><div class="line">-c：这个就是/etc/passwd的第五列的说明内容，</div><div class="line">-d：指定某个目录成为主文件夹，而不要使用默认值，务必使用绝对路径</div><div class="line">-r：创建一个系统的账号，这个账号的UID会有限制</div><div class="line">-s：后面接一个shell，若没有指定则默认是/bin/bash</div><div class="line">-e：后面接一个日期，格式为“YYYY-MM-DD”，此选项可以写入shadow的第八字段，即账号失效日的设置选项</div><div class="line">-f：后面接shadow的第七字段选项，指定密码是否会失效，0为立刻失效，-1为永远不失效（密码只会过期而强制于登录时重新设置而已）</div><div class="line"></div><div class="line"></div><div class="line">例如：完全参考默认值新建一个用户，名称为test</div><div class="line"># useradd test</div><div class="line"># ll -d /home/test</div><div class="line">drwx------ 4 test test 4096 Feb 25 09:38 /home/test</div><div class="line"># 默认会创建用户主文件夹，且权限为700！这是重点！</div><div class="line"># 默认会创建一个与账号一模一样的用户组名</div></pre></td></tr></table></figure></p>
<p>CentOS这些默认值主要会帮我们处理几个项目：</p>
<ol>
<li>在/etc/passwd里面创建一行与账号相关的数据，包括创建UID/GID/主文件夹等</li>
<li>在/etc/shadow里面将此账号的密码相关参数填入，但是尚未有密码</li>
<li>在/etc/group里面加入一个与账号名称一模一样的组名</li>
<li>在/home下面创建一个与账号同名的目录作为用户主文件夹，且权限为700</li>
</ol>
<h5 id="useradd-参考文件"><a href="#useradd-参考文件" class="headerlink" title="useradd 参考文件"></a>useradd 参考文件</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># useradd -D</div><div class="line">GROUP=100 &lt;==默认的用户组</div><div class="line">HOME=/home &lt;==默认的主文件夹所在的目录</div><div class="line">INACTIVE=-1 &lt;==密码失效日，在shadow内的第7列</div><div class="line">EXPIRE= &lt;==账号失效日，在shadow内的第8列</div><div class="line">SHELL=/bin/sh &lt;==默认的shell</div><div class="line">SKEL=/etc/skel &lt;==用户主文件夹的内容数据参考目录</div><div class="line">CREATE_MAIL_SPOOL=no &lt;==是否主动帮用户创建邮件信箱</div></pre></td></tr></table></figure>
<p>这个数据其实是由/etc/default/useradd调用出来的</p>
<p>系统上面的GID为100即是users这个用户组，此设置项目指的就是让新设用户账号的初始用户组为users这个意思。但是我们知道CentOS上面并不是这样的，在CentOS上面默认的用户组为与账户名相同的用户组。这是因为针对用户组的角度两种不同的机制所致，这两种机制分别是：</p>
<ul>
<li><code>私有用户组机制</code>：系统会创建一个与账号一样的用户组给用户作为初始用户组。这种用户组的设置机制会比较有保密性，这是因为用户都有自己的用户组，而且主文件夹的权限将会设置为700（仅有自己可进入自己的主文件夹）。使用这种机制将不会参考GROUP=100这个设置值</li>
<li><code>公共用户组机制</code>：就是以GROUP=100这个设置值作为新建账号的初始用户组，因此每个账号都属于users这个用户组，且默认主文件夹通常的权限会是“drwxr-xr-x”,由于每个账号都属于users用户组，因此大家都可以互相分享主文件夹内的数据</li>
</ul>
<h5 id="设置用户密码：passwd"><a href="#设置用户密码：passwd" class="headerlink" title="设置用户密码：passwd"></a>设置用户密码：passwd</h5><p>使用useradd创建了账号之后，在默认的情况下，该账号是暂时被封锁的，也就是说，该账号是无法登录的，设置密码以后就可以正常的登录了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"># passwd [--stdin] &lt;==所有人均可使用来改自己的密码</div><div class="line"># passwd [-l] [-u] [--stdin] [-S] [-n 日数] [-x 日数] [-w 日数] [-i 日数] [-i 日期] 账号 &lt;==root功能</div><div class="line">参数：</div><div class="line">--stdin：可以通过来自前一个管道的数据，作为密码输入，对shell script有帮助！</div><div class="line">-l：是Lock的意思，会将/etc/shadow第二列最前面加上！使密码失效</div><div class="line">-u：与-l相对，是unlock的意思</div><div class="line">-S：列出密码相关参数，即shadow文件内的大部分信息</div><div class="line">-n：shadow的第4个字段，多久不可修改密码天数</div><div class="line">-x：shadow的第5个字段，多久内必须要改动密码</div><div class="line">-w：shadow的第6个字段，密码过期前的警告天数</div><div class="line">-i：shadow的第7个字段，密码失效日期</div></pre></td></tr></table></figure></p>
<p>要帮一般账号新建密码需要使用“passwd 账号”的格式，使用“passwd”表示修改自己的密码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># 使用standard input新建用户的密码</div><div class="line"># echo &quot;密码&quot; | passwd --stdin 账号</div></pre></td></tr></table></figure></p>
<h5 id="密码参数显示和修改功能：chage"><a href="#密码参数显示和修改功能：chage" class="headerlink" title="密码参数显示和修改功能：chage"></a>密码参数显示和修改功能：chage</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"># chage [-ldEImMW] 账号名</div><div class="line">参数：</div><div class="line">-l：列出该账号的详细密码参数</div><div class="line">-d：后面接日期，修改shadow的第三字段（最近一次更改密码的日期），格式为YYYY-MM-DD</div><div class="line">-E：后面接日期，修改shadow的第八字段（账号失效日）</div><div class="line">-I：后面接日期，修改shadow的第七字段（密码失效日期）</div><div class="line">-m：后面接日期，修改shadow的第四字段（密码最短保留天数）</div><div class="line">-M：后面接日期，修改shadow的第五字段（密码多久需要进行更改）</div><div class="line">-W：后面接日期，修改shadow的第六字段（密码过期前警告日期）</div></pre></td></tr></table></figure>
<p>让用户在第一次登录时强制他们一定要更改密码后才能够使用系统资源<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># useradd agetest</div><div class="line"># echo &quot;agetest&quot; | passwd --stdin agetest</div><div class="line"># chage -d 0 agetest</div></pre></td></tr></table></figure></p>
<h5 id="用户调整：usermod"><a href="#用户调整：usermod" class="headerlink" title="用户调整：usermod"></a>用户调整：usermod</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"># usermod [-cdegGlsuLU] username</div><div class="line">参数：</div><div class="line">-c：后面接账号的说明，即/etc/passwd 第五列的说明</div><div class="line">-d：修改账户的主文件夹</div><div class="line">-e：修改账号失效日期，格式为YYYY-MM-DD</div><div class="line">-f：修改密码失效日期</div><div class="line">-g：修改用户初始化用户组</div><div class="line">-G：修改用户次要用户组</div><div class="line">-a：与-G合用可增加次要用户组的支持而非设置</div><div class="line">-l：修改账号名称</div><div class="line">-s：修改shell</div><div class="line">-u：修改UID数字</div><div class="line">-L：暂时将用户的密码冻结，让他无法登录，其实仅改/etc/shadow的密码</div><div class="line">-U：将/etc/shadow 密码列的!去掉</div></pre></td></tr></table></figure>
<h5 id="删除用户：userdel"><a href="#删除用户：userdel" class="headerlink" title="删除用户：userdel"></a>删除用户：userdel</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># userdel [-r] username</div><div class="line">参数：</div><div class="line">-r：连同用户的主文件夹也一起删除</div></pre></td></tr></table></figure>
<h3 id="用户功能"><a href="#用户功能" class="headerlink" title="用户功能"></a>用户功能</h3><h4 id="查阅用户相关信息：finger"><a href="#查阅用户相关信息：finger" class="headerlink" title="查阅用户相关信息：finger"></a>查阅用户相关信息：finger</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"># finger [-s] username</div><div class="line">参数：</div><div class="line">-s：仅列出用户的账号，全名，终端机代号与登录时间等</div><div class="line">-m：列出与后面接的账号相同者，而不是利用部分对比（包括全名部分）</div><div class="line"></div><div class="line">例子：查看目前系统上面登录的用户与登录时间</div><div class="line"># finger</div><div class="line">Login     Name       Tty      Idle  Login Time   Office     Office Phone</div><div class="line">root      root      *pts/0          Jan  3 09:56 (210.21.9.252)</div></pre></td></tr></table></figure>
<h4 id="修改个人属性：chfn"><a href="#修改个人属性：chfn" class="headerlink" title="修改个人属性：chfn"></a>修改个人属性：chfn</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># chfn [-foph] [账号名]</div><div class="line">参数：</div><div class="line">-f：后面接完整的大名</div><div class="line">-o：办公室房间号码</div><div class="line">-p：办公室电话号码</div><div class="line">-h：家里的电话号码</div></pre></td></tr></table></figure>
<h4 id="修改shell：chsh"><a href="#修改shell：chsh" class="headerlink" title="修改shell：chsh"></a>修改shell：chsh</h4><p>change shell<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># chsh [-ls]</div><div class="line">参数：</div><div class="line">-l：列出目前系统上面可用的shell，其实就是/etc/shells的内容</div><div class="line">-s：设置修改自己的shell</div></pre></td></tr></table></figure></p>
<h4 id="查询某人或自己的相关UID-GID等信息"><a href="#查询某人或自己的相关UID-GID等信息" class="headerlink" title="查询某人或自己的相关UID/GID等信息"></a>查询某人或自己的相关UID/GID等信息</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># id [username]</div><div class="line"></div><div class="line"># id</div><div class="line">uid=0(root) gid=0(root) groups=0(root)</div></pre></td></tr></table></figure>
<h3 id="新增和删除用户组"><a href="#新增和删除用户组" class="headerlink" title="新增和删除用户组"></a>新增和删除用户组</h3><h4 id="groupadd"><a href="#groupadd" class="headerlink" title="groupadd"></a>groupadd</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"># groupadd [-g gid] [-r] 用户组名</div><div class="line">参数：</div><div class="line">-g：后面接某个特定的GID，用来直接给予某个GID</div><div class="line">-r：新建系统用户组。与/etc/login.defs 内的GID_MIN 有关</div><div class="line"></div><div class="line">例如：</div><div class="line"># groupadd group1</div><div class="line"># grep group1 /etc/group /etc/gshadow</div><div class="line">/etc/group:group1:x702:</div><div class="line">/etc/gshadow:group1:!::</div></pre></td></tr></table></figure>
<h4 id="groupmod"><a href="#groupmod" class="headerlink" title="groupmod"></a>groupmod</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># groupmod [-g gid] [-n group_name] 用户组名</div><div class="line">参数：</div><div class="line">-g：修改既有的GID数字</div><div class="line">-n：修改既有的组名</div></pre></td></tr></table></figure>
<h4 id="groupdel"><a href="#groupdel" class="headerlink" title="groupdel"></a>groupdel</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># groupdel [groupname]</div></pre></td></tr></table></figure>
<h4 id="用户组管理员功能：gpasswd"><a href="#用户组管理员功能：gpasswd" class="headerlink" title="用户组管理员功能：gpasswd"></a>用户组管理员功能：gpasswd</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"># 关于系统管理员（root）做的动作</div><div class="line"># gpasswd groupname</div><div class="line"># gpasswd [-A user1,...] [-M user3,...] groupname</div><div class="line"># gpasswd [-rR] groupname</div><div class="line">参数：</div><div class="line">若没有任何参数时，表示给予groupname一个密码（/etc/gshadow）</div><div class="line">-A：将groupname的主控权交由后面的用户管理（该用户组的管理员）</div><div class="line">-M：将某些账号加入这个用户组当中</div><div class="line">-r：将groupname的密码删除</div><div class="line">-R：让groupname的密码栏失效</div><div class="line"></div><div class="line"># 关于用户组管理员（group administrator）做到操作：</div><div class="line"># gpasswd [-ad] user groupname</div><div class="line">参数：</div><div class="line">-a：将某位用户加入到groupname这个用户组当中</div><div class="line">-d：将某位用户删除出groupname这个用户组当中</div><div class="line"></div><div class="line">例如：新建一个新用户组，并交有test管理</div><div class="line"># groupadd testgroup</div><div class="line"># gpasswd -A test testgroup</div></pre></td></tr></table></figure>
<h3 id="主机的具体权限规划：ACL的使用"><a href="#主机的具体权限规划：ACL的使用" class="headerlink" title="主机的具体权限规划：ACL的使用"></a>主机的具体权限规划：ACL的使用</h3><p>ACL是Access Control List的缩写，主要的目的是提供传统的owner，grooup，others的read，write，execute权限之外的具体权限设置。ACL可以针对单一用户，单一文件或目录来进行r，w，x的权限设置，对于需要特殊权限的使用状况非常有帮助</p>
<p>ACL主要针对以下几个方面来控制权限：</p>
<ul>
<li>用户（user）：可以针对用户来设置权限</li>
<li>用户组（group）：针对用户组来设置其权限</li>
<li>默认属性（mask）：还可以在该目录下在新建文件/目录时设置新数据的默认权限</li>
</ul>
<h4 id="ACL的设置技巧：getfacl，setfacl"><a href="#ACL的设置技巧：getfacl，setfacl" class="headerlink" title="ACL的设置技巧：getfacl，setfacl"></a>ACL的设置技巧：getfacl，setfacl</h4><h5 id="设置某个目录-文件的ACL规定-setfacl"><a href="#设置某个目录-文件的ACL规定-setfacl" class="headerlink" title="设置某个目录/文件的ACL规定:setfacl"></a>设置某个目录/文件的ACL规定:setfacl</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"># setfacl [-bkRd] [&#123;-m|-x&#125; acl参数] 目标文件名</div><div class="line">参数：</div><div class="line">-m：设置后续的acl参数给文件使用，不可与-x使用</div><div class="line">-x：删除后续的acl参数，不可与-m合用</div><div class="line">-b：删除所有的ACL设置参数</div><div class="line">-k：删除默认的ACL参数</div><div class="line">-R：递归设置acl，亦即包括子目录都会被设置起来</div><div class="line">-d：设置默认acl参数!只对目录有效，在该目录新建的数据会引用此默认值</div><div class="line"></div><div class="line"></div><div class="line"># 1.针对单一用户的设置方式：</div><div class="line"># 设置规定：“u:[用户账号列表]:[rwx]”</div><div class="line"># touch acl_test1</div><div class="line"># ll acl_test1</div><div class="line">-rw-r--r-- 1 root root 0 Jan  3 11:08 acl_test1</div><div class="line"># setfacl -m u:test:rx acl_test1</div><div class="line"># ll acl_test1</div><div class="line">-rw-r-xr--+ 1 root root 0 Jan  3 11:08 acl_test1*</div><div class="line"># 权限部分多了个+，且与原本的权限（644）看起来区别很大</div><div class="line"></div><div class="line"># 2.针对特定用户组的方式</div><div class="line"># 设置规范“g:[用户组列表]:[rwx]”</div><div class="line"></div><div class="line"># 3.针对有效权限mask的设置方式</div><div class="line"># 设置规范“m:[rwx]”</div><div class="line"># setfacl -m m:r acl_test1</div><div class="line"># getfacl acl_test1</div><div class="line"># file: acl_test1</div><div class="line"># owner: root</div><div class="line"># group: root</div><div class="line">user::rw-</div><div class="line">user:test:r-x			#effective:r--</div><div class="line">group::r--</div><div class="line">mask::r--</div><div class="line">other::r--</div><div class="line"># test仅具有r的权限而已，并不存在x权限，这就是mask功能，我们可以通过mask来规定最大允许的权限</div></pre></td></tr></table></figure>
<h5 id="取得某个目录-文件的ACL设置项目-getfacl"><a href="#取得某个目录-文件的ACL设置项目-getfacl" class="headerlink" title="取得某个目录/文件的ACL设置项目:getfacl"></a>取得某个目录/文件的ACL设置项目:getfacl</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"># getfacl filename</div><div class="line"></div><div class="line"># getfacl acl_test1</div><div class="line"># file: acl_test1   &lt;== 文件名</div><div class="line"># owner: root   &lt;== 文件所有者，即ll看到的第三用户字段</div><div class="line"># group: root   &lt;== 此文件所属用户组，即ll看到的第四用户字段</div><div class="line">user::rw-   &lt;== 用户列表栏空的，代表文件所有者的权限</div><div class="line">user:test:r-x   &lt;== 针对test的权限设置为rx，与所有者不同</div><div class="line">group::r--  &lt;== 文件用户组的权限设置仅为r</div><div class="line">mask::r-x   &lt;== 此文件默认的有效权限（mask）</div><div class="line">other::r--  &lt;== 其他人拥有的权限</div></pre></td></tr></table></figure>
<p>显示的数据前面加上#的，代表这个文件的默认属性，包括文件名，文件所有者与文件所属用户组。下面出现的user，group，mask，other则是属于不用用户，用户组与有效权限的设置值</p>
<h3 id="用户身份切换"><a href="#用户身份切换" class="headerlink" title="用户身份切换"></a>用户身份切换</h3><p>一般用户转变身份成为root：</p>
<ul>
<li>以“su -”直接将身份变成root即可，但是这个命令却需要root的密码，也就是说，如果你要以su变成root 的话，你的一般用户就必须要有root的密码才行</li>
<li>以“sudo命令”执行root的命令串，由于sudo需要事先设置妥当，且sudo需要输入用户自己的密码，因此多人共管同一台主机时，sudo要比su来的好，至少root密码不会流出去</li>
</ul>
<h4 id="su"><a href="#su" class="headerlink" title="su"></a>su</h4><p>su是最简单的身份切换命令了，它可以进行任何身份的切换<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># su [-lm] [-c 命令] [username]</div><div class="line">参数：</div><div class="line">- ：单纯使用 - 如“su -”，代表使用login-shell的变量文件读取方式来登录系统</div><div class="line">-l：与 - 类似，但后面需要加欲切换的用户账号。也是login-shell的方式</div><div class="line">-m：-m与-p是一样的，表示使用目前的环境设置，而不读取新用户的配置文件</div><div class="line">-c：仅进行一次命令，所以-c后面可以加上命令</div><div class="line"></div><div class="line">exit退出su环境</div></pre></td></tr></table></figure></p>
<p>单纯使用“su”切换成为root身份，读取的变量设置方式为non-login shell方式，这种方式下很多原本的变量不会被改变，还是原来用户的环境变量，如PATH</p>
<h4 id="sudo"><a href="#sudo" class="headerlink" title="sudo"></a>sudo</h4><p>sudo的执行仅需要自己的密码即可，甚至可以设置不需要密码也可执行！并非所有人都能够执行sudo，而是仅有/etc/sudoers内的用户才能够执行sudo这个命令，系统一开始默认仅有root可执行sudo<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># sudo [-b] [-u 新用户账号]</div><div class="line">参数：</div><div class="line">-b：将后续的命令让系统自动执行，而不与目前的shell产生影响</div><div class="line">-u：后面可以接欲切换的用户，若无此项则代表切换身份为root</div></pre></td></tr></table></figure></p>
<p>sudo的执行流程：</p>
<ol>
<li>当用户执行sudo时，系统于/etc/sudoers文件中查找该用户是否有执行sudo的权限</li>
<li>若用户具有可执行sudo的权限后，便让用户输入用户自己的密码来确认</li>
<li>若密码输入成功，便开始进行sudo后续接的命令（但root执行sudo时不需要输入密码）</li>
<li>若欲切换的身份与执行者的身份相同，那也不需要输入密码</li>
</ol>
<h5 id="visudo"><a href="#visudo" class="headerlink" title="visudo"></a>visudo</h5><p>除了root之外的其他账号，若想要使用sudo执行属于root的权限命令，则root需要先用visudo去修改/etc/sudoers，让账号能够使用全部或部分的root命令功能</p>
<h6 id="单一用户可进行root所有命令与sudoers文件语法"><a href="#单一用户可进行root所有命令与sudoers文件语法" class="headerlink" title="单一用户可进行root所有命令与sudoers文件语法"></a>单一用户可进行root所有命令与sudoers文件语法</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># 假设要让test这个账号可以使用root的任何命令</div><div class="line"># visudo</div><div class="line">...(前面省略)...</div><div class="line">root ALL=(ALL)   ALL &lt;==找到这一行，大约在76行左右</div><div class="line">test ALL=(ALL)   ALL &lt;==这一行是你要新增的</div><div class="line">...(后面省略)...</div></pre></td></tr></table></figure>
<p>其实visudo只是利用vi将/etc/sudoers文件调用出来进行修改而已，数据格式为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">用户账号  登录者的来源主机名=（可切换的身份） 可执行的命令</div><div class="line">root         ALL=(ALL)                       ALL &lt;==这是默认值</div></pre></td></tr></table></figure></p>
<p>4个参数的意义：</p>
<ul>
<li><code>用户账号</code>：系统的哪个账号可以使用sudo这个命令，默认为root这个账号</li>
<li><code>登录者的来源主机名</code>：这个账号由哪台主机连接到本Linux主机，意思是这个账号可能是由哪一台网络主机连接过来的，这个设置值可以指定客户端计算机（信任用户的意思）。默认值root可来自任何一台网络主机</li>
<li><code>可切换的身份</code>：这个账号可以切换成什么身份来执行后续的命令，默认root可以切换成任何人</li>
<li><code>可执行命令</code>：这个命令请务必使用绝对路径编写。默认root可以切换任何身份且进行任何命令    </li>
</ul>
<p><strong>注意：那个ALL是特殊关键字，代表任何身份，主机或命令的意思</strong></p>
<h6 id="利用用户组以及免密码的功能处理visudo"><a href="#利用用户组以及免密码的功能处理visudo" class="headerlink" title="利用用户组以及免密码的功能处理visudo"></a>利用用户组以及免密码的功能处理visudo</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"># visudo</div><div class="line">...(前面省略)...</div><div class="line">%wheel   ALL=(ALL) ALL &lt;== 大约在84行左右，请将这行的#去掉</div><div class="line"># 在最左边加上%，代表后面接的是一个“用户组”之意</div><div class="line">...(后面省略)...</div><div class="line"></div><div class="line"># usermod -a -G wheel test &lt;== 将test加入wheel的支持，现在test用户就可以使用sudo命令啦</div></pre></td></tr></table></figure>
<h6 id="设置免密码即可使用sudo"><a href="#设置免密码即可使用sudo" class="headerlink" title="设置免密码即可使用sudo"></a>设置免密码即可使用sudo</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">...(前面省略)...</div><div class="line">%wheel   ALL=(ALL) NOPASSWD:ALL </div><div class="line"># 在最左边加上%，代表后面接的是一个“用户组”之意</div><div class="line">...(后面省略)...</div></pre></td></tr></table></figure>
<h6 id="有限制的命令操作"><a href="#有限制的命令操作" class="headerlink" title="有限制的命令操作"></a>有限制的命令操作</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># visudo </div><div class="line">myuser1 ALL=(root) /usr/bin/passwd &lt;== 最后命令务必用绝对路径</div></pre></td></tr></table></figure>
<h6 id="限制用户的命令参数"><a href="#限制用户的命令参数" class="headerlink" title="限制用户的命令参数"></a>限制用户的命令参数</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># visudo</div><div class="line">myuser1 ALL=(root) !/usr/bin/passwd, /usr/bin/passwd [A-Za-z]*, !/usr/bin/passwd root</div><div class="line"># 加上!代表“不可执行的意思”，因此上面这一行变成可以执行“passwd 任意字符”，但是“passwd”与“passwd root”这两个命令例外</div></pre></td></tr></table></figure>
<h6 id="通过别名设置visudo"><a href="#通过别名设置visudo" class="headerlink" title="通过别名设置visudo"></a>通过别名设置visudo</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># visudo</div><div class="line">User_Alias ADMPW = test1, test2, test3</div><div class="line">Cmnd_Alias ADMPWCOM = !/usr/bin/passwd, /usr/bin/passwd [A-Za-z]*, !/usr/bin/passwd root </div><div class="line">ADMPW ALL=(root) ADMPWCOM</div></pre></td></tr></table></figure>
<p>通过<code>User_Alias</code>新建一个新账号，新账号的名称一定要用大写字符来处理，包括<code>Cmnd_Alias（命令别名）</code>，<code>Host_Alias（来源主机名）</code>都需要使用大写字符</p>
<h6 id="sudo时间间隔"><a href="#sudo时间间隔" class="headerlink" title="sudo时间间隔"></a>sudo时间间隔</h6><p>如果两次sudo操作的间隔超过5分钟，那就得要重新输入一次你的密码了</p>
<h6 id="sudo搭配su的使用方式"><a href="#sudo搭配su的使用方式" class="headerlink" title="sudo搭配su的使用方式"></a>sudo搭配su的使用方式</h6><p>很多时候我们需要大量执行很多root的工作，所以一直使用sudo觉的很烦，那有没有办法使用sudo搭配su，一口气将身份转成root，而且还使用用户自己的密码来变成root呢？<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># visudo </div><div class="line">User_Alias ADMINS = test1, test2, test3</div><div class="line">ADMINS ALL=(root) /bin/su -</div></pre></td></tr></table></figure></p>
<p>接下来，上述的test1，test2，test3三个用户，只要输入“sudo su -”并且输入自己的密码后，立刻变成root身份，不但root密码不会外泄，用户的管理也变的非常方便</p>
<h3 id="用户的特殊shell与PAM模块"><a href="#用户的特殊shell与PAM模块" class="headerlink" title="用户的特殊shell与PAM模块"></a>用户的特殊shell与PAM模块</h3><h4 id="特殊的shell，-sbin-nologin"><a href="#特殊的shell，-sbin-nologin" class="headerlink" title="特殊的shell，/sbin/nologin"></a>特殊的shell，/sbin/nologin</h4><p>一般地，系统账号是不能登录的，系统账号的shell就是使用/sbin/nologin，如果账户使用了/sbin/nologin，即使有了密码，也是不能登录系统的，但是可以使用系统资源</p>
<h4 id="PAM模块简介"><a href="#PAM模块简介" class="headerlink" title="PAM模块简介"></a>PAM模块简介</h4><p>PAM可以说是一套应用程序编程接口（Application Programming Interface API），它提供了一连串的验证机制，只要用户将验证阶段的需求告知PAM后，PAM就能够回报用户验证的结果（成功或失败）</p>
<p>PAM通过一个与程序相同文件名的配置文件来进行一连串的认证分析需求。我们同样以passwd这个命令调用PAM。当你执行passwd后，这个程序调用PAM的流程是：</p>
<ol>
<li>用户开始执行/usr/bin/passwd这支程序，并输入密码</li>
<li>passwd调用PAM模块进行验证</li>
<li>PAM模块会到/etc/pam.d/中找寻与程序（passwd）同名的配置文件</li>
<li>依据/etc/pam.d/passwd内的设置，引用相关的PAM模块逐步进行验证分析</li>
<li>将验证结果（成功，失败以及其他信息）回传给passwd这个程序</li>
<li>passwd这支程序会根据PAM回传的结果决定下一个操作（重新输入密码或者通过验证）</li>
</ol>
<h6 id="etc-pam-d-passwd"><a href="#etc-pam-d-passwd" class="headerlink" title="/etc/pam.d/passwd"></a>/etc/pam.d/passwd</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># cat /etc/pam.d/passwd</div><div class="line">#%PAM-1.0 </div><div class="line">auth include system-auth &lt;==每一行都是一个验证过程</div><div class="line">account include system-auth</div><div class="line">password include system-auth</div><div class="line">验证类型 控制标准 PAM模块与该模块参数</div></pre></td></tr></table></figure>
<h3 id="查询用户：w，who，last，lastlog"><a href="#查询用户：w，who，last，lastlog" class="headerlink" title="查询用户：w，who，last，lastlog"></a>查询用户：w，who，last，lastlog</h3><h4 id="查询目前已登录在系统上面的用户-w-或者-who"><a href="#查询目前已登录在系统上面的用户-w-或者-who" class="headerlink" title="查询目前已登录在系统上面的用户:w 或者 who"></a>查询目前已登录在系统上面的用户:w 或者 who</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># w</div><div class="line"> 17:36:26 up 26 days,  5:13,  1 user,  load average: 0.00, 0.00, 0.00</div><div class="line">USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT</div><div class="line">root     pts/0    210.21.9.252     14:20    2.00s  0.03s  0.00s w</div><div class="line"># 第一行显示目前的时间，开机（up）多久，几个用户在系统上的平均负载等</div><div class="line"></div><div class="line"># who</div><div class="line">root     pts/0        2018-01-03 14:20 (210.21.9.252)</div></pre></td></tr></table></figure>
<h4 id="查看每个账号的最近登录时间，则可以使用lastlog这个命令。lastlog会去读取-var-log-lastlog文件，结果将数据输出"><a href="#查看每个账号的最近登录时间，则可以使用lastlog这个命令。lastlog会去读取-var-log-lastlog文件，结果将数据输出" class="headerlink" title="查看每个账号的最近登录时间，则可以使用lastlog这个命令。lastlog会去读取/var/log/lastlog文件，结果将数据输出"></a>查看每个账号的最近登录时间，则可以使用lastlog这个命令。lastlog会去读取/var/log/lastlog文件，结果将数据输出</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"># lastlog</div><div class="line">Username         Port     From             Latest</div><div class="line">root             pts/0    210.21.9.252     Wed Jan  3 14:20:31 +0800 2018</div><div class="line">daemon                                     **Never logged in**</div><div class="line">bin                                        **Never logged in**</div><div class="line">sys                                        **Never logged in**</div><div class="line">sync                                       **Never logged in**</div><div class="line">games                                      **Never logged in**</div><div class="line">man                                        **Never logged in**</div></pre></td></tr></table></figure>
<h3 id="用户对谈：write，mesg，wall"><a href="#用户对谈：write，mesg，wall" class="headerlink" title="用户对谈：write，mesg，wall"></a>用户对谈：write，mesg，wall</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"># write 用户账号 [用户所在终端接口]</div><div class="line"></div><div class="line"># who</div><div class="line">root     pts/0        2018-01-03 14:20 (210.21.9.252)</div><div class="line">test     pts/1        2018-01-03 17:47 (210.21.9.252) &lt;== test用户在线</div><div class="line"></div><div class="line"># root向test发送消息</div><div class="line"># write test pts/1</div><div class="line">write: write: you have write permission turned off.</div><div class="line"></div><div class="line">fuck</div><div class="line"></div><div class="line"># test接收到的消息</div><div class="line">Message from root@iZwz9hwmk5t4idn4oxa4okZ on pts/0 at 17:49 ...</div><div class="line">fuck</div><div class="line">EOF</div><div class="line"></div><div class="line"># test不想接收任何信息，但是对于root传来的信息没有任何抵抗力</div><div class="line">mesg n</div><div class="line">$ mesg</div><div class="line">is n</div><div class="line"></div><div class="line"># 广播</div><div class="line"># wall &quot;this is a message&quot;</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://clq2owesome.github.io/2018/02/25/Linux/Linux账号管理与ACL权限设置/" data-id="cjegeio0u0009pfblfsf6z7il" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Spring/Spring Boot/常用的配置" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/02/25/Spring/Spring Boot/常用的配置/" class="article-date">
  <time datetime="2018-02-25T02:09:45.000Z" itemprop="datePublished">2018-02-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Spring/">Spring</a>►<a class="article-category-link" href="/categories/Spring/Spring-Boot/">Spring Boot</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/02/25/Spring/Spring Boot/常用的配置/">常用的配置</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line">#Banner</div><div class="line">banner.charset=UTF-8</div><div class="line">banner.location=classpath:banner.txt</div><div class="line"></div><div class="line"></div><div class="line">#Spring Config(ConfigFileApplicationListener)</div><div class="line">spring.config.name=Spring配置文件名，默认为application</div><div class="line">spring.config.location=Spring配置文件的路径</div><div class="line"></div><div class="line">#Profiles</div><div class="line">spring.profiles.active=激活使用哪个环境的配置文件</div><div class="line">spring.profiles.include=无条件的激活指定的配置文件</div><div class="line"></div><div class="line">#logging</div><div class="line">logging.path=/var/logs</div><div class="line">logging.file=myapp.log</div><div class="line">logging.level.org.springframework=DEBUG，TRACE，INFO，WARN，ERROR，FATAL，OFF</div><div class="line"></div><div class="line">#inentity</div><div class="line">spring.application.name=</div><div class="line">spring.application.index=</div><div class="line"></div><div class="line">#embedded server configuration （ServerProperties）</div><div class="line">server.port=8080</div><div class="line">server.address= #bind to a specific NIC</div><div class="line">server.session-timeout=session过期时间（秒）</div><div class="line">server.context-path=#the context path，默认为/</div><div class="line">server.servlet-path=#the servlet path，默认为/</div><div class="line">server.display-name=应用的显示名称</div><div class="line"></div><div class="line">#Spring Mvc</div><div class="line">spring.mvc.locate=en_UK</div><div class="line">spring.mvc.date-format=yyyy-MM-dd</div><div class="line">spring.mvc.favicon.enabled=true</div><div class="line">spring.view.prefix=</div><div class="line">spring.view.suffix=</div><div class="line"></div><div class="line">#datasource</div><div class="line">spring.datasource.url</div><div class="line">spring.datasource.username</div><div class="line">spring.datasource.password</div><div class="line">spring.datasource.jndi-name</div><div class="line"></div><div class="line">#mongodb</div><div class="line">spring.data.mongodb.host=</div><div class="line">spring.data.mongodb.port=</div><div class="line">spring.data.mongodb.uri=mongodb://location/test</div><div class="line">spring.data.mongodb.database=</div><div class="line">spring.data.mongodb.authentication-database=</div><div class="line">spring.data.mongodb.grid-fs-database=</div><div class="line">spring.data.mongodb.username=</div><div class="line">spring.data.mongodb.password=</div><div class="line">spring.data.mongodb.repositories,enabled=</div><div class="line"></div><div class="line">#jpa</div><div class="line">spring.jpa.open-in-view=true</div><div class="line">spring.jpa.show-sql=true</div><div class="line">spring.jpa.database-platform=</div><div class="line">spring.jpa.database=</div><div class="line">spring.jpa.generate-ddl=false</div><div class="line">spring.jpa.hibernate.naming-strategy=</div><div class="line">spring.jpa.hibernate.ddl-auto=</div><div class="line">spring.data.jpa.repositories.enabled=true</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://clq2owesome.github.io/2018/02/25/Spring/Spring Boot/常用的配置/" data-id="cjegeio7m00a9pfblxf2us9hc" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/2/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/24/">24</a><a class="extend next" rel="next" href="/page/4/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Eclipse/">Eclipse</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Github/">Github</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Java/Cookie/">Cookie</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/JAXB/">JAXB</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/JavaMail/">JavaMail</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/分布式/">分布式</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/加密解密／编码解码/">加密解密／编码解码</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/基础/">基础</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/数据类型/">数据类型</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/日记/">日记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/时间日期/">时间日期</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/线程/">线程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/网络NIO/">网络NIO</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/队列/">队列</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/集合/">集合</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Maven/">Maven</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/">Spring</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Application-Event/">Application Event</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/JPA/">JPA</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Security/">Security</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Boot/">Spring Boot</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Spring-Session/">Spring Session</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/Task/">Task</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/spring-MVC/">spring MVC</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/spring-data-redis/">spring data redis</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/基础/">基础</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端技术相关/">前端技术相关</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/前端技术相关/forever/">forever</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端技术相关/javascript/">javascript</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库相关/">数据库相关</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/数据库相关/mysql/">mysql</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/服务器相关/">服务器相关</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/服务器相关/Hessian/">Hessian</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/服务器相关/Hudson-Jenkins/">Hudson & Jenkins</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/服务器相关/Memcached/">Memcached</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/服务器相关/Nginx/">Nginx</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/服务器相关/Tomcat/">Tomcat</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/服务器相关/red5/">red5</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/服务器相关/redis/">redis</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/服务器相关/resin/">resin</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/网络/">网络</a></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/02/25/Java/集合/Hashtable与ConcurrentHashMap区别/">Hashtable与ConcurrentHashMap区别</a>
          </li>
        
          <li>
            <a href="/2018/02/25/Java/集合/HashSet原理/">HashSet原理</a>
          </li>
        
          <li>
            <a href="/2018/02/25/Java/分布式/分布式事务/">分布式事务</a>
          </li>
        
          <li>
            <a href="/2018/02/25/Java/集合/在List循环中删除元素/">在List循环中删除元素</a>
          </li>
        
          <li>
            <a href="/2018/02/25/Java/基础/java8新特性/">java8新特性</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 LeoChan<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>