<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="描述啊">
<meta property="og:type" content="website">
<meta property="og:title" content="LeoChan&#39;s 个人博客">
<meta property="og:url" content="https://clq2owesome.github.io/page/4/index.html">
<meta property="og:site_name" content="LeoChan&#39;s 个人博客">
<meta property="og:description" content="描述啊">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="LeoChan&#39;s 个人博客">
<meta name="twitter:description" content="描述啊">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://clq2owesome.github.io/page/4/"/>





  <title>LeoChan's 个人博客</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">LeoChan's 个人博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">技术都是通用的，重要的是是否具有自主解决问题的能力！</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Startseite
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archiv
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://clq2owesome.github.io/2018/02/25/Spring/Spring Boot/常用的配置/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LeoChan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LeoChan's 个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/25/Spring/Spring Boot/常用的配置/" itemprop="url">常用的配置</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-02-25T10:09:45+08:00">
                2018-02-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Spring/" itemprop="url" rel="index">
                    <span itemprop="name">Spring</span>
                  </a>
                </span>

                
                
                  . 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Spring/Spring-Boot/" itemprop="url" rel="index">
                    <span itemprop="name">Spring Boot</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line">#Banner</div><div class="line">banner.charset=UTF-8</div><div class="line">banner.location=classpath:banner.txt</div><div class="line"></div><div class="line"></div><div class="line">#Spring Config(ConfigFileApplicationListener)</div><div class="line">spring.config.name=Spring配置文件名，默认为application</div><div class="line">spring.config.location=Spring配置文件的路径</div><div class="line"></div><div class="line">#Profiles</div><div class="line">spring.profiles.active=激活使用哪个环境的配置文件</div><div class="line">spring.profiles.include=无条件的激活指定的配置文件</div><div class="line"></div><div class="line">#logging</div><div class="line">logging.path=/var/logs</div><div class="line">logging.file=myapp.log</div><div class="line">logging.level.org.springframework=DEBUG，TRACE，INFO，WARN，ERROR，FATAL，OFF</div><div class="line"></div><div class="line">#inentity</div><div class="line">spring.application.name=</div><div class="line">spring.application.index=</div><div class="line"></div><div class="line">#embedded server configuration （ServerProperties）</div><div class="line">server.port=8080</div><div class="line">server.address= #bind to a specific NIC</div><div class="line">server.session-timeout=session过期时间（秒）</div><div class="line">server.context-path=#the context path，默认为/</div><div class="line">server.servlet-path=#the servlet path，默认为/</div><div class="line">server.display-name=应用的显示名称</div><div class="line"></div><div class="line">#Spring Mvc</div><div class="line">spring.mvc.locate=en_UK</div><div class="line">spring.mvc.date-format=yyyy-MM-dd</div><div class="line">spring.mvc.favicon.enabled=true</div><div class="line">spring.view.prefix=</div><div class="line">spring.view.suffix=</div><div class="line"></div><div class="line">#datasource</div><div class="line">spring.datasource.url</div><div class="line">spring.datasource.username</div><div class="line">spring.datasource.password</div><div class="line">spring.datasource.jndi-name</div><div class="line"></div><div class="line">#mongodb</div><div class="line">spring.data.mongodb.host=</div><div class="line">spring.data.mongodb.port=</div><div class="line">spring.data.mongodb.uri=mongodb://location/test</div><div class="line">spring.data.mongodb.database=</div><div class="line">spring.data.mongodb.authentication-database=</div><div class="line">spring.data.mongodb.grid-fs-database=</div><div class="line">spring.data.mongodb.username=</div><div class="line">spring.data.mongodb.password=</div><div class="line">spring.data.mongodb.repositories,enabled=</div><div class="line"></div><div class="line">#jpa</div><div class="line">spring.jpa.open-in-view=true</div><div class="line">spring.jpa.show-sql=true</div><div class="line">spring.jpa.database-platform=</div><div class="line">spring.jpa.database=</div><div class="line">spring.jpa.generate-ddl=false</div><div class="line">spring.jpa.hibernate.naming-strategy=</div><div class="line">spring.jpa.hibernate.ddl-auto=</div><div class="line">spring.data.jpa.repositories.enabled=true</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://clq2owesome.github.io/2018/02/25/Spring/Spring Boot/多环境配置/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LeoChan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LeoChan's 个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/25/Spring/Spring Boot/多环境配置/" itemprop="url">多环境配置</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-02-25T10:09:45+08:00">
                2018-02-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Spring/" itemprop="url" rel="index">
                    <span itemprop="name">Spring</span>
                  </a>
                </span>

                
                
                  . 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Spring/Spring-Boot/" itemprop="url" rel="index">
                    <span itemprop="name">Spring Boot</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="配置文件加载顺序"><a href="#配置文件加载顺序" class="headerlink" title="配置文件加载顺序"></a>配置文件加载顺序</h2><ol>
<li>在命令行中传入的参数</li>
<li>SPRING_APPLICATION_JSON中的属性。SPRING_APPLICATION_JSON是以JSON格式配置在系统环境变量中的内容</li>
<li>java:comp/env中的JNDI属性</li>
<li>java的系统属性，可以通过System.getproperties()获得的内容</li>
<li>操作系统的环境变量</li>
<li>通过random.*配置的随机属性</li>
<li>位于当前应用jar包之外，针对不同{profile}环境的配置文件内容，例如application-{profile}.properties或是YAML定义的配置文件</li>
<li>位于当前应用jar包之内，针对不同{profile}环境的配置文件内容，例如application-{profile}.properties或是YAML定义的配置文件</li>
<li>位于当前应用jar包之外的application.properties和YAML配置内容</li>
<li>位于当前应用jar包之内的application.properties和YAML配置内容</li>
<li>在@Configuration注解修改的类中，通过@PropertySource注解定义的属性</li>
<li>应用默认属性，使用SpringApplication.setDefaultProperties定义的内容</li>
</ol>
<p>优先级按上面的顺序由高到低，数字越小优先级越高</p>
<p>可以看到，其中第7项和第9项都是从应用jar包之外读取配置文件，所以，实现外部化配置的原理就是从此切入，为其指定外部配置文件的记载位置来取代jar包之内的配置内容。通过这样的实现，我们的工程在配置中就变的非常干净，只需在本地放置开发需要的配置即可，而不用关心其他环境的配置，由其对应环境的负责人去维护即可</p>
<h3 id="命令行参数"><a href="#命令行参数" class="headerlink" title="命令行参数"></a>命令行参数</h3><p>使用命令<code>java -jar</code>来启动应用时，还可以在命令行中指定应用的参数，比如<code>java -jar xxx.jar --server.port=8888</code>，直接以命令行的方式来设置<code>server.port</code>属性，并将启动应用的端口设为8888</p>
<p>在命令行方式启动Spring Boot应用时，连续的两个减号–就是对application.properties中的属性值进行赋值的标识。所以，<code>java -jar xxx.jar --server.port=8888</code>命令，等价于在application.properties中添加属性server.port=8888</p>
<h2 id="application-properties"><a href="#application-properties" class="headerlink" title="application.properties"></a>application.properties</h2><p><strong>Spring Boot的默认配置文件位置为：src/main/resources/application.properties 或者 application.yml；Spring Boot默认会加载放置在src/main/resources目录或者类路径的/config下</strong></p>
<p>在Spring Boot中，多环境配置的文件名需要满足application-{profile}.properties的格式，其中{profile}对应你的环境标识，如下所示：</p>
<ul>
<li><strong>application-dev.properties</strong>（开发环境）</li>
<li><strong>application-test.properties</strong>（测试环境）</li>
<li><strong>application-prod.properties</strong>（生产环境）</li>
</ul>
<p>至于具体哪个配置文件会被加载，需要在application.properties文件中通过<strong>spring.profiles.active</strong>属性来设置，其值对应配置文件中的{profile}值。如spring.profiles.active=test就会加载application-test.properties配置文件内容</p>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p>application.properties<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">root=http://localhost</div><div class="line"></div><div class="line">#spring.profiles.active</div><div class="line">spring.profiles.active=dev</div></pre></td></tr></table></figure></p>
<ol>
<li>Controller<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">@Autowired  </div><div class="line">private Environment env;  </div><div class="line">           </div><div class="line">@RequestMapping(&quot;/testProfile&quot;)  </div><div class="line">public String testProfile()&#123;  </div><div class="line">    return env.getProperty(&quot;profile&quot;);  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>测试：</p>
<ul>
<li>上述代码执行后的结果是：dev_envrimont</li>
<li>如果application.properties的配置改为：spring.profiles.active=prod，则结果是：prod_envrimont</li>
<li>如果application.properties的配置改为：spring.profiles.active=prod，而application.properties中也配置了profile=xxx（不管该配置配置在spring.profiles.active=prod的上方还是下方），这个时候结果是：prod_envrimont</li>
<li>如果application.properties的配置改为：spring.profiles.active=prod，而application.properties中也配置了profile=xxx（不管该配置配置在spring.profiles.active=prod的上方还是下方），但是application-prod.properties删掉了profile = prod_envrimont，这个时候结果是：xxx</li>
</ul>
<p>结论：</p>
<ul>
<li>各个环境公共的配置写在application.properties中</li>
<li>各个模块独有的配置配置在自己的application-{xxx}.properties文件中</li>
<li>程序读取的时候优先读取application.properties中选中的profile的配置，若读不到才会从application.properties去读</li>
</ul>
<h2 id="application-yml"><a href="#application-yml" class="headerlink" title="application.yml"></a>application.yml</h2><p>缺陷：无法通过@PropertySource注解来加载配置</p>
<h3 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h3><p>spring boot中，可以通过在application.yml配置文件中，配置多个不同的profile，实现在不同的环境（比如开发、测试和生产环境）使用不同的配置变量。</p>
<p>具体配置如下（application.yml中的内容）：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">server:  </div><div class="line">  port: 8082  </div><div class="line">  </div><div class="line"># 默认的profile为dev，其他环境通过指定启动参数使用不同的profile，比如：  </div><div class="line">#   测试环境：java -jar my-spring-boot.jar --spring.profiles.active=test  </div><div class="line">#   生产环境：java -jar my-spring-boot.jar --spring.profiles.active=prod  </div><div class="line">spring:  </div><div class="line">  profiles:  </div><div class="line">    active: dev  </div><div class="line">  </div><div class="line">---  </div><div class="line"># 开发环境配置  </div><div class="line">spring:  </div><div class="line">  profiles: dev  </div><div class="line">mysql:  </div><div class="line">  ipPort: localhost:3306  </div><div class="line">    </div><div class="line">---  </div><div class="line"># 测试环境配置  </div><div class="line">spring:  </div><div class="line">  profiles: test  </div><div class="line">mysql:  </div><div class="line">  ipPort: 192.168.0.12:8066  </div><div class="line">    </div><div class="line">---  </div><div class="line"># 生产环境配置  </div><div class="line">spring:  </div><div class="line">  profiles: prod  </div><div class="line">mysql:  </div><div class="line">  ipPort: 192.168.0.13:8066</div></pre></td></tr></table></figure></p>
<h2 id="启动Spring-Boot的方式"><a href="#启动Spring-Boot的方式" class="headerlink" title="启动Spring Boot的方式"></a>启动Spring Boot的方式</h2><ol>
<li>作为一个Java应用程序，可以直接通过运行拥有main函数的类来启动</li>
<li><p>通过maven执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mvn spring-boot:run命令</div></pre></td></tr></table></figure>
</li>
<li><p>在服务其上部署运行时，通常先使用<code>mvn install</code>将应用打包成jar包，再通过<code>java -jar xxx.jar</code>来启动应用</p>
</li>
</ol>
<p>通过指定启动参数使用不同的profile，比如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">#   测试环境：Java -jar my-spring-boot.jar --spring.profiles.active=test</div><div class="line">#   生产环境：java -jar my-spring-boot.jar --spring.profiles.active=prod</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://clq2owesome.github.io/2018/02/25/Linux/Bash Shell的操作环境/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LeoChan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LeoChan's 个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/25/Linux/Bash Shell的操作环境/" itemprop="url">Bash Shell的操作环境</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-02-25T10:09:45+08:00">
                2018-02-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="路径与命令查找顺序"><a href="#路径与命令查找顺序" class="headerlink" title="路径与命令查找顺序"></a>路径与命令查找顺序</h3><p>基本上，命令运行的顺序可以这样看：</p>
<ol>
<li>以相对/绝对路径执行命令，例如：<code>/bin/ls</code> 或 <code>./ls</code></li>
<li>由alias找到该命令执行</li>
<li>由bash内置的命令来执行</li>
<li>通过$PATH这个变量的顺序找到的第一个命令来执行</li>
</ol>
<h3 id="bash的登录与欢迎信息：-etc-issue，-etc-motd"><a href="#bash的登录与欢迎信息：-etc-issue，-etc-motd" class="headerlink" title="bash的登录与欢迎信息：/etc/issue，/etc/motd"></a>bash的登录与欢迎信息：/etc/issue，/etc/motd</h3><h4 id="登录界面"><a href="#登录界面" class="headerlink" title="登录界面"></a>登录界面</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cat /etc/issue</div><div class="line">Ubuntu 16.04.3 LTS \n \l</div></pre></td></tr></table></figure>
<p>issue这个文件的内容可以使用反斜杠作为变量调用</p>
<table>
<thead>
<tr>
<th>代码</th>
<th>issue内的各代码意义</th>
</tr>
</thead>
<tbody>
<tr>
<td>\d</td>
<td>本地端的日期</td>
</tr>
<tr>
<td>\l</td>
<td>显示第几个终端机接口</td>
</tr>
<tr>
<td>\m</td>
<td>显示硬件的等级（i386/i486/i586/i686）</td>
</tr>
<tr>
<td>\n</td>
<td>显示主机的网络名称</td>
</tr>
<tr>
<td>\o</td>
<td>显示domain name</td>
</tr>
<tr>
<td>\r</td>
<td>操作系统的版本（相当于 uname -r）</td>
</tr>
<tr>
<td>\t</td>
<td>显示本地端时间的时间</td>
</tr>
<tr>
<td>\s</td>
<td>操作系统的名称</td>
</tr>
<tr>
<td>\v</td>
<td>操作系统的版本</td>
</tr>
</tbody>
</table>
<h4 id="欢迎内容"><a href="#欢迎内容" class="headerlink" title="欢迎内容"></a>欢迎内容</h4><p>如果你想要让用户登录后取得一些信息，例如你想要让大家都知道的信息，那么可以将信息加入/etc/motd里面去</p>
<h3 id="bash的环境配置文件"><a href="#bash的环境配置文件" class="headerlink" title="bash的环境配置文件"></a>bash的环境配置文件</h3><h4 id="login-shell"><a href="#login-shell" class="headerlink" title="login shell"></a>login shell</h4><p>取得bash时需要完整的登录流程的，就称为login shell</p>
<p>login shell其实只会读取这两个配置文件：</p>
<ul>
<li><code>/etc/profile</code>：这是系统整体的设置，你最好不要修改这个文件</li>
<li><code>~/.bash_profile</code> 或 <code>~/.bash_login</code> 或 <code>~/.profile</code>：属于用户个人设置，你要改自己的数据，就写入这里</li>
</ul>
<p>bash的login shell情况下所读取的整体环境配置文件其实只有/etc/profile，但是/etc/profile还会调用其他的配置文件（/etc/inputrc，/etc/profile.d/*.sh，/etc/sysconfig/i18n）</p>
<p>在login shell的bash环境中，所读取的个人偏好配置文件其实主要有三个，并且只会依序读取其中一个，三个文件的顺序为：</p>
<ol>
<li>~/.bash_profile</li>
<li>~/.bash_login</li>
<li>~/.profile</li>
</ol>
<p>bash配置文件的读入方式比较有趣，主要通过一个命令“source”来读取的。也就是说~/.bash_profile其实会再调用~/.bashrc的设置内容，整个login shell的读取流程如下：<br><img src="https://raw.githubusercontent.com/clq2owesome/image/master/bash.png" alt="image"></p>
<h4 id="non-login-shell"><a href="#non-login-shell" class="headerlink" title="non-login shell"></a>non-login shell</h4><p>当你取得non-login shell时，该bash配置文件仅会读取~/.bashrc</p>
<h4 id="读取环境配置文件的命令：source"><a href="#读取环境配置文件的命令：source" class="headerlink" title="读取环境配置文件的命令：source"></a>读取环境配置文件的命令：source</h4><p>由于/etc/profile 与 ~/.bash_profile都是取得login shell的时候才会读取的配置文件，所以如果你将自己的偏好设置写入上述的文件后，通常都是得注销再登录后该设置才会生效。那么能不能直接读取配置文件而不注销登录呢？可以的！那就是得要利用source这个命令了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">source 配置文件</div><div class="line">例：</div><div class="line">将主文件夹的~/.bashrc的设置读入目前的bash环境中</div><div class="line">source ~/.bashrc</div><div class="line">. ~/.bashrc</div></pre></td></tr></table></figure></p>
<p>利用source或者小数点（.）都可以将配置文件的内容读进目前的shell环境中</p>
<h3 id="bash默认组合键"><a href="#bash默认组合键" class="headerlink" title="bash默认组合键"></a>bash默认组合键</h3><table>
<thead>
<tr>
<th>组合按键</th>
<th>执行结果</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ctrl+C</td>
<td>终止目前的命令</td>
</tr>
<tr>
<td>Ctrl+D</td>
<td>输入结束（EOF）</td>
</tr>
<tr>
<td>Ctrl+M</td>
<td>就是Enter</td>
</tr>
<tr>
<td>Ctrl+S</td>
<td>暂停屏幕的输出</td>
</tr>
<tr>
<td>Ctrl+Q</td>
<td>恢复屏幕的输出</td>
</tr>
<tr>
<td>Ctrl+U</td>
<td>在提示符下，将整行命令删除</td>
</tr>
<tr>
<td>Ctrl+Z</td>
<td>暂停目前的命令</td>
</tr>
</tbody>
</table>
<h3 id="通配符"><a href="#通配符" class="headerlink" title="通配符"></a>通配符</h3><table>
<thead>
<tr>
<th>符号</th>
<th>意义</th>
</tr>
</thead>
<tbody>
<tr>
<td>*</td>
<td>代表0个到无穷多个任意字符</td>
</tr>
<tr>
<td>?</td>
<td>代表一定有一个任意字符</td>
</tr>
<tr>
<td>[]</td>
<td>同样代表一定有一个在中括号内的字符（非任意字符）。例如[abcd]代表一定有一个字符，可能是a，b，c，d这个四个任何一个</td>
</tr>
<tr>
<td>[-]</td>
<td>若有减号在中括号内时，代表在编码顺序内的所有字符。例如[0-9]代表0到9之间的所有数字，因为数字的语系编码是连续的</td>
</tr>
<tr>
<td>[^]</td>
<td>若中括号内的第一个字符为指数符号（^）,那表示原向选择。例如[^abc]代表一个有一个字符，只要是非a，b，c的其他字符就可以</td>
</tr>
</tbody>
</table>
<h3 id="特殊符号"><a href="#特殊符号" class="headerlink" title="特殊符号"></a>特殊符号</h3><table>
<thead>
<tr>
<th>符号</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>#</td>
<td>批注符号，这个最常被使用在script中，视为说明，其后的数据均不执行</td>
</tr>
<tr>
<td>\</td>
<td>转义符号，将“特殊符号或通配符”还原成一般字符</td>
</tr>
<tr>
<td>\</td>
<td></td>
<td>管道（pipe），分隔两个管道命令的界定</td>
</tr>
<tr>
<td>;</td>
<td>连续命令执行分隔符，连续性命令的界定</td>
</tr>
<tr>
<td>~</td>
<td>用户的主文件夹</td>
</tr>
<tr>
<td>$</td>
<td>使用变量前导符，即是变量之前需要加的变量替代值</td>
</tr>
<tr>
<td>&amp;</td>
<td>作业控制（job control），将命令变成背景工作</td>
</tr>
<tr>
<td>!</td>
<td>逻辑运算意义上的“非”</td>
</tr>
<tr>
<td>/</td>
<td>目录符号，路径分隔的符号</td>
</tr>
<tr>
<td>&gt;,&gt;&gt;</td>
<td>数据流重定向，输出导向，分别是“替换”与“累加”</td>
</tr>
<tr>
<td>&lt;,&lt;&lt;</td>
<td>数据流重定向，输入导向</td>
</tr>
<tr>
<td>‘’</td>
<td>单引号，不具有变量置换的功能</td>
</tr>
<tr>
<td>“”</td>
<td>具有变量置换的功能</td>
</tr>
</tbody>
</table>
<p><code>` | 两个“</code>”为可以先执行的命令，也可以使用$()<br>() | 在中间为子shell的起始与结束<br>{} | 在中间为命令块的组合</p>
<h3 id="数据流重定向"><a href="#数据流重定向" class="headerlink" title="数据流重定向"></a>数据流重定向</h3><p>数据流重定向就是将某个命令执行后应该要出现在屏幕上的数据传输到其他地方</p>
<h4 id="standard-output-与-standard-error-output"><a href="#standard-output-与-standard-error-output" class="headerlink" title="standard output 与 standard error output"></a>standard output 与 standard error output</h4><p>标准输出指的是命令执行所回传的正确的信息，而标准错误输出可理解为命令执行失败后，所回传的错误信息</p>
<ul>
<li>标准输入（stdin）：代码为0，使用&lt;或&lt;&lt;</li>
<li>标准输出（stdout）：代码为1，使用&gt;或&gt;&gt;</li>
<li>标准错误输出（stderr）：代码为2，使用2&gt;或2&gt;&gt;</li>
</ul>
<p>如果仅存在&gt;时，则代表默认的代码1，也就是说：</p>
<ul>
<li><code>1&gt;</code>：以<strong>覆盖</strong>的方法将正确的数据输出到指定的文件或者设备上</li>
<li><code>1&gt;&gt;</code>：以<strong>累加</strong>的方法将正确的数据输出到指定的文件或者设备上</li>
<li><code>2&gt;</code>：以<strong>覆盖</strong>的方法将错误的数据输出到指定的文件或者设备上</li>
<li><code>2&gt;&gt;</code>：以<strong>累加</strong>的方法将错误的数据输出到指定的文件或者设备上</li>
</ul>
<h5 id="dev-null-垃圾桶黑洞设备"><a href="#dev-null-垃圾桶黑洞设备" class="headerlink" title="/dev/null 垃圾桶黑洞设备"></a>/dev/null 垃圾桶黑洞设备</h5><p>如果要将错误信息忽略掉而不显示或存储，可以使用<code>2&gt; /dev/null</code>,这个/dev/null可以吃掉任何导向这个设备的信息</p>
<h5 id="将正确数据与错误数据写入同一文件"><a href="#将正确数据与错误数据写入同一文件" class="headerlink" title="将正确数据与错误数据写入同一文件"></a>将正确数据与错误数据写入同一文件</h5><p>可以使用命令<code>2&gt;&amp;1</code> 或者 <code>&amp;&gt;</code>，如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">find /home -name .bashrc &gt; list 2&gt;&amp;1</div><div class="line">find /home -name .bashrc &amp;&gt; list</div></pre></td></tr></table></figure></p>
<h3 id="命令执行的判断依据：-amp-amp"><a href="#命令执行的判断依据：-amp-amp" class="headerlink" title="命令执行的判断依据：(;, &amp;&amp;, ||)"></a>命令执行的判断依据：(<code>;</code>, <code>&amp;&amp;</code>, <code>||</code>)</h3><h4 id="cmd-cmd（在考虑命令相关性的连续命令执行）"><a href="#cmd-cmd（在考虑命令相关性的连续命令执行）" class="headerlink" title="cmd;cmd（在考虑命令相关性的连续命令执行）"></a>cmd;cmd（在考虑命令相关性的连续命令执行）</h4><p>在命令与命令中间利用分号（;）来隔开，分号前的命令执行完后就会立即接着执行后面的命令，例如<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sync; sync; shutdown -h now</div></pre></td></tr></table></figure></p>
<h4 id="（命令回传码）与-amp-amp-或"><a href="#（命令回传码）与-amp-amp-或" class="headerlink" title="$?（命令回传码）与&amp;&amp;或||"></a>$?（命令回传码）与&amp;&amp;或||</h4><p>一般地，若前一个命令执行的结果为正确，在Linux下面会回传一个$?=0的值</p>
<p>如果要通过这个回传码来判断后续的命令是否要执行，需要借助“&amp;&amp;”或“||”</p>
<table>
<thead>
<tr>
<th>命令的执行情况</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>cmd1 &amp;&amp; cmd2</td>
<td>若cmd1执行完毕且正确执行（$?=0），则开始执行cmd2<br>若cmd1执行完毕且错误（$?≠0），则cmd2不执行</td>
</tr>
<tr>
<td>cmd1 \</td>
<td>\</td>
<td>cmd2</td>
<td>若cmd1执行完毕且正确执行（$?=0），则cmd2不执行<br>若cmd1执行完毕且错误（$?≠0），则开始执行cmd2</td>
</tr>
</tbody>
</table>
<p>例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">判断一个目录是否存在，不存在则创建</div><div class="line">ls /tmp/abc || mkdir /tmp/abc</div><div class="line"></div><div class="line">要在目录创建文件，但不知道该目录是否存在</div><div class="line">ls /tmp/abc || mkdir /tmp/abc &amp;&amp; touch /tmp/abc/hehe</div></pre></td></tr></table></figure></p>
<p>一般来说，假设判断式有三个，也就是：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">command1 &amp;&amp; command2 || command3</div></pre></td></tr></table></figure></p>
<p>而且顺序通常不会变，因为一般来说，command2与command3会放置肯定可以执行成功的命令</p>
<h3 id="管道命令（pipe）"><a href="#管道命令（pipe）" class="headerlink" title="管道命令（pipe）"></a>管道命令（pipe）</h3><p>管道命令“|”仅能处理由前面一个命令传来的正确信息，也就是standard output的信息，对于standard error ouput并没有直接处理的能力</p>
<p>在每个管道后面接的第一个数据必定是“命令”，而且这个命令必须要能够接收standard output的数据才行，这样的命令才可以是“管道命令”，例如：less，more head，tail等</p>
<h4 id="选取命令：cut，grep"><a href="#选取命令：cut，grep" class="headerlink" title="选取命令：cut，grep"></a>选取命令：cut，grep</h4><h5 id="cut"><a href="#cut" class="headerlink" title="cut"></a>cut</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">cut -d &apos;分隔字符&apos; -f fields</div><div class="line">cut -c 字符范围</div><div class="line">参数：</div><div class="line">-d：后面接分隔字符，与-f一起使用</div><div class="line">-f：依据-d的分隔字符将一段信息切割成为数段，用-f取出第几段的意思</div><div class="line">-c：以字符的单位取出固定字符区间</div></pre></td></tr></table></figure>
<h5 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">grep [-acinv] [--color=auto] &apos;查找字符串&apos; filename</div><div class="line">参数：</div><div class="line">-a：将binary文件以text文件的方式查找数据</div><div class="line">-c：计算找到&apos;查找字符串&apos;的次数</div><div class="line">-i：忽略大小写</div><div class="line">-n：顺便输出行号</div><div class="line">-v：反向选择，即显示出没有&apos;查找字符串&apos;内容的那一行</div><div class="line">--color=auto：可以将找到的关键字部分加上颜色显示</div><div class="line"></div><div class="line">例子：将last当中有出现root那一行就取出来</div><div class="line">last | grep &apos;root&apos;</div><div class="line">----------------------------</div><div class="line">root     pts/0        210.21.9.252     Tue Dec 12 14:45   still logged in</div><div class="line">root     pts/0        210.21.9.252     Tue Dec 12 09:45 - 13:49  (04:03)</div><div class="line">root     pts/0        210.21.9.252     Mon Dec 11 15:05 - 19:19  (04:13)</div><div class="line"></div><div class="line">例子：将last当中没有出现root那一行就取出来</div><div class="line">last | grep -v &apos;root&apos;</div><div class="line">-----------------------------</div><div class="line">reboot   system boot  4.4.0-101-generi Fri Dec  8 20:22   still running</div><div class="line"></div><div class="line">wtmp begins Fri Dec  1 09:57:09 2017</div><div class="line"></div><div class="line">例子：在last的输出信息中，只要有root就取出，并且仅取第一列</div><div class="line">last | grep &apos;root&apos; | cut -d &apos; &apos; -f 1</div><div class="line">------------------------------</div><div class="line">root</div><div class="line">root</div><div class="line">root</div></pre></td></tr></table></figure>
<h3 id="排序命令：sort，wc，uniq"><a href="#排序命令：sort，wc，uniq" class="headerlink" title="排序命令：sort，wc，uniq"></a>排序命令：sort，wc，uniq</h3><h4 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">sort [-fbMnrtuk] [file or stdin]</div><div class="line">参数：</div><div class="line">-f：忽略大小写</div><div class="line">-b：忽略最前面的空格部分</div><div class="line">-M：以月份的名字来排序，例如JAN，DEC等的排序方法</div><div class="line">-n：使用“纯数字”进行排序（默认是以文字类型来排序的）</div><div class="line">-r：反向排序</div><div class="line">-u：就是uniq，相同的数据中，仅出现一行代表</div><div class="line">-t：分隔符，默认是用[tab]键来分隔</div><div class="line">-k：以那个区间（field）来进行排序的意思</div></pre></td></tr></table></figure>
<h4 id="uniq"><a href="#uniq" class="headerlink" title="uniq"></a>uniq</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">uniq [-ic]</div><div class="line">参数：</div><div class="line">-i：忽略大小写</div><div class="line">-c：进行计算</div></pre></td></tr></table></figure>
<h4 id="wc"><a href="#wc" class="headerlink" title="wc"></a>wc</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">wc [-lwm]</div><div class="line">参数：</div><div class="line">-l：仅列出行</div><div class="line">-w：仅列出多少字</div><div class="line">-m：多少字符</div><div class="line"></div><div class="line">例：取得这个月登录系统的总人次</div><div class="line">last | grep [a-zA-Z] | grep -v &apos;wtmp&apos; | wc -l</div><div class="line">#由于last会输出空白行和wtmp字样在最下面两行，所以利用grep取出非空白行以及wtmp那一行，再计算行数</div></pre></td></tr></table></figure>
<h3 id="双向重定向：tee"><a href="#双向重定向：tee" class="headerlink" title="双向重定向：tee"></a>双向重定向：tee</h3><p>tee会同时将数据流保存到文件并且输出到屏幕。而输出到屏幕的，其实就是stdout，可以让下个命令继续处理<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">tee [-a] file</div><div class="line">参数：</div><div class="line">-a：以累加的方式，将数据加入file中</div><div class="line"></div><div class="line">例子：将last的输出存一份到last.list文件中,同时屏幕也有输出</div><div class="line">last | tee last.list | more</div></pre></td></tr></table></figure></p>
<h3 id="字符转换命令：tr，col，join，paste，expand"><a href="#字符转换命令：tr，col，join，paste，expand" class="headerlink" title="字符转换命令：tr，col，join，paste，expand"></a>字符转换命令：tr，col，join，paste，expand</h3><h4 id="tr可以用来删除一段信息当中的文字，或者是进行文字信息的替换"><a href="#tr可以用来删除一段信息当中的文字，或者是进行文字信息的替换" class="headerlink" title="tr可以用来删除一段信息当中的文字，或者是进行文字信息的替换"></a>tr可以用来删除一段信息当中的文字，或者是进行文字信息的替换</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">tr [-ds] SET1 ...</div><div class="line">参数：</div><div class="line">-d：删除信息当中的SET1这个字符串</div><div class="line">-s：替换掉重复的字符</div><div class="line"></div><div class="line">例子：将/etc/passwd输出的信息中的冒号（:）删除</div><div class="line">cat /etc/passwd | tr -d &apos;:&apos;</div></pre></td></tr></table></figure>
<h4 id="col"><a href="#col" class="headerlink" title="col"></a>col</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">col -[xb]</div><div class="line">参数：</div><div class="line">-x：将tab键转换成对等的空格键</div><div class="line">-b：在文字内有反斜杠（/）时，仅保留反斜杠最后接的那个字符</div></pre></td></tr></table></figure>
<p>col经常被利用于将man page 转存为纯文本文件以方便查阅的功能</p>
<h4 id="join"><a href="#join" class="headerlink" title="join"></a>join</h4><p>主要用于处理两个文件之间的数据，而且，主要是将两个文件中有相同数据的那一行加在一起<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">join [-ti12] file1 file2</div><div class="line">参数：</div><div class="line">-t：join默认以空格符分隔数据，并且对比“第一个字段”的数据；如果两个文件相同，则将两条数据连成一行，且第一个字段放在第一个</div><div class="line">-i：忽略大小写</div><div class="line">-1:这个是数字1，代表第一个文件要用哪个字段来分析</div><div class="line">-2:代表第二个文件要用哪个字段来分析</div></pre></td></tr></table></figure></p>
<h4 id="paste"><a href="#paste" class="headerlink" title="paste"></a>paste</h4><p>相对于join必须要对比两个文件的数据相关性，paste就直接将两行贴在一起，且中间以[tab]键隔开而已<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">paster [-d] file1 file2</div><div class="line">参数：</div><div class="line">-d：后面可以接分隔符，默认是以[tab]来分隔的</div><div class="line">- ：如果file部分写成 - ，表示来自standard output的数据</div></pre></td></tr></table></figure></p>
<h4 id="expand"><a href="#expand" class="headerlink" title="expand"></a>expand</h4><p>将[tab]按键转成空格键<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">expand [-t] file</div><div class="line">参数：</div><div class="line">-t：后面可以接数字，一般来说，一个[tab]键可以用8个空格键替换，我们也可以自行定义一个[tab]按键代表多少个字符</div></pre></td></tr></table></figure></p>
<h3 id="切割命令：split"><a href="#切割命令：split" class="headerlink" title="切割命令：split"></a>切割命令：split</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">split [-bl] file PREFIX</div><div class="line">参数：</div><div class="line">-b：后面可接欲切割成的文件大小，可加单位，例如b，k，m等</div><div class="line">-l：以行数来切割</div><div class="line">PREFIX：代表前导符，可以作为切割文件的前导文字</div></pre></td></tr></table></figure>
<h3 id="参数代换：xargs"><a href="#参数代换：xargs" class="headerlink" title="参数代换：xargs"></a>参数代换：xargs</h3><p>xargs就是产生某个命令的参数的意思。xargs可以读入stdin的数据，并且以空格符或断行字符进行分辨，将stdin的数据分隔成为arguments<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">xargs [-0epn] command</div><div class="line">参数：</div><div class="line">-0: 如果输入的stdin含有特殊字符，例如`，\，空格键等字符时，这个参数可以将它还原成一般字符。这个参数可以用于特殊状态</div><div class="line">-e：这个是EOF（end of file）的意思，后面可以接一个字符串，当xgras分析到这个字符串时，就会停止继续工作</div><div class="line">-p：在执行每个命令的参数时，都会询问用户的意思</div><div class="line">-n：后面接次数，每次command执行时，要使用几个参数的意思</div></pre></td></tr></table></figure></p>
<h3 id="关于减号的用途"><a href="#关于减号的用途" class="headerlink" title="关于减号的用途"></a>关于减号的用途</h3><p>管道命令在bash的连续的处理程序中是相当重要的，在log file 的分析当中也是相当重要的一环。另外在管道命令中，经常会使用到前一个命令的stdout作为这次的stdin，某些命令需要用到文件名来进行处理时，该stdin与stdout可以利用减号“-”来替代，例如<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -cvf - /home | tar -xvf -</div></pre></td></tr></table></figure></p>
<p>上面的例子是说我将/home里面的文件打包，但打包的数据不是记录到文件，而是传送到sdtout；经过管道后，将<code>tar -cvf - /home</code>传送给后面的<code>tar -xvf -</code>。后面的这个-则是取用前一个命令的stdout，因此我们就不需要使用文件了</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://clq2owesome.github.io/2018/02/25/Linux/Linux账号管理与ACL权限设置/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LeoChan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LeoChan's 个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/25/Linux/Linux账号管理与ACL权限设置/" itemprop="url">Linux账号管理与ACL权限设置</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-02-25T10:09:45+08:00">
                2018-02-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="用户账号"><a href="#用户账号" class="headerlink" title="用户账号"></a>用户账号</h3><p>跟用户有关有两个非常重要的文件，一个是管理用户UID/GID重要参数的<code>/etc/passwd</code>，一个则是专门管理密码相关数据的<code>/etc/shadow</code></p>
<h4 id="etc-passwd文件结构"><a href="#etc-passwd文件结构" class="headerlink" title="/etc/passwd文件结构"></a>/etc/passwd文件结构</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">cat /etc/passwd</div><div class="line">root:x:0:0:root:/root:/bin/bash</div><div class="line">daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin</div><div class="line">bin:x:2:2:bin:/bin:/usr/sbin/nologin</div><div class="line">sys:x:3:3:sys:/dev:/usr/sbin/nologin</div><div class="line">sync:x:4:65534:sync:/bin:/bin/sync</div><div class="line">games:x:5:60:games:/usr/games:/usr/sbin/nologin</div><div class="line">man:x:6:12:man:/var/cache/man:/usr/sbin/nologin</div><div class="line">lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin</div><div class="line">mail:x:8:8:mail:/var/mail:/usr/sbin/nologin</div><div class="line">news:x:9:9:news:/var/spool/news:/usr/sbin/nologin</div><div class="line">uucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin</div><div class="line">proxy:x:13:13:proxy:/bin:/usr/sbin/nologin</div><div class="line">www-data:x:33:33:www-data:/var/www:/usr/sbin/nologin</div><div class="line">backup:x:34:34:backup:/var/backups:/usr/sbin/nologin</div><div class="line">......</div></pre></td></tr></table></figure>
<p>每一行都代表一个账号，有几行就代表有几个账号在你的系统中！不过需要特别留意的是，里面很多账号本来就是系统正常运行所必须要的，我们可以简称它为系统账号，例如bin，daemon，adm，nobody等，这些账号请不要随意删除</p>
<p>每一行使用“:”分隔开，共有七个字段，分别是：</p>
<ol>
<li>账号名称<br>就是账号，对应UID</li>
<li>密码<br>这个字段的密码数据放到<code>/etc/shadow</code>中，所以这里会显示一个x</li>
<li>UID<br>用户标识符</li>
</ol>
<table>
<thead>
<tr>
<th>ID范围</th>
<th>该ID用户特性</th>
</tr>
</thead>
<tbody>
<tr>
<td>0（系统管理员）</td>
<td>当UID是0时，代表这个账号是“系统管理员”，所以当你要让其他的账号名称也具有root的权限时，该账号的UID改为0即可。这也就是说，一个系统上面的系统管理员不见得只有root，不过，很不建议有多个账号的UID是0</td>
</tr>
<tr>
<td>1～499（系统账号）</td>
<td>保留给系统使用的ID，其实除了0之外，其他的UID权限与特性并没有不一样。默认500以下的数字让给系统作为保留账号只是一个习惯。<br>由于系统上面启动的服务希望使用较小的权限去运行，因此不希望用root的身份去执行这些服务，所以我们就得要提供这些运行中程序的所有者账号才行。这些系统账号通常是不可登录的。<br>根据系统账号的由来，通常系统账号又被分为两种：<br>1～99:由distributions自行创建的系统账号<br>100～499:若用户有系统账号的需求时，可以使用的账号UID</td>
</tr>
<tr>
<td>500～65535（可登录账号）</td>
<td>给一般用户用的。事实上，目前的Linux内核（2.6.x版）已经可以支持到2^32-1这么大的UID号码</td>
</tr>
</tbody>
</table>
<ol>
<li>GID<br>组ID</li>
<li>用户信息说明列<br>这个字段基本上并没有什么重要用途，只是用来解释这个账号的意义而已</li>
<li>主文件夹<br>这是用户的主文件夹。以上面为例，root的主文件夹是在<code>/root</code>中，所以当root登录之后，就会立刻跑到<code>/root</code>目录里面。<strong>默认的用户主文件夹在<code>/home/yourIDname</code>中</strong></li>
<li>shell<br>当用户登录系统后就会取得一个shell来与系统的内核通信以进行用户的操作任务。那为何默认shell会使用bash呢？就是在这个字段指定的。这里比较需要注意的是，有一个shell可以用来替代成让账号无法取得shell环境的登录操作，那就是<code>/sbin/nologin</code></li>
</ol>
<h4 id="etc-shadow文件结构"><a href="#etc-shadow文件结构" class="headerlink" title="/etc/shadow文件结构"></a>/etc/shadow文件结构</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">root@iZwz9hwmk5t4idn4oxa4okZ:/usr/share# cat /etc/shadow</div><div class="line">root:$6$rrwxtIVE$BIRVo2hygttfTZvNINNT3TL5Qbp.QaUC7px/jkC/nEp4gtluaVIUs56DzYxkZiE4lQefSw8OmX9Nn5lCQa2Sc.:17204:0:99999:7:::</div><div class="line">daemon:*:17001:0:99999:7:::</div><div class="line">bin:*:17001:0:99999:7:::</div><div class="line">sys:*:17001:0:99999:7:::</div><div class="line">sync:*:17001:0:99999:7:::</div><div class="line">games:*:17001:0:99999:7:::</div><div class="line">man:*:17001:0:99999:7:::</div><div class="line">lp:*:17001:0:99999:7:::</div><div class="line">mail:*:17001:0:99999:7:::</div><div class="line">news:*:17001:0:99999:7:::</div><div class="line">uucp:*:17001:0:99999:7:::</div><div class="line">proxy:*:17001:0:99999:7:::</div><div class="line">www-data:*:17001:0:99999:7:::</div><div class="line">backup:*:17001:0:99999:7:::</div></pre></td></tr></table></figure>
<p>shadow同样是以“:”分隔，有9个字段，分别是：</p>
<ol>
<li>账号名称<br>由于密码也需要与账号对应</li>
<li>密码     </li>
<li>最近更改密码的日期</li>
<li>密码不可被更改的天数（与第3个字段相比）</li>
<li>密码需要重新更改的天数（与第3个字段相比）</li>
<li>密码需要更改期限前的警告天数（与第5个字段相比）</li>
<li>密码过期后的账号宽限时间(密码失效日)（与第5个字段相比）</li>
<li>账号失效日期</li>
<li>保留</li>
</ol>
<h3 id="有效与初始用户组：groups，newgrp"><a href="#有效与初始用户组：groups，newgrp" class="headerlink" title="有效与初始用户组：groups，newgrp"></a>有效与初始用户组：groups，newgrp</h3><h6 id="etc-group文件结构"><a href="#etc-group文件结构" class="headerlink" title="/etc/group文件结构"></a>/etc/group文件结构</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"># cat /etc/group</div><div class="line">root:x:0:</div><div class="line">daemon:x:1:</div><div class="line">bin:x:2:</div><div class="line">sys:x:3:</div><div class="line">adm:x:4:syslog</div><div class="line">tty:x:5:</div><div class="line">ssh:x:113:</div><div class="line">ntp:x:114:</div><div class="line">lpadmin:x:115:</div><div class="line">stapdev:x:116:</div><div class="line">stapusr:x:117:</div><div class="line">stapsys:x:118:</div><div class="line">mysql:x:119:</div><div class="line">redis:x:120:</div><div class="line">activemq:x:121:</div><div class="line">tomcat7:x:122:tomcat7</div><div class="line">tomcat:x:1000:</div><div class="line">jenkins:x:123:</div><div class="line">git:x:1001:</div></pre></td></tr></table></figure>
<ol>
<li>用户组名称</li>
<li>用户组密码</li>
<li>GID</li>
<li>此用户组支持的账号名称</li>
</ol>
<h5 id="groups：有效与支持用户组的查看"><a href="#groups：有效与支持用户组的查看" class="headerlink" title="groups：有效与支持用户组的查看"></a>groups：有效与支持用户组的查看</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># groups</div><div class="line">root</div></pre></td></tr></table></figure>
<p>第一个输出的用户组即为有效用户组，通常有效用户组的作用是新建文件</p>
<h5 id="newgrp：有效用户组的切换"><a href="#newgrp：有效用户组的切换" class="headerlink" title="newgrp：有效用户组的切换"></a>newgrp：有效用户组的切换</h5><p>使用newgrp是有限制的，那就是你想要切换的用户组必须是你已经有支持的用户组<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">newgrp 用户组名称</div></pre></td></tr></table></figure></p>
<p>这个命令可以改变目前用户的有效用户组，而且是以另外一个新的shell来提供这个功能的，输入exit可以回到原本的shell<br>​<br>虽然用户的环境设置（如环境变量等其他数据）不会有影响，但是用户的“用户组权限”将会重新被计算</p>
<h3 id="账号管理"><a href="#账号管理" class="headerlink" title="账号管理"></a>账号管理</h3><h4 id="新增用户"><a href="#新增用户" class="headerlink" title="新增用户"></a>新增用户</h4><p>使用useradd来新建用户，密码的给予则使用passwd这个命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">useradd [-u UID] [-g 初始用户组] [-G 次要用户组] [-mM] </div><div class="line">[-c 说明栏] [-d 主文件夹绝对路径] [-s shell] 用户账户名</div><div class="line">-u：后面接的是UID，是一组数字，直接指定一个特定的UID给这个账号</div><div class="line">-g：后面接的那个用户组名就是初始用户组，该永辉组的GID会被放置到/etc/passwd的第四个字段内</div><div class="line">-G：后面接的组名则是这个账号还可以加入的用户组，这个参数会修改/etc/group内的相关数据</div><div class="line">-M：强制！不要创建用户主文件夹（系统账号默认值）</div><div class="line">-m：强制！要创建用户主文件夹（一般账号默认值）</div><div class="line">-c：这个就是/etc/passwd的第五列的说明内容，</div><div class="line">-d：指定某个目录成为主文件夹，而不要使用默认值，务必使用绝对路径</div><div class="line">-r：创建一个系统的账号，这个账号的UID会有限制</div><div class="line">-s：后面接一个shell，若没有指定则默认是/bin/bash</div><div class="line">-e：后面接一个日期，格式为“YYYY-MM-DD”，此选项可以写入shadow的第八字段，即账号失效日的设置选项</div><div class="line">-f：后面接shadow的第七字段选项，指定密码是否会失效，0为立刻失效，-1为永远不失效（密码只会过期而强制于登录时重新设置而已）</div><div class="line"></div><div class="line"></div><div class="line">例如：完全参考默认值新建一个用户，名称为test</div><div class="line"># useradd test</div><div class="line"># ll -d /home/test</div><div class="line">drwx------ 4 test test 4096 Feb 25 09:38 /home/test</div><div class="line"># 默认会创建用户主文件夹，且权限为700！这是重点！</div><div class="line"># 默认会创建一个与账号一模一样的用户组名</div></pre></td></tr></table></figure></p>
<p>CentOS这些默认值主要会帮我们处理几个项目：</p>
<ol>
<li>在/etc/passwd里面创建一行与账号相关的数据，包括创建UID/GID/主文件夹等</li>
<li>在/etc/shadow里面将此账号的密码相关参数填入，但是尚未有密码</li>
<li>在/etc/group里面加入一个与账号名称一模一样的组名</li>
<li>在/home下面创建一个与账号同名的目录作为用户主文件夹，且权限为700</li>
</ol>
<h5 id="useradd-参考文件"><a href="#useradd-参考文件" class="headerlink" title="useradd 参考文件"></a>useradd 参考文件</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># useradd -D</div><div class="line">GROUP=100 &lt;==默认的用户组</div><div class="line">HOME=/home &lt;==默认的主文件夹所在的目录</div><div class="line">INACTIVE=-1 &lt;==密码失效日，在shadow内的第7列</div><div class="line">EXPIRE= &lt;==账号失效日，在shadow内的第8列</div><div class="line">SHELL=/bin/sh &lt;==默认的shell</div><div class="line">SKEL=/etc/skel &lt;==用户主文件夹的内容数据参考目录</div><div class="line">CREATE_MAIL_SPOOL=no &lt;==是否主动帮用户创建邮件信箱</div></pre></td></tr></table></figure>
<p>这个数据其实是由/etc/default/useradd调用出来的</p>
<p>系统上面的GID为100即是users这个用户组，此设置项目指的就是让新设用户账号的初始用户组为users这个意思。但是我们知道CentOS上面并不是这样的，在CentOS上面默认的用户组为与账户名相同的用户组。这是因为针对用户组的角度两种不同的机制所致，这两种机制分别是：</p>
<ul>
<li><code>私有用户组机制</code>：系统会创建一个与账号一样的用户组给用户作为初始用户组。这种用户组的设置机制会比较有保密性，这是因为用户都有自己的用户组，而且主文件夹的权限将会设置为700（仅有自己可进入自己的主文件夹）。使用这种机制将不会参考GROUP=100这个设置值</li>
<li><code>公共用户组机制</code>：就是以GROUP=100这个设置值作为新建账号的初始用户组，因此每个账号都属于users这个用户组，且默认主文件夹通常的权限会是“drwxr-xr-x”,由于每个账号都属于users用户组，因此大家都可以互相分享主文件夹内的数据</li>
</ul>
<h5 id="设置用户密码：passwd"><a href="#设置用户密码：passwd" class="headerlink" title="设置用户密码：passwd"></a>设置用户密码：passwd</h5><p>使用useradd创建了账号之后，在默认的情况下，该账号是暂时被封锁的，也就是说，该账号是无法登录的，设置密码以后就可以正常的登录了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"># passwd [--stdin] &lt;==所有人均可使用来改自己的密码</div><div class="line"># passwd [-l] [-u] [--stdin] [-S] [-n 日数] [-x 日数] [-w 日数] [-i 日数] [-i 日期] 账号 &lt;==root功能</div><div class="line">参数：</div><div class="line">--stdin：可以通过来自前一个管道的数据，作为密码输入，对shell script有帮助！</div><div class="line">-l：是Lock的意思，会将/etc/shadow第二列最前面加上！使密码失效</div><div class="line">-u：与-l相对，是unlock的意思</div><div class="line">-S：列出密码相关参数，即shadow文件内的大部分信息</div><div class="line">-n：shadow的第4个字段，多久不可修改密码天数</div><div class="line">-x：shadow的第5个字段，多久内必须要改动密码</div><div class="line">-w：shadow的第6个字段，密码过期前的警告天数</div><div class="line">-i：shadow的第7个字段，密码失效日期</div></pre></td></tr></table></figure></p>
<p>要帮一般账号新建密码需要使用“passwd 账号”的格式，使用“passwd”表示修改自己的密码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># 使用standard input新建用户的密码</div><div class="line"># echo &quot;密码&quot; | passwd --stdin 账号</div></pre></td></tr></table></figure></p>
<h5 id="密码参数显示和修改功能：chage"><a href="#密码参数显示和修改功能：chage" class="headerlink" title="密码参数显示和修改功能：chage"></a>密码参数显示和修改功能：chage</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"># chage [-ldEImMW] 账号名</div><div class="line">参数：</div><div class="line">-l：列出该账号的详细密码参数</div><div class="line">-d：后面接日期，修改shadow的第三字段（最近一次更改密码的日期），格式为YYYY-MM-DD</div><div class="line">-E：后面接日期，修改shadow的第八字段（账号失效日）</div><div class="line">-I：后面接日期，修改shadow的第七字段（密码失效日期）</div><div class="line">-m：后面接日期，修改shadow的第四字段（密码最短保留天数）</div><div class="line">-M：后面接日期，修改shadow的第五字段（密码多久需要进行更改）</div><div class="line">-W：后面接日期，修改shadow的第六字段（密码过期前警告日期）</div></pre></td></tr></table></figure>
<p>让用户在第一次登录时强制他们一定要更改密码后才能够使用系统资源<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># useradd agetest</div><div class="line"># echo &quot;agetest&quot; | passwd --stdin agetest</div><div class="line"># chage -d 0 agetest</div></pre></td></tr></table></figure></p>
<h5 id="用户调整：usermod"><a href="#用户调整：usermod" class="headerlink" title="用户调整：usermod"></a>用户调整：usermod</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"># usermod [-cdegGlsuLU] username</div><div class="line">参数：</div><div class="line">-c：后面接账号的说明，即/etc/passwd 第五列的说明</div><div class="line">-d：修改账户的主文件夹</div><div class="line">-e：修改账号失效日期，格式为YYYY-MM-DD</div><div class="line">-f：修改密码失效日期</div><div class="line">-g：修改用户初始化用户组</div><div class="line">-G：修改用户次要用户组</div><div class="line">-a：与-G合用可增加次要用户组的支持而非设置</div><div class="line">-l：修改账号名称</div><div class="line">-s：修改shell</div><div class="line">-u：修改UID数字</div><div class="line">-L：暂时将用户的密码冻结，让他无法登录，其实仅改/etc/shadow的密码</div><div class="line">-U：将/etc/shadow 密码列的!去掉</div></pre></td></tr></table></figure>
<h5 id="删除用户：userdel"><a href="#删除用户：userdel" class="headerlink" title="删除用户：userdel"></a>删除用户：userdel</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># userdel [-r] username</div><div class="line">参数：</div><div class="line">-r：连同用户的主文件夹也一起删除</div></pre></td></tr></table></figure>
<h3 id="用户功能"><a href="#用户功能" class="headerlink" title="用户功能"></a>用户功能</h3><h4 id="查阅用户相关信息：finger"><a href="#查阅用户相关信息：finger" class="headerlink" title="查阅用户相关信息：finger"></a>查阅用户相关信息：finger</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"># finger [-s] username</div><div class="line">参数：</div><div class="line">-s：仅列出用户的账号，全名，终端机代号与登录时间等</div><div class="line">-m：列出与后面接的账号相同者，而不是利用部分对比（包括全名部分）</div><div class="line"></div><div class="line">例子：查看目前系统上面登录的用户与登录时间</div><div class="line"># finger</div><div class="line">Login     Name       Tty      Idle  Login Time   Office     Office Phone</div><div class="line">root      root      *pts/0          Jan  3 09:56 (210.21.9.252)</div></pre></td></tr></table></figure>
<h4 id="修改个人属性：chfn"><a href="#修改个人属性：chfn" class="headerlink" title="修改个人属性：chfn"></a>修改个人属性：chfn</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># chfn [-foph] [账号名]</div><div class="line">参数：</div><div class="line">-f：后面接完整的大名</div><div class="line">-o：办公室房间号码</div><div class="line">-p：办公室电话号码</div><div class="line">-h：家里的电话号码</div></pre></td></tr></table></figure>
<h4 id="修改shell：chsh"><a href="#修改shell：chsh" class="headerlink" title="修改shell：chsh"></a>修改shell：chsh</h4><p>change shell<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># chsh [-ls]</div><div class="line">参数：</div><div class="line">-l：列出目前系统上面可用的shell，其实就是/etc/shells的内容</div><div class="line">-s：设置修改自己的shell</div></pre></td></tr></table></figure></p>
<h4 id="查询某人或自己的相关UID-GID等信息"><a href="#查询某人或自己的相关UID-GID等信息" class="headerlink" title="查询某人或自己的相关UID/GID等信息"></a>查询某人或自己的相关UID/GID等信息</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># id [username]</div><div class="line"></div><div class="line"># id</div><div class="line">uid=0(root) gid=0(root) groups=0(root)</div></pre></td></tr></table></figure>
<h3 id="新增和删除用户组"><a href="#新增和删除用户组" class="headerlink" title="新增和删除用户组"></a>新增和删除用户组</h3><h4 id="groupadd"><a href="#groupadd" class="headerlink" title="groupadd"></a>groupadd</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"># groupadd [-g gid] [-r] 用户组名</div><div class="line">参数：</div><div class="line">-g：后面接某个特定的GID，用来直接给予某个GID</div><div class="line">-r：新建系统用户组。与/etc/login.defs 内的GID_MIN 有关</div><div class="line"></div><div class="line">例如：</div><div class="line"># groupadd group1</div><div class="line"># grep group1 /etc/group /etc/gshadow</div><div class="line">/etc/group:group1:x702:</div><div class="line">/etc/gshadow:group1:!::</div></pre></td></tr></table></figure>
<h4 id="groupmod"><a href="#groupmod" class="headerlink" title="groupmod"></a>groupmod</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># groupmod [-g gid] [-n group_name] 用户组名</div><div class="line">参数：</div><div class="line">-g：修改既有的GID数字</div><div class="line">-n：修改既有的组名</div></pre></td></tr></table></figure>
<h4 id="groupdel"><a href="#groupdel" class="headerlink" title="groupdel"></a>groupdel</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># groupdel [groupname]</div></pre></td></tr></table></figure>
<h4 id="用户组管理员功能：gpasswd"><a href="#用户组管理员功能：gpasswd" class="headerlink" title="用户组管理员功能：gpasswd"></a>用户组管理员功能：gpasswd</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"># 关于系统管理员（root）做的动作</div><div class="line"># gpasswd groupname</div><div class="line"># gpasswd [-A user1,...] [-M user3,...] groupname</div><div class="line"># gpasswd [-rR] groupname</div><div class="line">参数：</div><div class="line">若没有任何参数时，表示给予groupname一个密码（/etc/gshadow）</div><div class="line">-A：将groupname的主控权交由后面的用户管理（该用户组的管理员）</div><div class="line">-M：将某些账号加入这个用户组当中</div><div class="line">-r：将groupname的密码删除</div><div class="line">-R：让groupname的密码栏失效</div><div class="line"></div><div class="line"># 关于用户组管理员（group administrator）做到操作：</div><div class="line"># gpasswd [-ad] user groupname</div><div class="line">参数：</div><div class="line">-a：将某位用户加入到groupname这个用户组当中</div><div class="line">-d：将某位用户删除出groupname这个用户组当中</div><div class="line"></div><div class="line">例如：新建一个新用户组，并交有test管理</div><div class="line"># groupadd testgroup</div><div class="line"># gpasswd -A test testgroup</div></pre></td></tr></table></figure>
<h3 id="主机的具体权限规划：ACL的使用"><a href="#主机的具体权限规划：ACL的使用" class="headerlink" title="主机的具体权限规划：ACL的使用"></a>主机的具体权限规划：ACL的使用</h3><p>ACL是Access Control List的缩写，主要的目的是提供传统的owner，grooup，others的read，write，execute权限之外的具体权限设置。ACL可以针对单一用户，单一文件或目录来进行r，w，x的权限设置，对于需要特殊权限的使用状况非常有帮助</p>
<p>ACL主要针对以下几个方面来控制权限：</p>
<ul>
<li>用户（user）：可以针对用户来设置权限</li>
<li>用户组（group）：针对用户组来设置其权限</li>
<li>默认属性（mask）：还可以在该目录下在新建文件/目录时设置新数据的默认权限</li>
</ul>
<h4 id="ACL的设置技巧：getfacl，setfacl"><a href="#ACL的设置技巧：getfacl，setfacl" class="headerlink" title="ACL的设置技巧：getfacl，setfacl"></a>ACL的设置技巧：getfacl，setfacl</h4><h5 id="设置某个目录-文件的ACL规定-setfacl"><a href="#设置某个目录-文件的ACL规定-setfacl" class="headerlink" title="设置某个目录/文件的ACL规定:setfacl"></a>设置某个目录/文件的ACL规定:setfacl</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"># setfacl [-bkRd] [&#123;-m|-x&#125; acl参数] 目标文件名</div><div class="line">参数：</div><div class="line">-m：设置后续的acl参数给文件使用，不可与-x使用</div><div class="line">-x：删除后续的acl参数，不可与-m合用</div><div class="line">-b：删除所有的ACL设置参数</div><div class="line">-k：删除默认的ACL参数</div><div class="line">-R：递归设置acl，亦即包括子目录都会被设置起来</div><div class="line">-d：设置默认acl参数!只对目录有效，在该目录新建的数据会引用此默认值</div><div class="line"></div><div class="line"></div><div class="line"># 1.针对单一用户的设置方式：</div><div class="line"># 设置规定：“u:[用户账号列表]:[rwx]”</div><div class="line"># touch acl_test1</div><div class="line"># ll acl_test1</div><div class="line">-rw-r--r-- 1 root root 0 Jan  3 11:08 acl_test1</div><div class="line"># setfacl -m u:test:rx acl_test1</div><div class="line"># ll acl_test1</div><div class="line">-rw-r-xr--+ 1 root root 0 Jan  3 11:08 acl_test1*</div><div class="line"># 权限部分多了个+，且与原本的权限（644）看起来区别很大</div><div class="line"></div><div class="line"># 2.针对特定用户组的方式</div><div class="line"># 设置规范“g:[用户组列表]:[rwx]”</div><div class="line"></div><div class="line"># 3.针对有效权限mask的设置方式</div><div class="line"># 设置规范“m:[rwx]”</div><div class="line"># setfacl -m m:r acl_test1</div><div class="line"># getfacl acl_test1</div><div class="line"># file: acl_test1</div><div class="line"># owner: root</div><div class="line"># group: root</div><div class="line">user::rw-</div><div class="line">user:test:r-x			#effective:r--</div><div class="line">group::r--</div><div class="line">mask::r--</div><div class="line">other::r--</div><div class="line"># test仅具有r的权限而已，并不存在x权限，这就是mask功能，我们可以通过mask来规定最大允许的权限</div></pre></td></tr></table></figure>
<h5 id="取得某个目录-文件的ACL设置项目-getfacl"><a href="#取得某个目录-文件的ACL设置项目-getfacl" class="headerlink" title="取得某个目录/文件的ACL设置项目:getfacl"></a>取得某个目录/文件的ACL设置项目:getfacl</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"># getfacl filename</div><div class="line"></div><div class="line"># getfacl acl_test1</div><div class="line"># file: acl_test1   &lt;== 文件名</div><div class="line"># owner: root   &lt;== 文件所有者，即ll看到的第三用户字段</div><div class="line"># group: root   &lt;== 此文件所属用户组，即ll看到的第四用户字段</div><div class="line">user::rw-   &lt;== 用户列表栏空的，代表文件所有者的权限</div><div class="line">user:test:r-x   &lt;== 针对test的权限设置为rx，与所有者不同</div><div class="line">group::r--  &lt;== 文件用户组的权限设置仅为r</div><div class="line">mask::r-x   &lt;== 此文件默认的有效权限（mask）</div><div class="line">other::r--  &lt;== 其他人拥有的权限</div></pre></td></tr></table></figure>
<p>显示的数据前面加上#的，代表这个文件的默认属性，包括文件名，文件所有者与文件所属用户组。下面出现的user，group，mask，other则是属于不用用户，用户组与有效权限的设置值</p>
<h3 id="用户身份切换"><a href="#用户身份切换" class="headerlink" title="用户身份切换"></a>用户身份切换</h3><p>一般用户转变身份成为root：</p>
<ul>
<li>以“su -”直接将身份变成root即可，但是这个命令却需要root的密码，也就是说，如果你要以su变成root 的话，你的一般用户就必须要有root的密码才行</li>
<li>以“sudo命令”执行root的命令串，由于sudo需要事先设置妥当，且sudo需要输入用户自己的密码，因此多人共管同一台主机时，sudo要比su来的好，至少root密码不会流出去</li>
</ul>
<h4 id="su"><a href="#su" class="headerlink" title="su"></a>su</h4><p>su是最简单的身份切换命令了，它可以进行任何身份的切换<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># su [-lm] [-c 命令] [username]</div><div class="line">参数：</div><div class="line">- ：单纯使用 - 如“su -”，代表使用login-shell的变量文件读取方式来登录系统</div><div class="line">-l：与 - 类似，但后面需要加欲切换的用户账号。也是login-shell的方式</div><div class="line">-m：-m与-p是一样的，表示使用目前的环境设置，而不读取新用户的配置文件</div><div class="line">-c：仅进行一次命令，所以-c后面可以加上命令</div><div class="line"></div><div class="line">exit退出su环境</div></pre></td></tr></table></figure></p>
<p>单纯使用“su”切换成为root身份，读取的变量设置方式为non-login shell方式，这种方式下很多原本的变量不会被改变，还是原来用户的环境变量，如PATH</p>
<h4 id="sudo"><a href="#sudo" class="headerlink" title="sudo"></a>sudo</h4><p>sudo的执行仅需要自己的密码即可，甚至可以设置不需要密码也可执行！并非所有人都能够执行sudo，而是仅有/etc/sudoers内的用户才能够执行sudo这个命令，系统一开始默认仅有root可执行sudo<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># sudo [-b] [-u 新用户账号]</div><div class="line">参数：</div><div class="line">-b：将后续的命令让系统自动执行，而不与目前的shell产生影响</div><div class="line">-u：后面可以接欲切换的用户，若无此项则代表切换身份为root</div></pre></td></tr></table></figure></p>
<p>sudo的执行流程：</p>
<ol>
<li>当用户执行sudo时，系统于/etc/sudoers文件中查找该用户是否有执行sudo的权限</li>
<li>若用户具有可执行sudo的权限后，便让用户输入用户自己的密码来确认</li>
<li>若密码输入成功，便开始进行sudo后续接的命令（但root执行sudo时不需要输入密码）</li>
<li>若欲切换的身份与执行者的身份相同，那也不需要输入密码</li>
</ol>
<h5 id="visudo"><a href="#visudo" class="headerlink" title="visudo"></a>visudo</h5><p>除了root之外的其他账号，若想要使用sudo执行属于root的权限命令，则root需要先用visudo去修改/etc/sudoers，让账号能够使用全部或部分的root命令功能</p>
<h6 id="单一用户可进行root所有命令与sudoers文件语法"><a href="#单一用户可进行root所有命令与sudoers文件语法" class="headerlink" title="单一用户可进行root所有命令与sudoers文件语法"></a>单一用户可进行root所有命令与sudoers文件语法</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># 假设要让test这个账号可以使用root的任何命令</div><div class="line"># visudo</div><div class="line">...(前面省略)...</div><div class="line">root ALL=(ALL)   ALL &lt;==找到这一行，大约在76行左右</div><div class="line">test ALL=(ALL)   ALL &lt;==这一行是你要新增的</div><div class="line">...(后面省略)...</div></pre></td></tr></table></figure>
<p>其实visudo只是利用vi将/etc/sudoers文件调用出来进行修改而已，数据格式为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">用户账号  登录者的来源主机名=（可切换的身份） 可执行的命令</div><div class="line">root         ALL=(ALL)                       ALL &lt;==这是默认值</div></pre></td></tr></table></figure></p>
<p>4个参数的意义：</p>
<ul>
<li><code>用户账号</code>：系统的哪个账号可以使用sudo这个命令，默认为root这个账号</li>
<li><code>登录者的来源主机名</code>：这个账号由哪台主机连接到本Linux主机，意思是这个账号可能是由哪一台网络主机连接过来的，这个设置值可以指定客户端计算机（信任用户的意思）。默认值root可来自任何一台网络主机</li>
<li><code>可切换的身份</code>：这个账号可以切换成什么身份来执行后续的命令，默认root可以切换成任何人</li>
<li><code>可执行命令</code>：这个命令请务必使用绝对路径编写。默认root可以切换任何身份且进行任何命令    </li>
</ul>
<p><strong>注意：那个ALL是特殊关键字，代表任何身份，主机或命令的意思</strong></p>
<h6 id="利用用户组以及免密码的功能处理visudo"><a href="#利用用户组以及免密码的功能处理visudo" class="headerlink" title="利用用户组以及免密码的功能处理visudo"></a>利用用户组以及免密码的功能处理visudo</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"># visudo</div><div class="line">...(前面省略)...</div><div class="line">%wheel   ALL=(ALL) ALL &lt;== 大约在84行左右，请将这行的#去掉</div><div class="line"># 在最左边加上%，代表后面接的是一个“用户组”之意</div><div class="line">...(后面省略)...</div><div class="line"></div><div class="line"># usermod -a -G wheel test &lt;== 将test加入wheel的支持，现在test用户就可以使用sudo命令啦</div></pre></td></tr></table></figure>
<h6 id="设置免密码即可使用sudo"><a href="#设置免密码即可使用sudo" class="headerlink" title="设置免密码即可使用sudo"></a>设置免密码即可使用sudo</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">...(前面省略)...</div><div class="line">%wheel   ALL=(ALL) NOPASSWD:ALL </div><div class="line"># 在最左边加上%，代表后面接的是一个“用户组”之意</div><div class="line">...(后面省略)...</div></pre></td></tr></table></figure>
<h6 id="有限制的命令操作"><a href="#有限制的命令操作" class="headerlink" title="有限制的命令操作"></a>有限制的命令操作</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># visudo </div><div class="line">myuser1 ALL=(root) /usr/bin/passwd &lt;== 最后命令务必用绝对路径</div></pre></td></tr></table></figure>
<h6 id="限制用户的命令参数"><a href="#限制用户的命令参数" class="headerlink" title="限制用户的命令参数"></a>限制用户的命令参数</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># visudo</div><div class="line">myuser1 ALL=(root) !/usr/bin/passwd, /usr/bin/passwd [A-Za-z]*, !/usr/bin/passwd root</div><div class="line"># 加上!代表“不可执行的意思”，因此上面这一行变成可以执行“passwd 任意字符”，但是“passwd”与“passwd root”这两个命令例外</div></pre></td></tr></table></figure>
<h6 id="通过别名设置visudo"><a href="#通过别名设置visudo" class="headerlink" title="通过别名设置visudo"></a>通过别名设置visudo</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># visudo</div><div class="line">User_Alias ADMPW = test1, test2, test3</div><div class="line">Cmnd_Alias ADMPWCOM = !/usr/bin/passwd, /usr/bin/passwd [A-Za-z]*, !/usr/bin/passwd root </div><div class="line">ADMPW ALL=(root) ADMPWCOM</div></pre></td></tr></table></figure>
<p>通过<code>User_Alias</code>新建一个新账号，新账号的名称一定要用大写字符来处理，包括<code>Cmnd_Alias（命令别名）</code>，<code>Host_Alias（来源主机名）</code>都需要使用大写字符</p>
<h6 id="sudo时间间隔"><a href="#sudo时间间隔" class="headerlink" title="sudo时间间隔"></a>sudo时间间隔</h6><p>如果两次sudo操作的间隔超过5分钟，那就得要重新输入一次你的密码了</p>
<h6 id="sudo搭配su的使用方式"><a href="#sudo搭配su的使用方式" class="headerlink" title="sudo搭配su的使用方式"></a>sudo搭配su的使用方式</h6><p>很多时候我们需要大量执行很多root的工作，所以一直使用sudo觉的很烦，那有没有办法使用sudo搭配su，一口气将身份转成root，而且还使用用户自己的密码来变成root呢？<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># visudo </div><div class="line">User_Alias ADMINS = test1, test2, test3</div><div class="line">ADMINS ALL=(root) /bin/su -</div></pre></td></tr></table></figure></p>
<p>接下来，上述的test1，test2，test3三个用户，只要输入“sudo su -”并且输入自己的密码后，立刻变成root身份，不但root密码不会外泄，用户的管理也变的非常方便</p>
<h3 id="用户的特殊shell与PAM模块"><a href="#用户的特殊shell与PAM模块" class="headerlink" title="用户的特殊shell与PAM模块"></a>用户的特殊shell与PAM模块</h3><h4 id="特殊的shell，-sbin-nologin"><a href="#特殊的shell，-sbin-nologin" class="headerlink" title="特殊的shell，/sbin/nologin"></a>特殊的shell，/sbin/nologin</h4><p>一般地，系统账号是不能登录的，系统账号的shell就是使用/sbin/nologin，如果账户使用了/sbin/nologin，即使有了密码，也是不能登录系统的，但是可以使用系统资源</p>
<h4 id="PAM模块简介"><a href="#PAM模块简介" class="headerlink" title="PAM模块简介"></a>PAM模块简介</h4><p>PAM可以说是一套应用程序编程接口（Application Programming Interface API），它提供了一连串的验证机制，只要用户将验证阶段的需求告知PAM后，PAM就能够回报用户验证的结果（成功或失败）</p>
<p>PAM通过一个与程序相同文件名的配置文件来进行一连串的认证分析需求。我们同样以passwd这个命令调用PAM。当你执行passwd后，这个程序调用PAM的流程是：</p>
<ol>
<li>用户开始执行/usr/bin/passwd这支程序，并输入密码</li>
<li>passwd调用PAM模块进行验证</li>
<li>PAM模块会到/etc/pam.d/中找寻与程序（passwd）同名的配置文件</li>
<li>依据/etc/pam.d/passwd内的设置，引用相关的PAM模块逐步进行验证分析</li>
<li>将验证结果（成功，失败以及其他信息）回传给passwd这个程序</li>
<li>passwd这支程序会根据PAM回传的结果决定下一个操作（重新输入密码或者通过验证）</li>
</ol>
<h6 id="etc-pam-d-passwd"><a href="#etc-pam-d-passwd" class="headerlink" title="/etc/pam.d/passwd"></a>/etc/pam.d/passwd</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># cat /etc/pam.d/passwd</div><div class="line">#%PAM-1.0 </div><div class="line">auth include system-auth &lt;==每一行都是一个验证过程</div><div class="line">account include system-auth</div><div class="line">password include system-auth</div><div class="line">验证类型 控制标准 PAM模块与该模块参数</div></pre></td></tr></table></figure>
<h3 id="查询用户：w，who，last，lastlog"><a href="#查询用户：w，who，last，lastlog" class="headerlink" title="查询用户：w，who，last，lastlog"></a>查询用户：w，who，last，lastlog</h3><h4 id="查询目前已登录在系统上面的用户-w-或者-who"><a href="#查询目前已登录在系统上面的用户-w-或者-who" class="headerlink" title="查询目前已登录在系统上面的用户:w 或者 who"></a>查询目前已登录在系统上面的用户:w 或者 who</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># w</div><div class="line"> 17:36:26 up 26 days,  5:13,  1 user,  load average: 0.00, 0.00, 0.00</div><div class="line">USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT</div><div class="line">root     pts/0    210.21.9.252     14:20    2.00s  0.03s  0.00s w</div><div class="line"># 第一行显示目前的时间，开机（up）多久，几个用户在系统上的平均负载等</div><div class="line"></div><div class="line"># who</div><div class="line">root     pts/0        2018-01-03 14:20 (210.21.9.252)</div></pre></td></tr></table></figure>
<h4 id="查看每个账号的最近登录时间，则可以使用lastlog这个命令。lastlog会去读取-var-log-lastlog文件，结果将数据输出"><a href="#查看每个账号的最近登录时间，则可以使用lastlog这个命令。lastlog会去读取-var-log-lastlog文件，结果将数据输出" class="headerlink" title="查看每个账号的最近登录时间，则可以使用lastlog这个命令。lastlog会去读取/var/log/lastlog文件，结果将数据输出"></a>查看每个账号的最近登录时间，则可以使用lastlog这个命令。lastlog会去读取/var/log/lastlog文件，结果将数据输出</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"># lastlog</div><div class="line">Username         Port     From             Latest</div><div class="line">root             pts/0    210.21.9.252     Wed Jan  3 14:20:31 +0800 2018</div><div class="line">daemon                                     **Never logged in**</div><div class="line">bin                                        **Never logged in**</div><div class="line">sys                                        **Never logged in**</div><div class="line">sync                                       **Never logged in**</div><div class="line">games                                      **Never logged in**</div><div class="line">man                                        **Never logged in**</div></pre></td></tr></table></figure>
<h3 id="用户对谈：write，mesg，wall"><a href="#用户对谈：write，mesg，wall" class="headerlink" title="用户对谈：write，mesg，wall"></a>用户对谈：write，mesg，wall</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"># write 用户账号 [用户所在终端接口]</div><div class="line"></div><div class="line"># who</div><div class="line">root     pts/0        2018-01-03 14:20 (210.21.9.252)</div><div class="line">test     pts/1        2018-01-03 17:47 (210.21.9.252) &lt;== test用户在线</div><div class="line"></div><div class="line"># root向test发送消息</div><div class="line"># write test pts/1</div><div class="line">write: write: you have write permission turned off.</div><div class="line"></div><div class="line">fuck</div><div class="line"></div><div class="line"># test接收到的消息</div><div class="line">Message from root@iZwz9hwmk5t4idn4oxa4okZ on pts/0 at 17:49 ...</div><div class="line">fuck</div><div class="line">EOF</div><div class="line"></div><div class="line"># test不想接收任何信息，但是对于root传来的信息没有任何抵抗力</div><div class="line">mesg n</div><div class="line">$ mesg</div><div class="line">is n</div><div class="line"></div><div class="line"># 广播</div><div class="line"># wall &quot;this is a message&quot;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://clq2owesome.github.io/2018/02/25/Linux/jenkins安装和启动/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LeoChan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LeoChan's 个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/25/Linux/jenkins安装和启动/" itemprop="url">jenkins安装和启动</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-02-25T10:09:45+08:00">
                2018-02-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>多种安装方式，参考<a href="https://www.ilanni.com/?p=12545" target="_blank" rel="external">https://www.ilanni.com/?p=12545</a> 或者 参考官网</p>
<p><a href="http://blog.csdn.net/wh211212/article/details/53644980" target="_blank" rel="external">http://blog.csdn.net/wh211212/article/details/53644980</a></p>
<h3 id="运行和停止Jenkins"><a href="#运行和停止Jenkins" class="headerlink" title="运行和停止Jenkins"></a>运行和停止Jenkins</h3><p>普通启动，关闭进程后jenkins关闭<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"># 启动Jenkins</div><div class="line">java -jar /usr/share/jenkins/jenkins.war     </div><div class="line"></div><div class="line"># 停止Jenkins</div><div class="line">按Ctrl+C 组合键</div></pre></td></tr></table></figure></p>
<p>后台启动，指定端口，指定log文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">参数：</div><div class="line">--httpPort：指定端口</div><div class="line">--daemon：后台启动</div><div class="line">--logfile：指定jenkins启动日志路径</div><div class="line"></div><div class="line">例一：</div><div class="line">java -jar /usr/share/jenkins/jenkins.war --httpPort=8081 --daemon</div><div class="line"></div><div class="line"></div><div class="line">例二：</div><div class="line">mkdir /var/log/jenkins</div><div class="line">java -jar /usr/local/src/jenkins.war --logfile=/var/log/jenkins/jenkins.log</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://clq2owesome.github.io/2018/02/25/Linux/shell 变量/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LeoChan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LeoChan's 个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/25/Linux/shell 变量/" itemprop="url">shell 变量</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-02-25T10:09:45+08:00">
                2018-02-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="什么是变量"><a href="#什么是变量" class="headerlink" title="什么是变量"></a>什么是变量</h3><p>变量就是以一组文件或符号等，来替代一些设置或者是一串保留的数据</p>
<p>可以使用<code>echo</code>这个命令来显示变量，但是变量在被显示时，前面必须要加上字符<code>$</code>或者以<code>${变量}</code>的方式来显示<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">echo $PATH</div><div class="line">echo $&#123;PATH&#125;</div></pre></td></tr></table></figure></p>
<h3 id="变量的设置规则"><a href="#变量的设置规则" class="headerlink" title="变量的设置规则"></a>变量的设置规则</h3><p>在bash当中，当一个变量名称尚未被设置时，默认的内容是“空”的，另外变量在设置时，还是需要符合某些规定的，否则会设置失败</p>
<ol>
<li><p>变量与变量内容以一个等号“=”来连接</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">myname=VBird</div></pre></td></tr></table></figure>
</li>
<li><p>等号两边不能直接接空格符，如下显示是错误的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">myname= VBird</div><div class="line">myname=VBird Tsai</div></pre></td></tr></table></figure>
</li>
<li><p>变量的名称只能是英文字母与数字，但是开头字符不能是数字，如下为错误的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">2myname=VBird</div></pre></td></tr></table></figure>
</li>
<li><p>变量的内容若有空格符号可使用双引号””或者单引号’’将变量内容结合起来，但是</p>
<ul>
<li><p>双引号内的特殊字符如$等，可以保持原本的特性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var=&quot;lang is $LANG&quot;</div><div class="line">echo $var 输出为:lang is zh_CN.UTF-8</div></pre></td></tr></table></figure>
</li>
<li><p>单引号内的特殊字符则仅为一般字符（纯文本）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var=&apos;lang is $LANG&apos;</div><div class="line">echo $var 输出为:lang is $LANG</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>可用转义字符“\”将特殊符号（如[Enter],$,空格符,! 等）变为一般字符</p>
</li>
<li><p>在一串命令中，还需要通过其他的命令提供信息，可以使用反单引号“`命令`”或“$(命令)”。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">test=$(echo $PATH)</div><div class="line">echo $test 输出PATH的内容</div></pre></td></tr></table></figure>
</li>
<li><p>若该变量为了增加变量内容时，则可使用“$变量名称”或“${变量}”累加内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">PATH=&quot;$PATH&quot;:/home/bin</div></pre></td></tr></table></figure>
</li>
<li><p>若该变量需要在其他子进程执行，则需要以<code>export</code>来使变量变成环境变量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">export PATH</div></pre></td></tr></table></figure>
</li>
<li><p>通常大写字符为系统默认变量，自行设置变量可以使用小写字符，方便判断</p>
</li>
<li>取消变量的方法为使用“unset变量名称”<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">unset myname</div></pre></td></tr></table></figure>
</li>
</ol>
<p>注意：在一串命令中，在反单引号（`）之内的命令将会被先执行，而其执行出来的结果将作为外部的输入信息</p>
<h3 id="环境变量的功能"><a href="#环境变量的功能" class="headerlink" title="环境变量的功能"></a>环境变量的功能</h3><h4 id="用env查看环境变量与常见环境变量说明"><a href="#用env查看环境变量与常见环境变量说明" class="headerlink" title="用env查看环境变量与常见环境变量说明"></a>用env查看环境变量与常见环境变量说明</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">env</div><div class="line">-------------------------------</div><div class="line">TERM_PROGRAM=Apple_Terminal</div><div class="line">SHELL=/bin/bash</div><div class="line">TERM=xterm-256color</div><div class="line">CATALINA_HOME=/Users/chenliqiang/software/apache-tomcat-test</div><div class="line">TMPDIR=/var/folders/mx/gn0s9skj0jzgxdzn68wtj8_h0000gn/T/</div><div class="line">Apple_PubSub_Socket_Render=/private/tmp/com.apple.launchd.ElGvcw57Yf/Render</div><div class="line">TERM_PROGRAM_VERSION=400</div><div class="line">TERM_SESSION_ID=60C62703-2490-444F-86A8-3C0827EC0DF0</div><div class="line">USER=chenliqiang</div><div class="line">SSH_AUTH_SOCK=/private/tmp/com.apple.launchd.jD69alTKH6/Listeners</div><div class="line">MAVEN_HOME=/usr/local/Cellar/maven/3.5.2</div><div class="line">PATH=/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/bin:/usr/local/Cellar/maven/3.5.2/bin:/Users/chenliqiang/software/apache-tomcat-test/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin</div><div class="line">PWD=/Users/chenliqiang</div><div class="line">JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home</div><div class="line">LANG=zh_CN.UTF-8</div><div class="line">XPC_FLAGS=0x0</div><div class="line">XPC_SERVICE_NAME=0</div><div class="line">SHLVL=1</div><div class="line">HOME=/Users/chenliqiang</div><div class="line">LOGNAME=chenliqiang</div><div class="line">CLASSPATH=.:/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/lib/dt.jar:/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/lib/tools.jar:/Users/chenliqiang/software/apache-tomcat-test/lib</div><div class="line">_=/usr/bin/env</div></pre></td></tr></table></figure>
<h4 id="查看所有变量（含环境变量和自定义变量）（set）"><a href="#查看所有变量（含环境变量和自定义变量）（set）" class="headerlink" title="查看所有变量（含环境变量和自定义变量）（set）"></a>查看所有变量（含环境变量和自定义变量）（set）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">set</div></pre></td></tr></table></figure>
<h3 id="变量键盘的读取，数组与声明（read，array，declare）"><a href="#变量键盘的读取，数组与声明（read，array，declare）" class="headerlink" title="变量键盘的读取，数组与声明（read，array，declare）"></a>变量键盘的读取，数组与声明（read，array，declare）</h3><h4 id="read"><a href="#read" class="headerlink" title="read"></a>read</h4><p>要读取来自键盘输入的变量，就需要用read命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">read [-pt] variable</div><div class="line">参数：</div><div class="line">-p：后面可以接提示符</div><div class="line">-t：后面可以接等待的“秒数”，这个比较有趣，不会一直等待用户</div><div class="line"></div><div class="line">chenliqiangdeMacBook-Pro:~ chenliqiang$ read -p &quot;Please keyin your name:&quot; -t 30 atest</div><div class="line">Please keyin your name:test</div><div class="line">chenliqiangdeMacBook-Pro:~ chenliqiang$ echo $atest</div><div class="line">test</div></pre></td></tr></table></figure></p>
<h4 id="声明变量类型（declare）"><a href="#声明变量类型（declare）" class="headerlink" title="声明变量类型（declare）"></a>声明变量类型（declare）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">declare [-aixr] variable</div><div class="line">参数：</div><div class="line">-a：将后面名为variable的变量定义成为数组类型</div><div class="line">-i：将后面名为variable的变量定义成为整数数字类型</div><div class="line">-x：用法与export一样，就是将variable变成环境变量，把-改为+可以将variable变为非环境变量</div><div class="line">-r：将变量设置为readonly类型，该变量不可被更改内容，也不能重设</div></pre></td></tr></table></figure>
<p>注意：</p>
<ul>
<li>变量类型默认为“字符串”，所以若不指定变量类型，则1+2为一个“字符串”而不是“计算式”</li>
<li>bash环境中的数值运算，默认最多仅能达到整数类型，所以1/3的结果是0</li>
</ul>
<h4 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h4><p>数组的设置方式是：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var[index]=content</div></pre></td></tr></table></figure></p>
<p>一般来说，建议直接以<code>${数组}</code>的方式来读取，会比较正确无误</p>
<h3 id="变量的测试与内容替换"><a href="#变量的测试与内容替换" class="headerlink" title="变量的测试与内容替换"></a>变量的测试与内容替换</h3><table>
<thead>
<tr>
<th>变量设置方式</th>
<th>str没有设置</th>
<th>str为空字符串</th>
<th>str已设置为非空字符串</th>
</tr>
</thead>
<tbody>
<tr>
<td>var=${str-expr}</td>
<td>var=expr</td>
<td>var=</td>
<td>var=$str</td>
</tr>
<tr>
<td>var=${str:-expr}</td>
<td>var=expr</td>
<td>var=expr</td>
<td>var=$str</td>
</tr>
<tr>
<td>var=${str+expr}</td>
<td>var=</td>
<td>var=expr</td>
<td>var=expr</td>
</tr>
<tr>
<td>var=${str:+expr}</td>
<td>var=</td>
<td>var=</td>
<td>var=expr</td>
</tr>
<tr>
<td>var=${str=expr}</td>
<td>str=expr<br>var=expr</td>
<td>str不变<br>var=</td>
<td>str不变<br>var=$str</td>
</tr>
<tr>
<td>var=${str:=expr}</td>
<td>str=expr<br>var=expr</td>
<td>str=expr<br>var=expr</td>
<td>str不变<br>var=$str</td>
</tr>
<tr>
<td>var=${str?expr}</td>
<td>expr输出至stderr</td>
<td>var=</td>
<td>var=str</td>
</tr>
<tr>
<td>var=${str:?expr}</td>
<td>expr输出至stderr</td>
<td>expr输出至stderr</td>
<td>var=str</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">例一：测试一下是否存在username这个变量，若不存在则给予username内容为root</div><div class="line">username=$&#123;username-root&#125;</div><div class="line">echo $username 输出：root</div><div class="line">username=&quot;vbird tsai&quot;</div><div class="line">username=$&#123;username-root&#125;</div><div class="line">echo $username 输出：vbird tsai</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://clq2owesome.github.io/2018/02/25/GitHub/git命令/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LeoChan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LeoChan's 个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/25/GitHub/git命令/" itemprop="url">git命令</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-02-25T10:09:45+08:00">
                2018-02-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Github/" itemprop="url" rel="index">
                    <span itemprop="name">Github</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>Git 自带一个 git config 的工具来帮助设置控制 Git 外观和行为的配置变量。 这些变量存储在三个不同的位置：</p>
<ol>
<li><p><code>/etc/gitconfig</code> 文件: 包含系统上每一个用户及他们仓库的通用配置。 如果使用带有 –system 选项的 git config 时，它会从此文件读写配置变量。</p>
</li>
<li><p><code>~/.gitconfig</code> 或 <code>~/.config/git/config</code> 文件：只针对当前用户。 可以传递 –global 选项让 Git 读写此文件。</p>
</li>
<li><p>当前使用仓库的 Git 目录中的 config 文件（就是 <code>.git/config</code>）：针对该仓库。</p>
</li>
</ol>
<p>每一个级别覆盖上一级别的配置，所以 .git/config 的配置变量会覆盖 /etc/gitconfig 中的配置变量。</p>
<h4 id="用户信息"><a href="#用户信息" class="headerlink" title="用户信息"></a>用户信息</h4><p>当安装完 Git 应该做的第一件事就是设置你的用户名称与邮件地址。 这样做很重要，因为每一个 Git 的提交都会使用这些信息，并且它会写入到你的每一次提交中，不可更改：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ git config --global user.name &quot;John Doe&quot;</div><div class="line">$ git config --global user.email johndoe@example.com</div></pre></td></tr></table></figure></p>
<p>再次强调，如果使用了 –global 选项，那么该命令只需要运行一次，因为之后无论你在该系统上做任何事情， Git 都会使用那些信息。 当你想针对特定项目使用不同的用户名称与邮件地址时，可以在那个项目目录下运行没有 –global 选项的命令来配置。</p>
<h4 id="检查配置信息"><a href="#检查配置信息" class="headerlink" title="检查配置信息"></a>检查配置信息</h4><p>如果想要检查你的配置，可以使用 <code>git config --list</code> 命令来列出所有 Git 当时能找到的配置。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">$ git config --list</div><div class="line">credential.helper=osxkeychain</div><div class="line">user.name=陈礼强</div><div class="line">user.email=chenliqiang@000861.com</div><div class="line">difftool.sourcetree.cmd=opendiff &quot;$LOCAL&quot; &quot;$REMOTE&quot;</div><div class="line">difftool.sourcetree.path=</div><div class="line">mergetool.sourcetree.cmd=/Applications/SourceTree.app/Contents/Resources/opendiff-w.sh &quot;$LOCAL&quot; &quot;$REMOTE&quot; -ancestor &quot;$BASE&quot; -merge &quot;$MERGED&quot;</div><div class="line">mergetool.sourcetree.trustexitcode=true</div><div class="line">core.excludesfile=/Users/chenliqiang/.gitignore_global</div><div class="line">core.quotepath=false</div><div class="line">commit.template=/Users/chenliqiang/.stCommitMsg</div></pre></td></tr></table></figure></p>
<p>你可能会看到重复的变量名，因为 Git 会从不同的文件中读取同一个配置（例如：/etc/gitconfig 与 ~/.gitconfig）。 这种情况下，Git 会使用它找到的每一个变量的最后一个配置。</p>
<p>你可以通过输入 git config <key>： 来检查 Git 的某一项配置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ git config user.name</div><div class="line">clq</div></pre></td></tr></table></figure></key></p>
<h3 id="git基础"><a href="#git基础" class="headerlink" title="git基础"></a>git基础</h3><h4 id="获取-Git-仓库"><a href="#获取-Git-仓库" class="headerlink" title="获取 Git 仓库"></a>获取 Git 仓库</h4><p>有两种取得 Git 项目仓库的方法。   </p>
<ul>
<li>在现有项目或目录下导入所有文件到 Git 中； </li>
<li>从一个服务器克隆一个现有的 Git 仓库。</li>
</ul>
<h5 id="在现有目录中初始化仓库"><a href="#在现有目录中初始化仓库" class="headerlink" title="在现有目录中初始化仓库"></a>在现有目录中初始化仓库</h5><p>如果你打算使用 Git 来对现有的项目进行管理，你只需要进入该项目目录并输入：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git init</div></pre></td></tr></table></figure></p>
<p>该命令将创建一个名为 .git 的子目录，这个子目录含有你初始化的 Git 仓库中所有的必须文件，这些文件是 Git 仓库的骨干。</p>
<h5 id="克隆现有的仓库"><a href="#克隆现有的仓库" class="headerlink" title="克隆现有的仓库"></a>克隆现有的仓库</h5><p>Git 克隆的是该 Git 仓库服务器上的几乎所有数据，而不是仅仅复制完成你的工作所需要文件。 当你执行 git clone 命令的时候，默认配置下远程 Git 仓库中的每一个文件的每一个版本都将被拉取下来。 事实上，如果你的服务器的磁盘坏掉了，你通常可以使用任何一个克隆下来的用户端来重建服务器上的仓库</p>
<p>克隆仓库的命令格式是 <code>git clone [url]</code>。 比如，要克隆 Git 的可链接库 libgit2，可以用下面的命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git clone https://github.com/libgit2/libgit2</div></pre></td></tr></table></figure></p>
<p>这会在当前目录下创建一个名为 “libgit2” 的目录，并在这个目录下初始化一个 .git 文件夹，从远程仓库拉取下所有数据放入 .git 文件夹，然后从中读取最新版本的文件的拷贝。 如果你进入到这个新建的 libgit2 文件夹，你会发现所有的项目文件已经在里面了，准备就绪等待后续的开发和使用。 如果你想在克隆远程仓库的时候，自定义本地仓库的名字，你可以使用如下命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git clone https://github.com/libgit2/libgit2 mylibgit</div></pre></td></tr></table></figure></p>
<p>这将执行与上一个命令相同的操作，不过在本地创建的仓库名字变为 mylibgit。</p>
<h4 id="记录每次更新到仓库"><a href="#记录每次更新到仓库" class="headerlink" title="记录每次更新到仓库"></a>记录每次更新到仓库</h4><p>请记住，你工作目录下的每一个文件都不外乎这两种状态：<strong>已跟踪或未跟踪</strong>。 已跟踪的文件是指那些被纳入了版本控制的文件，在上一次快照中有它们的记录，在工作一段时间后，它们的状态可能处于未修改，已修改或已放入暂存区。 工作目录中除已跟踪文件以外的所有其它文件都属于未跟踪文件，它们既不存在于上次快照的记录中，也没有放入暂存区。 初次克隆某个仓库的时候，工作目录中的所有文件都属于已跟踪文件，并处于未修改状态。</p>
<p>编辑过某些文件之后，由于自上次提交后你对它们做了修改，Git 将它们标记为已修改文件。 我们逐步将这些修改过的文件放入暂存区，然后提交所有暂存了的修改，如此反复。所以使用 Git 时文件的生命周期如下：<br><img src="https://git-scm.com/book/en/v2/images/lifecycle.png" alt="image"></p>
<h5 id="检查当前文件状态"><a href="#检查当前文件状态" class="headerlink" title="检查当前文件状态"></a>检查当前文件状态</h5><p>要查看哪些文件处于什么状态，可以用 git status 命令。 如果在克隆仓库后立即使用此命令，会看到类似这样的输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ git status</div><div class="line">On branch master</div><div class="line">nothing to commit, working directory clean</div></pre></td></tr></table></figure></p>
<p>这说明你现在的工作目录相当干净。换句话说，所有已跟踪文件在上次提交后都未被更改过。 此外，上面的信息还表明，当前目录下没有出现任何处于未跟踪状态的新文件，否则 Git 会在这里列出来。 最后，该命令还显示了当前所在分支，并告诉你这个分支同远程服务器上对应的分支没有偏离。 现在，分支名是 “master”,这是默认的分支名。</p>
<p>现在，让我们在项目下创建一个新的 text.txt 文件。 如果之前并不存在这个文件，使用 git status 命令，你将看到一个新的未跟踪文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">echo &apos;test&apos; &gt; text.txt</div><div class="line">chenliqiangdeMacBook-Pro:jenkinsTest chenliqiang$ git status</div><div class="line">On branch master</div><div class="line">Your branch is up to date with &apos;origin/master&apos;.</div><div class="line"></div><div class="line">Untracked files:</div><div class="line">  (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)</div><div class="line"></div><div class="line">	text.txt</div><div class="line"></div><div class="line">nothing added to commit but untracked files present (use &quot;git add&quot; to track)</div></pre></td></tr></table></figure></p>
<p>在状态报告中可以看到新建的 README 文件出现在 Untracked files 下面。 未跟踪的文件意味着 Git 在之前的快照（提交）中没有这些文件；Git 不会自动将之纳入跟踪范围，除非你明明白白地告诉它“我需要跟踪该文件”， 这样的处理让你不必担心将生成的二进制文件或其它不想被跟踪的文件包含进来。 不过现在的例子中，我们确实想要跟踪管理 test.txt 这个文件。</p>
<h6 id="状态简览"><a href="#状态简览" class="headerlink" title="状态简览"></a>状态简览</h6><p>git status命令的输出十分详细，但其用语有些繁琐。 如果你使用 ·git status -s· 命令或 ·git status –short· 命令，你将得到一种更为紧凑的格式输出。 运行 git status -s ，状态报告输出如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">git status -s</div><div class="line"> M README.md //未暂存的已修改的文件</div><div class="line">M  pom.xml //已暂存的已修改的文件</div><div class="line">A  text.txt //已暂存的新文件</div><div class="line">?? aa.txt  //表示未暂存新加的文件</div></pre></td></tr></table></figure></p>
<h5 id="暂存文件"><a href="#暂存文件" class="headerlink" title="暂存文件"></a>暂存文件</h5><p>git add 命令使用文件或目录的路径作为参数；如果参数是目录的路径，该命令将递归地跟踪该目录下的所有文件。</p>
<p>将这个命令理解为“添加内容到下一次提交中”而不是“将一个文件添加到项目中”要更加合适</p>
<p>使用命令 git add 开始暂存一个文件。 所以，要暂存 text.txt 文件，运行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git add text.txt</div></pre></td></tr></table></figure></p>
<p>此时再运行 git status 命令，会看到 README 文件已被跟踪，并处于暂存状态：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$ git status</div><div class="line">On branch master</div><div class="line">Your branch is up to date with &apos;origin/master&apos;.</div><div class="line"></div><div class="line">Changes to be committed:</div><div class="line">  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</div><div class="line"></div><div class="line">	new file:   text.txt</div></pre></td></tr></table></figure></p>
<p>只要在 <code>Changes to be committed</code> 这行下面的，就说明是已暂存状态。 如果此时提交，那么该文件此时此刻的版本将被留存在历史记录中。 你可能会想起之前我们使用 git init 后就运行了 git add (files) 命令，开始跟踪当前目录下的文件。</p>
<h5 id="忽略文件"><a href="#忽略文件" class="headerlink" title="忽略文件"></a>忽略文件</h5><p>一般我们总会有些文件无需纳入 Git 的管理，也不希望它们总出现在未跟踪文件列表。 通常都是些自动生成的文件，比如日志文件，或者编译过程中创建的临时文件等。 在这种情况下，我们可以创建一个名为 .gitignore 的文件，列出要忽略的文件模式。 来看一个实际的例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ cat .gitignore</div><div class="line">*.[oa]</div><div class="line">*~</div></pre></td></tr></table></figure></p>
<p>第一行告诉 Git 忽略所有以 .o 或 .a 结尾的文件。一般这类对象文件和存档文件都是编译过程中出现的。 第二行告诉 Git 忽略所有以波浪符（~）结尾的文件，许多文本编辑软件（比如 Emacs）都用这样的文件名保存副本。 此外，你可能还需要忽略 log，tmp 或者 pid 目录，以及自动生成的文档等等。 要养成一开始就设置好 .gitignore 文件的习惯，以免将来误提交这类无用的文件。</p>
<h5 id="查看已暂存和未暂存的修改-diff"><a href="#查看已暂存和未暂存的修改-diff" class="headerlink" title="查看已暂存和未暂存的修改(diff)"></a>查看已暂存和未暂存的修改(diff)</h5><p><code>git diff</code> 看暂存前后的变化<br><code>git diff --cached</code> 查看已经暂存起来的变化：（–staged 和 –cached 是同义词）</p>
<h5 id="提交更新-git-commit"><a href="#提交更新-git-commit" class="headerlink" title="提交更新(git commit)"></a>提交更新(git commit)</h5><p>一般会在 commit 命令后添加 -m 选项，将提交信息与命令放在同一行，如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$git commit -m &quot;这是本次提交说明&quot;</div><div class="line"></div><div class="line">[master d78b417] 这是本次提交说明</div><div class="line"> 2 files changed, 2 insertions(+), 1 deletion(-)</div><div class="line"> create mode 100644 text.txt</div></pre></td></tr></table></figure></p>
<p>可以看到，提交后它会告诉你，当前是在哪个分支（master）提交的，本次提交的完整 SHA-1 校验和是什么（463dc4f），以及在本次提交中，有多少文件修订过，多少行添加和删改过。</p>
<p>请记住，提交时记录的是放在暂存区域的快照。 任何还未暂存的仍然保持已修改状态，可以在下次提交时纳入版本管理。 每一次运行提交操作，都是对你项目作一次快照，以后可以回到这个状态，或者进行比较。</p>
<h6 id="跳过使用暂存区域-git-commit-a"><a href="#跳过使用暂存区域-git-commit-a" class="headerlink" title="跳过使用暂存区域(git commit -a)"></a>跳过使用暂存区域(git commit -a)</h6><p>尽管使用暂存区域的方式可以精心准备要提交的细节，但有时候这么做略显繁琐。 Git 提供了一个跳过使用暂存区域的方式， 只要在提交的时候，给 git commit 加上 -a 选项，<strong>Git 就会自动把所有已经跟踪过的文件暂存起来一并提交，从而跳过 git add 步骤</strong>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ git commit -m &quot;提交为暂存的文件&quot; -a</div><div class="line">[master 3e3a5fe] 提交为暂存的文件</div><div class="line"> 1 file changed, 1 insertion(+)</div></pre></td></tr></table></figure></p>
<h5 id="移除文件-rm"><a href="#移除文件-rm" class="headerlink" title="移除文件(rm)"></a>移除文件(rm)</h5><p>要从 Git 中移除某个文件，就必须要从已跟踪文件清单中移除（确切地说，是<strong>从暂存区域移除</strong>），然后提交。 可以用 git rm 命令完成此项工作，并连带从工作目录中删除指定的文件，这样以后就不会出现在未跟踪文件清单中了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git rm aa.txt</div></pre></td></tr></table></figure></p>
<p>下一次提交时，该文件就不再纳入版本管理了。 如果删除之前修改过并且已经放到暂存区域的话，则必须要用强制删除选项 -f（译注：即 force 的首字母）。 这是一种安全特性，用于防止误删还没有添加到快照的数据，这样的数据不能被 Git 恢复。</p>
<p>另外一种情况是，我们想把文件从 Git 仓库中删除（亦即从暂存区域移除），但仍然希望保留在当前工作目录中。 换句话说，你想让文件保留在磁盘，但是并不想让 Git 继续跟踪。 当你忘记添加 .gitignore 文件，不小心把一个很大的日志文件或一堆 .a 这样的编译生成文件添加到暂存区时，这一做法尤其有用。 为达到这一目的，使用 <code>--cached</code> 选项：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git rm --cached aa.txt</div></pre></td></tr></table></figure></p>
<h5 id="移动文件"><a href="#移动文件" class="headerlink" title="移动文件"></a>移动文件</h5><p>不像其它的 VCS 系统，Git 并不显式跟踪文件移动操作。 如果在 Git 中重命名了某个文件，仓库中存储的元数据并不会体现出这是一次改名操作。<br>既然如此，当你看到 Git 的 mv 命令时一定会困惑不已。 要在 Git 中对文件改名，可以这么做：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># aa.txt文件必须先要加入暂存中</div><div class="line">$ git mv aa.txt abc.txt</div></pre></td></tr></table></figure></p>
<p>其实，运行 git mv 就相当于运行了下面三条命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ mv README.md README</div><div class="line">$ git rm README.md</div><div class="line">$ git add README</div></pre></td></tr></table></figure></p>
<h4 id="撤消操作"><a href="#撤消操作" class="headerlink" title="撤消操作"></a>撤消操作</h4><p>有时候我们提交完了才发现漏掉了几个文件没有添加，或者提交信息写错了。 此时，可以运行带有 –amend 选项的提交命令尝试重新提交：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git commit --amend</div></pre></td></tr></table></figure></p>
<p>这个命令会将暂存区中的文件提交。 如果自上次提交以来你还未做任何修改（例如，在上次提交后马上执行了此命令），那么快照会保持不变，而你所修改的只是提交信息。</p>
<h4 id="取消暂存的文件"><a href="#取消暂存的文件" class="headerlink" title="取消暂存的文件"></a>取消暂存的文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git reset HEAD abcd.txt</div></pre></td></tr></table></figure>
<h4 id="撤消对文件的修改"><a href="#撤消对文件的修改" class="headerlink" title="撤消对文件的修改"></a>撤消对文件的修改</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git checkout -- abcd.txt</div></pre></td></tr></table></figure>
<h4 id="查看远程仓库"><a href="#查看远程仓库" class="headerlink" title="查看远程仓库"></a>查看远程仓库</h4><p>如果想查看你已经配置的远程仓库服务器，可以运行 <code>git remote</code> 命令。 它会列出你指定的每一个远程服务器的简写。 如果你已经克隆了自己的仓库，那么至少应该能看到 origin - 这是 Git 给你克隆的仓库服务器的默认名字：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ git remote</div><div class="line">origin</div></pre></td></tr></table></figure></p>
<p>你也可以指定选项 -v，会显示需要读写远程仓库使用的 Git 保存的简写与其对应的 URL。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ git remote -v</div><div class="line">origin	git@120.77.81.95:root/JenkinsTest.git (fetch)</div><div class="line">origin	git@120.77.81.95:root/JenkinsTest.git (push)</div></pre></td></tr></table></figure></p>
<h4 id="添加远程仓库"><a href="#添加远程仓库" class="headerlink" title="添加远程仓库"></a>添加远程仓库</h4><p>运行 <code>git remote add &lt;shortname&gt; &lt;url&gt;</code> 添加一个新的远程 Git 仓库，同时指定一个你可以轻松引用的简写：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git remote add gittest git@120.77.81.95:root/gittest.git</div></pre></td></tr></table></figure></p>
<p>现在你可以在命令行中使用字符串 pb 来代替整个 URL。</p>
<h4 id="从远程仓库中抓取与拉取"><a href="#从远程仓库中抓取与拉取" class="headerlink" title="从远程仓库中抓取与拉取"></a>从远程仓库中抓取与拉取</h4><p>从远程仓库中获得数据，可以执行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git fetch [remote-name]</div></pre></td></tr></table></figure></p>
<p>这个命令会访问远程仓库，从中拉取所有你还没有的数据。 执行完成后，你将会拥有那个远程仓库中所有分支的引用，可以随时合并或查看。</p>
<p>如果你使用 clone 命令克隆了一个仓库，命令会自动将其添加为远程仓库并默认以 “origin” 为简写。 所以，git fetch origin 会抓取克隆（或上一次抓取）后新推送的所有工作。 <strong>必须注意 git fetch 命令会将数据拉取到你的本地仓库 - 它并不会自动合并或修改你当前的工作。 当准备好时你必须手动将其合并入你的工作</strong>。</p>
<p>如果你有一个分支设置为跟踪一个远程分支，可以使用 git pull 命令来自动的抓取然后合并远程分支到当前分支。 这对你来说可能是一个更简单或更舒服的工作流程；默认情况下，git clone 命令会自动设置本地 master 分支跟踪克隆的远程仓库的 master 分支。 运行 <code>git pull</code> 通常会从最初克隆的服务器上抓取数据并自动尝试合并到当前所在的分支。</p>
<h4 id="推送到远程仓库"><a href="#推送到远程仓库" class="headerlink" title="推送到远程仓库"></a>推送到远程仓库</h4><p>当你想分享你的项目时，必须将其推送到上游。 这个命令很简单：<code>git push [remote-name] [branch-name]</code>。 当你想要将 master 分支推送到 origin 服务器时（再次说明，克隆时通常会自动帮你设置好那两个名字），那么运行这个命令就可以将你所做的备份到服务器：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git push origin master</div></pre></td></tr></table></figure></p>
<p>只有当你有所克隆服务器的写入权限，并且之前没有人推送过时，这条命令才能生效。 当你和其他人在同一时间克隆，他们先推送到上游然后你再推送到上游，你的推送就会毫无疑问地被拒绝。 你必须先将他们的工作拉取下来并将其合并进你的工作后才能推送。</p>
<h4 id="查看远程仓库-1"><a href="#查看远程仓库-1" class="headerlink" title="查看远程仓库"></a>查看远程仓库</h4><p>如果想要查看某一个远程仓库的更多信息，可以使用 <code>git remote show [remote-name]</code> 命令。 如果想以一个特定的缩写名运行这个命令，例如 origin，会得到像下面类似的信息：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git remote show origin</div></pre></td></tr></table></figure></p>
<p>它同样会列出远程仓库的 URL 与跟踪分支的信息。 这些信息非常有用，它告诉你正处于 master 分支，并且如果运行 git pull，就会抓取所有的远程引用，然后将远程 master 分支合并到本地 master 分支。 它也会列出拉取到的所有远程引用。</p>
<h4 id="远程仓库的移除与重命名"><a href="#远程仓库的移除与重命名" class="headerlink" title="远程仓库的移除与重命名"></a>远程仓库的移除与重命名</h4><p>如果想要重命名引用的名字可以运行 git remote rename 去修改一个远程仓库的简写名<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git remote rename gittest git1test</div></pre></td></tr></table></figure></p>
<p>如果因为一些原因想要移除一个远程仓库,可以使用 git remote rm ：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ git remote rm git1test</div><div class="line">$ git remote -v</div><div class="line">origin	git@120.77.81.95:root/JenkinsTest.git (fetch)</div><div class="line">origin	git@120.77.81.95:root/JenkinsTest.git (push)</div></pre></td></tr></table></figure></p>
<h4 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h4><h5 id="列出标签"><a href="#列出标签" class="headerlink" title="列出标签"></a>列出标签</h5><p>在 Git 中列出已有的标签是非常简单直观的。 只需要输入 git tag：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git tag</div></pre></td></tr></table></figure></p>
<p>你也可以使用特定的模式查找标签。 例如，Git 自身的源代码仓库包含标签的数量超过 500 个。 如果只对 1.8.5 系列感兴趣，可以运行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ git tag -l &apos;v1.8.5*&apos;</div><div class="line">v1.8.5</div><div class="line">v1.8.5-rc0</div></pre></td></tr></table></figure></p>
<h5 id="创建标签"><a href="#创建标签" class="headerlink" title="创建标签"></a>创建标签</h5><p>Git 使用两种主要类型的标签：<strong>轻量标签（lightweight）与附注标签（annotated）</strong>。</p>
<p>一个轻量标签很像一个不会改变的分支 - 它只是一个特定提交的引用。</p>
<p>然而，附注标签是存储在 Git 数据库中的一个完整对象。 它们是可以被校验的；其中包含打标签者的名字、电子邮件地址、日期时间；还有一个标签信息；并且可以使用 GNU Privacy Guard （GPG）签名与验证。 通常建议创建附注标签，这样你可以拥有以上所有信息；但是如果你只是想用一个临时的标签，或者因为某些原因不想要保存那些信息，轻量标签也是可用的。</p>
<h6 id="附注标签"><a href="#附注标签" class="headerlink" title="附注标签"></a>附注标签</h6><p>在 Git 中创建一个附注标签是很简单的。 最简单的方式是当你在运行 tag 命令时指定 -a 选项：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git tag -a v1.0 -m &quot;测试标签&quot;</div></pre></td></tr></table></figure></p>
<p>-m 选项指定了一条将会存储在标签中的信息。 如果没有为附注标签指定一条信息，Git 会运行编辑器要求你输入信息。</p>
<p>通过使用 git show 命令可以看到标签信息与对应的提交信息：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git show v1.0</div></pre></td></tr></table></figure></p>
<h6 id="轻量标签"><a href="#轻量标签" class="headerlink" title="轻量标签"></a>轻量标签</h6><p>另一种给提交打标签的方式是使用轻量标签。 轻量标签本质上是将提交校验和存储到一个文件中 - 没有保存任何其他信息。 创建轻量标签，不需要使用 -a、-s 或 -m 选项，只需要提供标签名字：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git tag v1.0</div></pre></td></tr></table></figure></p>
<h6 id="后期打标签"><a href="#后期打标签" class="headerlink" title="后期打标签"></a>后期打标签</h6><p>你也可以对过去的提交打标签。<br>现在，假设在 v1.2 时你忘记给项目打标签，也就是在 “updated rakefile” 提交。 你可以在之后补上标签。 要在那个提交上打标签，你需要在命令的末尾指定提交的校验和（或部分校验和）:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git tag -a v1.2 9fceb02</div></pre></td></tr></table></figure></p>
<h6 id="共享标签"><a href="#共享标签" class="headerlink" title="共享标签"></a>共享标签</h6><p>默认情况下，git push 命令并不会传送标签到远程仓库服务器上。 在创建完标签后你必须显式地推送标签到共享服务器上。 这个过程就像共享远程分支一样 - 你可以运行 <code>git push origin [tagname]</code>。</p>
<p>如果想要一次性推送很多标签，也可以使用带有 <code>--tags</code> 选项的 git push 命令。 这将会把所有不在远程仓库服务器上的标签全部传送到那里。</p>
<h6 id="检出标签"><a href="#检出标签" class="headerlink" title="检出标签"></a>检出标签</h6><p>在 Git 中你并不能真的检出一个标签，因为它们并不能像分支一样来回移动。 如果你想要工作目录与仓库中特定的标签版本完全一样，可以使用 git checkout -b [branchname] [tagname] 在特定的标签上创建一个新分支：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ git checkout -b version2 v2.0.0</div><div class="line">Switched to a new branch &apos;version2&apos;</div></pre></td></tr></table></figure></p>
<h3 id="Git-分支"><a href="#Git-分支" class="headerlink" title="Git 分支"></a>Git 分支</h3><h4 id="分支创建"><a href="#分支创建" class="headerlink" title="分支创建"></a>分支创建</h4><p>Git 是怎么创建新分支的呢？ 很简单，它只是为你创建了一个可以移动的新的指针。 比如，创建一个 testing 分支， 你需要使用 git branch 命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git branch testing</div></pre></td></tr></table></figure></p>
<p>这会在当前所在的提交对象上创建一个指针。<br><img src="https://git-scm.com/book/en/v2/images/two-branches.png" alt="image"></p>
<p>那么，Git 又是怎么知道当前在哪一个分支上呢？ 也很简单，它有一个名为 HEAD 的特殊指针。 请注意它和许多其它版本控制系统（如 Subversion 或 CVS）里的 <code>HEAD</code> 概念完全不同。 在 Git 中，它是一个指针，指向当前所在的本地分支（译注：将 HEAD 想象为当前分支的别名）。 在本例中，你仍然在 master 分支上。 因为 git branch 命令仅仅 创建 一个新分支，并不会自动切换到新分支中去。<br><img src="https://git-scm.com/book/en/v2/images/head-to-master.png" alt="image">  </p>
<p>想要新建一个分支并同时切换到那个分支上，你可以运行一个带有 -b 参数的 git checkout 命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ git checkout -b iss53</div><div class="line">Switched to a new branch &quot;iss53&quot;</div></pre></td></tr></table></figure></p>
<p>它是下面两条命令的简写：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ git branch iss53</div><div class="line">$ git checkout iss53</div></pre></td></tr></table></figure></p>
<h4 id="分支切换"><a href="#分支切换" class="headerlink" title="分支切换"></a>分支切换</h4><p>要切换到一个已存在的分支，你需要使用 git checkout 命令。 我们现在切换到新创建的 testing 分支去：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git checkout testing</div></pre></td></tr></table></figure></p>
<p>这样 HEAD 就指向 testing 分支了。<br><img src="https://git-scm.com/book/en/v2/images/head-to-testing.png" alt="image"> </p>
<h4 id="分支合并"><a href="#分支合并" class="headerlink" title="分支合并"></a>分支合并</h4><p>出到你想合并入的分支，然后运行 git merge 命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ git checkout master</div><div class="line">Switched to branch &apos;master&apos;</div><div class="line">$ git merge iss53</div></pre></td></tr></table></figure></p>
<h4 id="分支删除"><a href="#分支删除" class="headerlink" title="分支删除"></a>分支删除</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git branch -d iss53</div></pre></td></tr></table></figure>
<h4 id="分支管理"><a href="#分支管理" class="headerlink" title="分支管理"></a>分支管理</h4><p>git branch 命令不只是可以创建与删除分支。 如果不加任何参数运行它，会得到当前所有分支的一个列表：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git branch</div><div class="line">* master</div><div class="line">  testing</div></pre></td></tr></table></figure></p>
<p>注意 master 分支前的 * 字符：它代表现在检出的那一个分支（也就是说，当前 HEAD 指针所指向的分支）。 这意味着如果在这时候提交，master 分支将会随着新的工作向前移动。 如果需要查看每一个分支的最后一次提交，可以运行 git branch -v 命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ git branch -v</div><div class="line">* master  32262c1 [ahead 1] 123</div><div class="line">  testing 32262c1 123</div></pre></td></tr></table></figure></p>
<p>–merged 与 –no-merged 这两个有用的选项可以过滤这个列表中已经合并或尚未合并到当前分支的分支。 如果要查看哪些分支已经合并到当前分支，可以运行 git branch –merged：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git branch --merged</div><div class="line">* master</div><div class="line">  testing</div></pre></td></tr></table></figure></p>
<h4 id="远程分支"><a href="#远程分支" class="headerlink" title="远程分支"></a>远程分支</h4><h5 id="显式地获得远程引用的完整列表"><a href="#显式地获得远程引用的完整列表" class="headerlink" title="显式地获得远程引用的完整列表"></a>显式地获得远程引用的完整列表</h5><p><code>git ls-remote (remote)</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ git ls-remote origin</div><div class="line">877993c88d9772791f18d6b5a913f57b6282f0e5	HEAD</div><div class="line">877993c88d9772791f18d6b5a913f57b6282f0e5	refs/heads/master</div><div class="line">8b41f3c4ccc0c8f3eb5a0a5ba6c84c849c752a37	refs/tags/v1.0</div><div class="line">877993c88d9772791f18d6b5a913f57b6282f0e5	refs/tags/v1.0^&#123;&#125;</div></pre></td></tr></table></figure></p>
<h5 id="获得远程分支的更多信息"><a href="#获得远程分支的更多信息" class="headerlink" title="获得远程分支的更多信息"></a>获得远程分支的更多信息</h5><p><code>git remote show (remote)</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">$ git remote show origin</div><div class="line">* remote origin</div><div class="line">  Fetch URL: git@120.77.81.95:root/JenkinsTest.git</div><div class="line">  Push  URL: git@120.77.81.95:root/JenkinsTest.git</div><div class="line">  HEAD branch: master</div><div class="line">  Remote branch:</div><div class="line">    master tracked</div><div class="line">  Local branch configured for &apos;git pull&apos;:</div><div class="line">    master merges with remote master</div><div class="line">  Local ref configured for &apos;git push&apos;:</div><div class="line">    master pushes to master (fast-forwardable)</div></pre></td></tr></table></figure></p>
<h5 id="推送远程分支"><a href="#推送远程分支" class="headerlink" title="推送远程分支"></a>推送远程分支</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git push (remote) (branch)</div></pre></td></tr></table></figure>
<p>如果并不想让远程仓库上的分支叫做 serverfix，可以运行 git push origin serverfix:awesomebranch 来将本地的 serverfix 分支推送到远程仓库上的 awesomebranch 分支。</p>
<h5 id="跟踪分支"><a href="#跟踪分支" class="headerlink" title="跟踪分支"></a>跟踪分支</h5><p>从一个远程跟踪分支检出一个本地分支会自动创建一个叫做 “跟踪分支”（有时候也叫做 “上游分支”）。 跟踪分支是与远程分支有直接关系的本地分支。 如果在一个跟踪分支上输入 git pull，Git 能自动地识别去哪个服务器上抓取、合并到哪个分支。</p>
<p>当克隆一个仓库时，它通常会自动地创建一个跟踪 origin/master 的 master 分支。 然而，如果你愿意的话可以设置其他的跟踪分支 - 其他远程仓库上的跟踪分支，或者不跟踪 master 分支。 最简单的就是之前看到的例子，运行 git checkout -b [branch] [remotename]/[branch]。 这是一个十分常用的操作所以 Git 提供了 –track 快捷方式：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ git checkout --track origin/serverfix</div><div class="line">Branch serverfix set up to track remote branch serverfix from origin.</div><div class="line">Switched to a new branch &apos;serverfix&apos;</div></pre></td></tr></table></figure></p>
<p>如果想要将本地分支与远程分支设置为不同名字，你可以轻松地增加一个不同名字的本地分支的上一个命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ git checkout -b sf origin/serverfix</div><div class="line">Branch sf set up to track remote branch serverfix from origin.</div><div class="line">Switched to a new branch &apos;sf&apos;</div></pre></td></tr></table></figure></p>
<p>设置已有的本地分支跟踪一个刚刚拉取下来的远程分支，或者想要修改正在跟踪的上游分支，你可以在任意时间使用 -u 或 –set-upstream-to 选项运行 git branch 来显式地设置。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ git branch -u origin/serverfix</div><div class="line">Branch serverfix set up to track remote branch serverfix from origin.</div></pre></td></tr></table></figure></p>
<h5 id="拉取"><a href="#拉取" class="headerlink" title="拉取"></a>拉取</h5><p>当 git fetch 命令从服务器上抓取本地没有的数据时，它并不会修改工作目录中的内容。 它只会获取数据然后让你自己合并。 然而，有一个命令叫作 git pull 在大多数情况下它的含义是一个 git fetch 紧接着一个 git merge 命令。 如果有一个像之前章节中演示的设置好的跟踪分支，不管它是显式地设置还是通过 clone 或 checkout 命令为你创建的，git pull 都会查找当前分支所跟踪的服务器与分支，从服务器上抓取数据然后尝试合并入那个远程分支。</p>
<p>由于 git pull 的魔法经常令人困惑所以通常单独显式地使用 fetch 与 merge 命令会更好一些。</p>
<h5 id="删除远程分支"><a href="#删除远程分支" class="headerlink" title="删除远程分支"></a>删除远程分支</h5><p>假设你已经通过远程分支做完所有的工作了 - 也就是说你和你的协作者已经完成了一个特性并且将其合并到了远程仓库的 master 分支（或任何其他稳定代码分支）。 可以运行带有 –delete 选项的 git push 命令来删除一个远程分支。 如果想要从服务器上删除 serverfix 分支，运行下面的命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ git push origin --delete serverfix</div><div class="line">To https://github.com/schacon/simplegit</div><div class="line"> - [deleted]         serverfix</div></pre></td></tr></table></figure></p>
<p>基本上这个命令做的只是从服务器上移除这个指针。 Git 服务器通常会保留数据一段时间直到垃圾回收运行，所以如果不小心删除掉了，通常是很容易恢复的。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://clq2owesome.github.io/2018/02/25/Linux/shell script/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LeoChan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LeoChan's 个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/25/Linux/shell script/" itemprop="url">shell script</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-02-25T10:09:45+08:00">
                2018-02-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="编写shell-script的需要注意以下事项："><a href="#编写shell-script的需要注意以下事项：" class="headerlink" title="编写shell script的需要注意以下事项："></a>编写shell script的需要注意以下事项：</h3><ol>
<li>命令的执行是从上而下，从左而右地分析与执行</li>
<li>命令，参数间的多个空白都会被忽略掉</li>
<li>空白行也将被忽略掉，并且[tab]按键所得的空白同样视为空格键</li>
<li>如果读取到一个Enter符号（CR），就尝试开始执行该行（或该串）命令</li>
<li>至于如果一行的内容太多，则可以使用“\Enter”来扩展至下一行</li>
<li>“#”可以作为批注。任何加在#后面的数据将全部被视为批注文字而被忽略</li>
</ol>
<h3 id="执行脚本"><a href="#执行脚本" class="headerlink" title="执行脚本"></a>执行脚本</h3><ol>
<li><p><strong>直接命令执行</strong>：shell.sh文件必须具备可读与可执行（rx）的权限，然后：</p>
<ol>
<li>绝对路径：使用<code>/home/dmtsai/shell.sh</code>来执行命令</li>
<li>相对命令：假设工作目录在/home/dmtsai/,则使用<code>./shell.sh</code>来执行</li>
<li>变量“PATH”功能：将shell.sh放在PATH指定的目录内，例如：~/bin/</li>
</ol>
</li>
<li><p><strong>以bash进程来执行</strong>：通过<code>bash shell.sh</code> 或 <code>sh shell.sh</code>来执行</p>
</li>
</ol>
<h3 id="脚本规范"><a href="#脚本规范" class="headerlink" title="脚本规范"></a>脚本规范</h3><ol>
<li><p>第一行<code>#!/bin/bash</code>声明这个script使用的shell名称</p>
<p> 因为我们使用的是bash，所以必须要以<code>#!/bin/bash</code>来声明这个内的语法使用bash的语法。那么当这个程序被执行时，它就能够加载bash的相关环境配置文件（一般来说就是non-login shell的~/.bashrc），并且执行bash来执行bash使我们下面的命令能够执行。这很重要的（在很多情况中，如果没有设置好这一行，那么该程序很可能会无法执行，因为系统可能无法判断该程序需要使用什么shell来执行）</p>
</li>
<li><p>程序内容的说明</p>
<p> 整个script当中，除了第一行的<code>#!</code>是用来声明shell的之外，其他的#都是“批注”用途。一般来说，建议你一定要养成说明该script的内容和功能，版本信息，作者与联系方式，建立日期，历史记录等习惯，这将有助于将来程序的改写与调试</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line"># 功能：</div><div class="line">#   这里是功能描述</div><div class="line"># 历史：</div><div class="line">#   时间 作者 版本号</div></pre></td></tr></table></figure>
</li>
<li><p>主要环境变量的声明</p>
<p> 建议务必要将一些重要的环境变量设置好，PATH与LANG（如果有使用到输出相关的信息时）是当中最重要的！如此一来，则可让我们这个程序在进行时可以直接执行一些外部命令，而不必写绝对路径</p>
</li>
<li><p>主要程序部分</p>
<p> 就将主要的程序写好即可</p>
</li>
<li><p>告知执行结果</p>
<p> 可以利用exit这个命令来让程序中断，并且回传一个数值给系统。例如使用exit 0，这代表离开script并且回传一个0给系统。进一步，可以利用exit n（n为数字）的功能，自定义错误信息，让程序变得更加聪明</p>
</li>
</ol>
<p>注意：<strong>使用上述的方式执行script时，该script都会使用一个新的bash环境来执行脚本内的命令</strong>.</p>
<p>也就是说，<strong>使用这种执行方式时，其实script是在子进程的bash内执行的。当子进程完成后，子进程内的各项变量或操作将会结束而不会传回到父进程中</strong></p>
<p>如下图：<br><img src="https://raw.githubusercontent.com/clq2owesome/image/master/WechatIMG2436.jpeg" alt="image"><br>​    </p>
<h5 id="使用source来执行脚本：在父进程中执行"><a href="#使用source来执行脚本：在父进程中执行" class="headerlink" title="使用source来执行脚本：在父进程中执行"></a>使用source来执行脚本：在父进程中执行</h5><p><img src="https://raw.githubusercontent.com/clq2owesome/image/master/WechatIMG2438.jpeg" alt="image"></p>
<h3 id="数值运算"><a href="#数值运算" class="headerlink" title="数值运算"></a>数值运算</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var=$((运算内容))</div></pre></td></tr></table></figure>
<h3 id="自定义变量转成环境变量（export）"><a href="#自定义变量转成环境变量（export）" class="headerlink" title="自定义变量转成环境变量（export）"></a>自定义变量转成环境变量（export）</h3><p><strong>子进程仅会继承父进程的环境变量，子进程不会继承父进程的自定义变量</strong>，所以你原本bash中的自定义变量在进入了子进程后就会消失不见，一直到你离开子进程并回到原本的父进程后，这个变量才会又出现</p>
<p>换个角度来说，如果我能将自定义变量变成环境变量的话，那不就可以让该变量值继续存在于子进程了？如果想要让该变量内容继续在子进程中使用，那么就请执行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">export 变量名称</div></pre></td></tr></table></figure></p>
<p>为什么环境变量的数据可以被子进程所引用呢？这是因为内存配置的关系。理论上是这样的：</p>
<ul>
<li>当启动一个shell，操作系统会分配一记忆块给shell使用，此内存内的变量可让子进程取用</li>
<li>若在父进程利用export功能，可以让自定义变量的内容写到上述的记忆块当中（环境变量）</li>
<li>当加载另一个shell时（即启动子进程，而离开原本的父进程了），子shell可以将父shell的环境变量所在的记忆块导入自己的环境变量块当中</li>
</ul>
<h3 id="关于本shell的PID"><a href="#关于本shell的PID" class="headerlink" title="$(关于本shell的PID)"></a>$(关于本shell的PID)</h3><p>“$”本身也是个变量，这个代表的是目前这个shell的线程代号，即是所谓的PID（Process ID）</p>
<h3 id="（关于上个执行命令的回传码）"><a href="#（关于上个执行命令的回传码）" class="headerlink" title="?（关于上个执行命令的回传码）"></a>?（关于上个执行命令的回传码）</h3><p>问号也是一个特殊的变量，在bash里面这个变量很重要。<strong>这个变量是上一个执行的命令所回传的值</strong>。当我们执行某些命令时，这些命令都会回传一个执行后的代码。一般来说，<strong>如果成功执行该命令，则会回传一个0值，如果执行过程中发生错误，就会回传“错误代码”才对。一般就是以非0的数值来替代</strong></p>
<h3 id="test命令"><a href="#test命令" class="headerlink" title="test命令"></a>test命令</h3><h6 id="关于某个文件名的“文件类型”判断"><a href="#关于某个文件名的“文件类型”判断" class="headerlink" title="关于某个文件名的“文件类型”判断"></a>关于某个文件名的“文件类型”判断</h6><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-e</td>
<td>该文件名是否存在（常用）</td>
</tr>
<tr>
<td>-f</td>
<td>该文件名是否存在且为文件（file）（常用）</td>
</tr>
<tr>
<td>-d</td>
<td>是否存在且为目录（常用）</td>
</tr>
<tr>
<td>-b</td>
<td>是否存在且为一个block device设备</td>
</tr>
<tr>
<td>-c</td>
<td>是否存在且为一个character device设备</td>
</tr>
<tr>
<td>-S</td>
<td>是否存在且为一个Socket文件</td>
</tr>
<tr>
<td>-p</td>
<td>是否存在且为一个FIFO（pipe）文件</td>
</tr>
<tr>
<td>-L</td>
<td>是否存在且为一个连接文件</td>
</tr>
</tbody>
</table>
<h6 id="关于文件的权限检测"><a href="#关于文件的权限检测" class="headerlink" title="关于文件的权限检测"></a>关于文件的权限检测</h6><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-r</td>
<td>检测该文件是否存在且具有“可读”的权限</td>
</tr>
<tr>
<td>-w</td>
<td>检测该文件是否存在且具有“可写”的权限</td>
</tr>
<tr>
<td>-x</td>
<td>检测该文件是否存在且具有“可执行”的权限</td>
</tr>
<tr>
<td>-u</td>
<td>检测该文件是否存在且具有“SUID”的属性</td>
</tr>
<tr>
<td>-g</td>
<td>检测该文件是否存在且具有“SGID”的属性</td>
</tr>
<tr>
<td>-k</td>
<td>检测该文件是否存在且具有“Sticky bit”的属性</td>
</tr>
<tr>
<td>-s</td>
<td>检测该文件是否存在且为“非空白文件”</td>
</tr>
</tbody>
</table>
<h6 id="关于文件的权限检测-1"><a href="#关于文件的权限检测-1" class="headerlink" title="关于文件的权限检测"></a>关于文件的权限检测</h6><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-nt</td>
<td>判断file1是否比file2新</td>
</tr>
<tr>
<td>-ot</td>
<td>判断file1是否比file2旧</td>
</tr>
<tr>
<td>-ef</td>
<td>判断file1与file2是否为同一文件，可用在判断hard link的判定上。主要意义在于判定两个文件是否均指向同一个node</td>
</tr>
</tbody>
</table>
<h6 id="关于两个整数之间的判定"><a href="#关于两个整数之间的判定" class="headerlink" title="关于两个整数之间的判定"></a>关于两个整数之间的判定</h6><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-eq</td>
<td>两数值相等</td>
</tr>
<tr>
<td>-ne</td>
<td>两数值不等</td>
</tr>
<tr>
<td>-gt</td>
<td>n1大于n2</td>
</tr>
<tr>
<td>-lt</td>
<td>n1小于n2</td>
</tr>
<tr>
<td>-ge</td>
<td>n1大于等于n2</td>
</tr>
<tr>
<td>-le</td>
<td>n1小于等于n2</td>
</tr>
</tbody>
</table>
<h6 id="判定字符串的数据"><a href="#判定字符串的数据" class="headerlink" title="判定字符串的数据"></a>判定字符串的数据</h6><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Test -Z string</td>
<td>判定字符串是否为0，若string为空字符串，则为true</td>
</tr>
<tr>
<td>Test -n string</td>
<td>判定字符串是否为非0，若string为空字符串，则为false<br>注：-n也可以省略</td>
</tr>
<tr>
<td>test str1 = str2</td>
<td>判定str1是否等于str2，若相等，则回传true</td>
</tr>
<tr>
<td>test str1 != str2</td>
<td>判定str1是否不等于str2，若相等，则返回false</td>
</tr>
</tbody>
</table>
<h6 id="多重条件判定"><a href="#多重条件判定" class="headerlink" title="多重条件判定"></a>多重条件判定</h6><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-a</td>
<td>两个条件同时成立！例如test -r file -a -x file，则file同时具有r与x的权限时，才返回true</td>
</tr>
<tr>
<td>-o</td>
<td>任何一个条件成立！例如test -r file -o -x file，则file具有r或x权限时，就会返回true</td>
</tr>
<tr>
<td>!</td>
<td>反向状态！例如 test ! -x file，当file不具有x时，就会回传true</td>
</tr>
</tbody>
</table>
<h3 id="利用判断符号"><a href="#利用判断符号" class="headerlink" title="利用判断符号[]"></a>利用判断符号[]</h3><p>中括号的用法与test几乎一模一样，只是中括号比较常用在条件判断式 if…then…fi 的情况</p>
<p>例如：如果想要知道$HOME这个变量是否为空的，可以这样做：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># [ -z &quot;$HOME&quot; ];echo $?</div><div class="line">1</div></pre></td></tr></table></figure></p>
<p>必须要注意：</p>
<ol>
<li>在中括号[]内的每个组件的两端都需要有空格符来分隔</li>
<li>中中括号内的变量，最好都以双引号括起来</li>
<li>在中括号内的常量，最好都以单或双引号括起来</li>
</ol>
<h3 id="shell-script-的默认变量"><a href="#shell-script-的默认变量" class="headerlink" title="shell script 的默认变量"></a>shell script 的默认变量</h3><p>script针对参数已经有设置好一些变量名称了，对应如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">/path/to/scriptname opt1 opt2 opt3 opt4</div><div class="line">     $0              $1   $2   $3   $4</div></pre></td></tr></table></figure></p>
<p>除了这些数字的变量之外，我们还有一些较为特殊的变量可以在script内使用来调用这些参数</p>
<ul>
<li>$#:代表后接的参数的个数</li>
<li>$@:代表“$1”，“$2”，“$3”，“$4”之意，每个变量是独立的（用双引号括起来）</li>
<li>$*:代表“”$1c$2c$3c$4””，其中c为分隔字符，默认为空格键，所以本例中代表“”$1 $2 $3 $4””之意</li>
</ul>
<h3 id="判断式"><a href="#判断式" class="headerlink" title="判断式"></a>判断式</h3><h6 id="单层，简单条件判断式"><a href="#单层，简单条件判断式" class="headerlink" title="单层，简单条件判断式"></a>单层，简单条件判断式</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">if [条件];then</div><div class="line">    当条件成立时，可以进行的命令工作内容</div><div class="line">fi &lt;---结束之意</div></pre></td></tr></table></figure>
<h6 id="多重，复杂条件判断式"><a href="#多重，复杂条件判断式" class="headerlink" title="多重，复杂条件判断式"></a>多重，复杂条件判断式</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">if [条件]; then</div><div class="line">    当条件成立时，可以进行的命令工作内容</div><div class="line">elif [条件]; then</div><div class="line">    当条件成立时，可以进行的命令工作内容</div><div class="line">fi &lt;---结束之意</div><div class="line"></div><div class="line">或者</div><div class="line"></div><div class="line">if [条件]; then</div><div class="line">    当条件成立时，可以进行的命令工作内容</div><div class="line">elif [条件]; then</div><div class="line">    当条件成立时，可以进行的命令工作内容</div><div class="line">else </div><div class="line">    当条件成立时，可以进行的命令工作内容</div><div class="line">fi &lt;---结束之意</div><div class="line"></div><div class="line">例如：</div><div class="line">#!/bin/bash</div><div class="line"></div><div class="line">if [ &quot;$1&quot; == &quot;hello&quot; ]; then</div><div class="line">	echo &quot;Hello, how are you?&quot;</div><div class="line">elif [ &quot;$1&quot; == &quot;&quot; ]; then</div><div class="line">	echo &quot;you must input params, ex&gt; &#123;$0 someword&#125;&quot;</div><div class="line">else </div><div class="line">	echo &quot;the only params is &apos;hello&apos;, ex&gt; &#123;$0 hello&#125;&quot;</div><div class="line">fi</div></pre></td></tr></table></figure>
<h3 id="netstat-简单使用"><a href="#netstat-简单使用" class="headerlink" title="netstat 简单使用"></a>netstat 简单使用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">~# netstat -tuln</div><div class="line">Active Internet connections (only servers)</div><div class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State      </div><div class="line">tcp        0      0 127.0.0.1:8005          0.0.0.0:*               LISTEN     </div><div class="line">tcp        0      0 0.0.0.0:8009            0.0.0.0:*               LISTEN     </div><div class="line">tcp        0      0 127.0.0.1:6379          0.0.0.0:*               LISTEN     </div><div class="line">tcp        0      0 0.0.0.0:8080            0.0.0.0:*               LISTEN     </div><div class="line">tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN     </div><div class="line">tcp        0      0 0.0.0.0:8081            0.0.0.0:*               LISTEN     </div><div class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN     </div><div class="line">tcp6       0      0 :::3306                 :::*                    LISTEN     </div><div class="line">tcp6       0      0 :::3000                 :::*                    LISTEN     </div><div class="line">tcp6       0      0 :::88                   :::*                    LISTEN     </div><div class="line">udp        0      0 0.0.0.0:33848           0.0.0.0:*                          </div><div class="line">udp        0      0 0.0.0.0:5353            0.0.0.0:*                          </div><div class="line">udp        0      0 172.18.79.196:123       0.0.0.0:*                          </div><div class="line">udp        0      0 127.0.0.1:123           0.0.0.0:*                          </div><div class="line">udp        0      0 0.0.0.0:123             0.0.0.0:*                          </div><div class="line">udp6       0      0 :::123                  :::*</div></pre></td></tr></table></figure>
<p>上面的重点是Local Address（本地主机的IP与端口对应）那个字段，它代表的是本机所启动的网络服务。IP的部分说明的是该服务位于哪个接口上，若为127.0.0.1则是针对本机开放，若是0.0.0.0 或 ::: 则代表对整个Internet开发。每个端口都有其特定的网络服务，几个常见与相关网络服务的关系是：</p>
<ul>
<li>80:www</li>
<li>22:ssh</li>
<li>21:ftp</li>
<li>25:mail</li>
<li>111:RPC（远程过程调用）</li>
<li>631:CUPS（打印服务功能）</li>
</ul>
<h3 id="利用case…esac判断"><a href="#利用case…esac判断" class="headerlink" title="利用case…esac判断"></a>利用case…esac判断</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">case $变量名称 in </div><div class="line">    &quot;第一个变量内容&quot;) &lt;==每个变量内容建议用双引号括起来，关键字则为小括号</div><div class="line">    程序段</div><div class="line">    ;;</div><div class="line">    </div><div class="line">    &quot;第二个变量内容&quot;)</div><div class="line">    程序段</div><div class="line">    ;;</div><div class="line">    </div><div class="line">    *) &lt;==最后一个变量内容都会用*来代表所有其他值，不包含第一个变量内容与第二个变量内容的其他程序执行段</div><div class="line">    ;;</div><div class="line">esac  &lt;== case反过来写，表示结尾</div><div class="line"></div><div class="line">例如：</div><div class="line">#!/bin/bash</div><div class="line"></div><div class="line">case $1 in </div><div class="line">	&quot;hello&quot;)</div><div class="line">		echo &quot;你好&quot;</div><div class="line">		;;</div><div class="line">	</div><div class="line">	&quot;&quot;)</div><div class="line">		echo &quot;请输入参数：ex&gt; &#123;$0 someword&#125;&quot;</div><div class="line">		;;</div><div class="line">	</div><div class="line">	*)</div><div class="line">		echo &quot;usage $0 &#123;hello&#125;&quot;</div><div class="line">		;;</div><div class="line">esac</div></pre></td></tr></table></figure>
<p>每一个变量内容的程序段最后都需要两个分号（;;）来代表该程序段落的结束，这很重要</p>
<p>使用“case $变量 in”这个语法中，当中的那个“$变量”大致有两种取得的方式：</p>
<ul>
<li>直接执行式：例如上面提到的，利用“script.sh variable”的方式来直接给予$1这个变量的内容，这也是在/etc/init.d目录下大多数程序的设计方式</li>
<li>交互式：通过read这个命令来让用户输入变量的内容</li>
</ul>
<h6 id="交互式"><a href="#交互式" class="headerlink" title="交互式"></a>交互式</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line"></div><div class="line">echo &quot;this program will print your selection&quot;</div><div class="line"># 交互式</div><div class="line">read -p &quot;input your choice:&quot; choice</div><div class="line">case $choice in</div><div class="line">	&quot;one&quot;)</div><div class="line">		echo &quot;your choice is one&quot;</div><div class="line">		;;</div><div class="line">	</div><div class="line">	&quot;two&quot;)</div><div class="line">		echo &quot;your choice is two&quot;</div><div class="line">		;;</div><div class="line">		</div><div class="line">	&quot;three&quot;)</div><div class="line">	echo &quot;your choice is three&quot;</div><div class="line">	;;</div><div class="line">	</div><div class="line">	*)</div><div class="line">		echo &quot;usage $0 &#123;one|two|three&#125;&quot;</div><div class="line">		;;</div><div class="line">esac</div></pre></td></tr></table></figure>
<h6 id="直接执行式"><a href="#直接执行式" class="headerlink" title="直接执行式"></a>直接执行式</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line"></div><div class="line">echo &quot;this program will print your selection&quot;</div><div class="line"></div><div class="line">case $1 in </div><div class="line">	&quot;one&quot;)</div><div class="line">		echo &quot;your choice is one&quot;</div><div class="line">		;;</div><div class="line">	</div><div class="line">	&quot;two&quot;)</div><div class="line">		echo &quot;your choice is two&quot;</div><div class="line">		;;</div><div class="line">		</div><div class="line">	&quot;three&quot;)</div><div class="line">	echo &quot;your choice is three&quot;</div><div class="line">	;;</div><div class="line">	</div><div class="line">	*)</div><div class="line">		echo &quot;usage $0 &#123;one|two|three&#125;&quot;</div><div class="line">		;;</div><div class="line">esac</div></pre></td></tr></table></figure>
<h3 id="function"><a href="#function" class="headerlink" title="function"></a>function</h3><p>语法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">function fname() &#123;</div><div class="line">    程序段</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>因为shell script 的执行方式是由上而下，由左而右，因此在shell script当中的function的设置一定要在程序最前面<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line"></div><div class="line">echo &quot;this program will print your selection&quot;</div><div class="line">function printit() &#123;</div><div class="line">	echo -n &quot;your choice is &quot;  # 加上-n可以不断行继续在同一行显示</div><div class="line">&#125;</div><div class="line"># 直接执行式</div><div class="line">case $1 in </div><div class="line">	&quot;one&quot;)</div><div class="line">		printit; echo $1 | tr &apos;a-z&apos; &apos;A-Z&apos; # 将参数大小写转换</div><div class="line">		;;</div><div class="line">	</div><div class="line">	&quot;two&quot;)</div><div class="line">		printit; echo $1 | tr &apos;a-z&apos; &apos;A-Z&apos;</div><div class="line">		;;</div><div class="line">		</div><div class="line">	&quot;three&quot;)</div><div class="line">		printit; echo $1 | tr &apos;a-z&apos; &apos;A-Z&apos;</div><div class="line">		;;</div><div class="line">	</div><div class="line">	*)</div><div class="line">		echo &quot;usage $0 &#123;one|two|three&#125;&quot;</div><div class="line">		;;</div><div class="line">esac</div></pre></td></tr></table></figure></p>
<p>function 也是拥有内置变量的，它的内置变量与shell script很类似，函数名称代表$0,而后续的变量也是以$1,$2…来替代的<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line"></div><div class="line">echo &quot;this program will print your selection&quot;</div><div class="line">function printit() &#123;</div><div class="line">	echo -n &quot;your choice is $1 &quot;  # 加上-n可以不断行继续在同一行显示</div><div class="line">&#125;</div><div class="line"># 直接执行式</div><div class="line">case $1 in </div><div class="line">	&quot;one&quot;)</div><div class="line">		printit 1; echo $1 | tr &apos;a-z&apos; &apos;A-Z&apos; # 将参数大小写转换</div><div class="line">		;;</div><div class="line">	</div><div class="line">	&quot;two&quot;)</div><div class="line">		printit 2; echo $1 | tr &apos;a-z&apos; &apos;A-Z&apos;</div><div class="line">		;;</div><div class="line">		</div><div class="line">	&quot;three&quot;)</div><div class="line">		printit 3; echo $1 | tr &apos;a-z&apos; &apos;A-Z&apos;</div><div class="line">		;;</div><div class="line">	</div><div class="line">	*)</div><div class="line">		echo &quot;usage $0 &#123;one|two|three&#125;&quot;</div><div class="line">		;;</div><div class="line">esac</div></pre></td></tr></table></figure></p>
<h3 id="循环（loop）"><a href="#循环（loop）" class="headerlink" title="循环（loop）"></a>循环（loop）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"># 当condition成立时开始循环</div><div class="line">while [condition]</div><div class="line">do  &lt;== do是循环的开始</div><div class="line">    程序段</div><div class="line">done  &lt;== done 是循环的结束</div><div class="line"></div><div class="line"></div><div class="line"># 当condition 成立时结束循环</div><div class="line">until [condition]</div><div class="line">do  </div><div class="line">    程序段</div><div class="line">done</div></pre></td></tr></table></figure>
<h3 id="for…do…done（固定循环）"><a href="#for…do…done（固定循环）" class="headerlink" title="for…do…done（固定循环）"></a>for…do…done（固定循环）</h3><p>语法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">for var in con1 con2 con3 ...</div><div class="line">do </div><div class="line">    程序段</div><div class="line">done</div></pre></td></tr></table></figure></p>
<p>以上来的语法来说，这个$var 的变量内容在循环工作时：</p>
<ol>
<li>第一次循环时，$var的内容为con1</li>
<li>第二次循环时，$var的内容为con2</li>
<li>第三次循环时，$var的内容为con3</li>
</ol>
<p>例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">for animal in dog cat elepant</div><div class="line">do </div><div class="line">	echo &quot;there are $&#123;animal&#125;s...&quot;</div><div class="line">done</div></pre></td></tr></table></figure></p>
<h3 id="for…do…done数值处理"><a href="#for…do…done数值处理" class="headerlink" title="for…do…done数值处理"></a>for…do…done数值处理</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">for(( 初始值; 限制值; 执行步长))</div><div class="line">do</div><div class="line">    程序段</div><div class="line">done</div></pre></td></tr></table></figure>
<p>这种语法适合于数值方式的运算当中，在for后面的括号内的三串内容意义为：</p>
<ol>
<li>初始值：某个变量在循环当中的初始值，直接以类似i=1设置好</li>
<li>限制值：当变量的值在这个限制值的范围内，就继续进行循环，例如i&lt;=100</li>
<li>执行步长：每做一次循环时变量的变化值，例如i=i+1</li>
</ol>
<h3 id="shell-script的追踪与调试"><a href="#shell-script的追踪与调试" class="headerlink" title="shell script的追踪与调试"></a>shell script的追踪与调试</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">sh [-nvx] scripts.sh</div><div class="line">参数：</div><div class="line">-n：不要执行script，仅查询语法的问题</div><div class="line">-v：在执行script前，先将script的内容输出到屏幕上</div><div class="line">-x：将使用到的script内容显示到屏幕上，这是很有用的参数</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://clq2owesome.github.io/2018/02/25/Java/时间日期/格式化/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LeoChan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LeoChan's 个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/25/Java/时间日期/格式化/" itemprop="url">格式化</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-02-25T10:09:45+08:00">
                2018-02-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
                  . 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/时间日期/" itemprop="url" rel="index">
                    <span itemprop="name">时间日期</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p> 格式化参数说明</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>y</td>
<td>年</td>
</tr>
<tr>
<td>M</td>
<td>年中的月份</td>
</tr>
<tr>
<td>w</td>
<td>年中的周数</td>
</tr>
<tr>
<td>W</td>
<td>月份中的周数</td>
</tr>
<tr>
<td>D</td>
<td>年中的天数</td>
</tr>
<tr>
<td>d</td>
<td>月份中的天数</td>
</tr>
<tr>
<td>F</td>
<td>月份中的星期</td>
</tr>
<tr>
<td>H</td>
<td>一天中的小时数（0-23）</td>
</tr>
<tr>
<td>k</td>
<td>一天中的小时数（1-24）</td>
</tr>
<tr>
<td>K</td>
<td>am/pm 中的小时数（0-11）</td>
</tr>
<tr>
<td>h</td>
<td>am/pm 中的小时数（1-12）</td>
</tr>
<tr>
<td>m</td>
<td>小时中的分钟数</td>
</tr>
<tr>
<td>s</td>
<td>分钟中的秒数</td>
</tr>
<tr>
<td>S</td>
<td>毫秒数</td>
</tr>
<tr>
<td>z</td>
<td>时区</td>
</tr>
<tr>
<td>Z</td>
<td>时区</td>
</tr>
<tr>
<td>EE</td>
<td>周中的星期几</td>
</tr>
</tbody>
</table>
<h3 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h3><h4 id="日期转成String"><a href="#日期转成String" class="headerlink" title="日期转成String"></a>日期转成String</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Date date = new Date(System.currentTimeMillis());</div><div class="line">SimpleDateFormat sf = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss S&quot;);</div><div class="line">sf.format(date)</div></pre></td></tr></table></figure>
<h4 id="String转成日期"><a href="#String转成日期" class="headerlink" title="String转成日期"></a>String转成日期</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">SimpleDateFormat sf = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss S&quot;);</div><div class="line">try &#123;</div><div class="line">	Date d = sf.parse(&quot;2017-10-17&quot;);</div><div class="line">&#125; catch (ParseException e) &#123;</div><div class="line">	e.printStackTrace();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://clq2owesome.github.io/2018/02/25/Linux/别名，历史命令/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="LeoChan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LeoChan's 个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/25/Linux/别名，历史命令/" itemprop="url">别名，历史命令</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-02-25T10:09:45+08:00">
                2018-02-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="设置和取消别名（alias，unalias）"><a href="#设置和取消别名（alias，unalias）" class="headerlink" title="设置和取消别名（alias，unalias）"></a>设置和取消别名（alias，unalias）</h3><p>alias的定义规则和变量定义规则几乎相同，所以你只要在alias后面加上你的（”别名”=’命令参数…’）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">alias lm=&apos;ls -l | more&apos;</div></pre></td></tr></table></figure></p>
<p>取消别名<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">unalias lm</div></pre></td></tr></table></figure></p>
<h3 id="历史命令"><a href="#历史命令" class="headerlink" title="历史命令"></a>历史命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">history [n]</div><div class="line">history [-c]</div><div class="line">history [-raw] histfiles</div><div class="line">参数：</div><div class="line">n：数字，是要列出最近的n条命令行</div><div class="line">-c：将目前的shell中的所有history内容全部消除</div><div class="line">-a：将目前新增的history命令新增入histfiles中，若没有加histfiles，则默认写入~/.bash_history</div><div class="line">-r：将histfiles的内容读到目前这个shell的history记忆中</div><div class="line">-w：将目前的history记忆内容写入histfiles中</div><div class="line"></div><div class="line"></div><div class="line">!number</div><div class="line">!command</div><div class="line">!!</div><div class="line">参数：</div><div class="line">number：执行第几条命令</div><div class="line">command：由最近的命令向前搜寻命令串开头为command的那个命令，并执行</div><div class="line">!!：就是执行上一条命令（相当于按↑按键后，按[Enter]）</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/24/">24</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="LeoChan" />
          <p class="site-author-name" itemprop="name">LeoChan</p>
           
              <p class="site-description motion-element" itemprop="description">描述啊</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">235</span>
                <span class="site-state-item-name">Artikel</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">43</span>
                <span class="site-state-item-name">Kategorien</span>
              
            </div>
          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LeoChan</span>
</div>


<div class="powered-by">
  Erstellt mit  <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  






  





  

  

  

  

  

  

</body>
</html>
